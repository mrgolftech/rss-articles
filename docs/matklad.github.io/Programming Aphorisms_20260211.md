# Programming Aphorisms

**Êù•Ê∫ê:** [matklad.github.io](https://matklad.github.io)
**ÂèëÂ∏ÉÊó∂Èó¥:** 2026-02-11T00:00:00+00:00
**ÈìæÊé•:** https://matklad.github.io/2026/02/11/programming-aphorisms.html

---

{'type': 'text/html', 'language': None, 'base': 'https://matklad.github.io/2026/02/11/programming-aphorisms.html', 'value': '<header>\n  <h1>Programming Aphorisms</h1>\n  <time class="meta" datetime="2026-02-11">Feb 11, 2026</time>\n</header>\n<p>A meta programming post ‚Äî looking at my thought process when coding and trying to pin down what is\nprogramming ‚Äúknowledge‚Äù. Turns out, a significant fraction of that is just reducing new problems to\na vocabulary of known tricks. This is a personal, descriptive post, not a prescriptive post for you.</p>\n<p>It starts with a question posted on Ziggit. The background here is that Zig is in the process of\nremoving ambient IO capabilities. Currently, you can access program environment from anywhere via\n<span class="display"><code>std.process.getEnvVarOwned</code>.</span>\nIn the next Zig version, you‚Äôll have to thread\n<span class="display"><code>std.process.Environ.Map</code></span>\nfrom main down to every routine that needs access to the environment. In this user‚Äôs case, they have\na <code>readHistory</code> function which used to look up the path to the history file in the environment, and\nthey are wondering how to best model that in the new Zig. The options on the table are:</p>\n\n<figure class="code-block">\n\n\n<pre><code><span class="line"><span class="hl-keyword">pub</span> <span class="hl-keyword">fn</span><span class="hl-function"> readHistory</span>(</span>\n<span class="line">    io: std.Io,</span>\n<span class="line">    alloc: Allocator,</span>\n<span class="line">    file: std.Io.File,</span>\n<span class="line">) ReadHistoryError<span class="hl-operator">!</span><span class="hl-type">void</span>;</span>\n<span class="line"></span>\n<span class="line"><span class="hl-keyword">pub</span> <span class="hl-keyword">fn</span><span class="hl-function"> readHistory</span>(</span>\n<span class="line">    io: std.Io,</span>\n<span class="line">    alloc: Allocator,</span>\n<span class="line">    maybe_environ_map: ?<span class="hl-operator">*</span>std.process.Environ.Map,</span>\n<span class="line">) ReadHistoryError<span class="hl-operator">!</span><span class="hl-type">void</span>;</span>\n<span class="line"></span>\n<span class="line"><span class="hl-keyword">pub</span> <span class="hl-keyword">fn</span><span class="hl-function"> readHistory</span>(</span>\n<span class="line">    io: std.Io,</span>\n<span class="line">    alloc: Allocator,</span>\n<span class="line">    maybe_absolute_path: ?[]<span class="hl-keyword">const</span> <span class="hl-type">u8</span>,</span>\n<span class="line">    maybe_environ_map: ?<span class="hl-operator">*</span>std.process.Environ.Map,</span>\n<span class="line">) ReadHistoryError<span class="hl-operator">!</span><span class="hl-type">void</span>;</span></code></pre>\n\n</figure>\n<p>My starting point would instead be this:</p>\n\n<figure class="code-block">\n\n\n<pre><code><span class="line"><span class="hl-keyword">pub</span> <span class="hl-keyword">const</span> HistoryOptions = <span class="hl-keyword">struct</span> {</span>\n<span class="line">    file: []<span class="hl-keyword">const</span> <span class="hl-type">u8</span>,</span>\n<span class="line"></span>\n<span class="line">    <span class="hl-keyword">pub</span> <span class="hl-keyword">fn</span><span class="hl-function"> from_environment</span>(</span>\n<span class="line">        environment: <span class="hl-operator">*</span><span class="hl-keyword">const</span> std.process.Environ.Map,</span>\n<span class="line">    ) HistoryOptions;</span>\n<span class="line">};</span>\n<span class="line"></span>\n<span class="line"><span class="hl-keyword">pub</span> <span class="hl-keyword">fn</span><span class="hl-function"> readHistory</span>(</span>\n<span class="line">    io: std.Io,</span>\n<span class="line">    gpa: Allocator,</span>\n<span class="line">    options: HistoryOptions,</span>\n<span class="line">) ReadHistoryError<span class="hl-operator">!</span><span class="hl-type">void</span>;</span></code></pre>\n\n</figure>\n<p>In terms of meta programming, what I find fascinating is that this, for me, is both immediate (I\ndon‚Äôt have to think about it), but also is clearly decomposable into multiple factoids I‚Äôve\naccumulated before. Here‚Äôs a deconstruction of what I did here, the verbal ‚Äúlabels‚Äù I use to think\nabout what I did, and where I had learned to do that:</p>\n<p><em>First</em>, I ‚Äúraised the abstraction level‚Äù by giving <em>it</em> a name and a type (<code>HistoryOptions</code>). This\nis a rare transformation which I learned and named myself. Naming is important for my thinking and\ncommunicating process. ‚ÄúLet‚Äôs raise abstraction level‚Äù is a staple code review comment of mine.</p>\n<p><em>Second</em>, I avoided ‚Äúmidlayer mistake‚Äù by making sure that every aspect of options is\nuser-configurable. Easy to do in Zig, where all fields are public. I learned about\n<a href="https://lwn.net/Articles/336262/">midlayer mistake</a> from a GitHub comment by\n<a href="https://joshtriplett.org">Josh Triplett</a>.</p>\n<p><em>Third</em>, I provided a ‚Äúshortcut‚Äù, the\n<span class="display"><code>from_environment</code></span>\nconvenience function that cuts across abstraction layers. I learned the ‚Äúshortcut‚Äù aphorism from\n<a href="https://spookylukey.github.io/django-views-the-right-way/detail-view.html#discussion-layering-violations-shortcuts-vs-mixins"><em>Django Views ‚Äî The Right Way</em>.</a>\nGermane to the present article, I read that post a decade after I had touched Django the last time.\nIt was useless to me on the object level. On the meta level, reading the article solidified and\n<em>named</em> several programming tricks for me. See reverberations in\n<a href="https://rust-analyzer.github.io/blog/2020/09/28/how-to-make-a-light-bulb.html"><em>How to Make a üí°?</em>.</a></p>\n<p><em>Fourth</em>, I instinctively renamed <code>alloc</code> to ‚Äúgpa‚Äù (in opposition to ‚Äúarena‚Äù), the naming I spotted\nin the Zig compiler.</p>\n<p><em>Fifth</em>, I named the configuration parameter ‚Äúoptions‚Äù, not <code>config</code>, <code>props</code> or <code>params</code>, a naming\nscheme I learned at TigerBeetle.</p>\n<p><em>Sixth</em>, I made sure that the signature follows ‚Äúpositional DI‚Äù scheme. Arguments that are\ndependencies, resources with unique types are injected positionally (and have canonical names like\n<code>io</code> or <code>gpa</code>). Arguments that <em>directly</em> vary the behavior of function (as opposed to affecting\ntransitive callees) are passed by name, in the <code>Options</code> struct.</p>\n<p>To be specific, I don‚Äôt claim that my snippet is the right way to do this! I have no idea, as I\ndon‚Äôt have access to the full context. Rather, if I were <em>actually</em> solving the problem, the snippet\nabove would be my initial starting point for further iteration.</p>\n<p>Note that I also don‚Äôt explain <em>why</em> I am doing the above six things, I only name them and point at\nthe origin. Actually explaining the <em>why</em> would take a blog post of its own for every one of them.</p>\n<p>And this is I think the key property of my thought process ‚Äî I have a bag of tricks, where the\ntricks are named. Inside my mind, this label points both to the actual trick (code to type),\nas well as a justification for it (in what context that would be a good trick to use).</p>\n<p>And I use these tricks all the time, literally! Just answering in passing to a forum comment makes\nme grab a handful! A lot of my knowledge is structured like a book of coding aphorisms.</p>\n<hr />\n<p>Meta meta ‚Äî how come I have acquired all those tricks? I read voraciously, random commits, issues,\njumping enthusiastically into rabbit holes and going on wiki trips. The key skill here is\nrecognizing an aphorism once you see it. Reading Ziggit is part of trick-acquisition routine for\nme. Having learned the trick, I remember it, where ‚Äúremembering‚Äù is an act of active recall at the\nopportune moment. This recall powers ‚Äúhorizontal gene transfer‚Äù across domains, stealing shortcuts\nfrom Django and midlayer mistake from the kernel. Did you notice that applying ‚Äúhorizontal gene\ntransfer‚Äù to the domain of software engineering tacit knowledge is horizontal gene transfer? When\nentering a new domain, I actively seek out the missing tricks. I am relatively recent in Zig, but\nall the above tricks are either Zig native, or at least Zig adapted. Every once in a while, I\n‚Äúinvent‚Äù a trick of my own. For example, ‚Äúpositional DI‚Äù is something I only verbalized last year.\nThis doesn‚Äôt mean I hadn‚Äôt been doing that before, just that the activity wasn‚Äôt mentally labeled as\na separate thing you can deliberately do. I had the idea, now I also have an aphorism.</p>'}

---

*ÊäìÂèñÊó∂Èó¥: 2026-02-12 00:03:00*
