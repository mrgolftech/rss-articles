# Adding OpenStreetMap login to Auth0

**来源:** [shkspr.mobi](https://shkspr.mobi)
**发布时间:** Tue, 24 Feb 2026 12:34:21 +0000
**链接:** https://shkspr.mobi/blog/2026/02/adding-openstreetmap-login-to-auth0/

---

{'type': 'text/html', 'language': None, 'base': 'https://shkspr.mobi/blog/feed/', 'value': '<p>So you want to add OSM as an OAuth provider to Auth0? Here\'s a tip - you do <em>not</em> want to create a custom social connection!</p>\n\n<p>Instead, you need to create an "OpenID Connect" provider. Here\'s how.</p>\n\n<h2 id="opensteetmap"><a href="https://shkspr.mobi/blog/2026/02/adding-openstreetmap-login-to-auth0/#opensteetmap">OpenSteetMap</a></h2>\n\n<p>As per <a href="https://wiki.openstreetmap.org/wiki/OAuth#Using_OpenStreetMap_as_identity_provider">the OAuth documentation</a> you will need to:</p>\n\n<ul>\n<li>Register a new app at <a href="https://www.openstreetmap.org/oauth2/applications/">https://www.openstreetmap.org/oauth2/applications/</a></li>\n<li>Give it a name that users will recognise</li>\n<li>Give it a redirect of <code>https://Your Auth0 Tenant.eu.auth0.com/login/callback</code></li>\n<li>Tick the box for "Sign in using OpenStreetMap"</li>\n</ul>\n\n<p>Once created, you will need to securely save your Client ID and Client Secret.</p>\n\n<h2 id="auth0"><a href="https://shkspr.mobi/blog/2026/02/adding-openstreetmap-login-to-auth0/#auth0">Auth0</a></h2>\n\n<p>These options change frequently, so use this guide with care.</p>\n\n<ul>\n<li>Once you have logged in to your Auth0 Tennant, go to Authentication → Enterprise → OpenID Connect → Create Connection</li>\n<li>Provide the new connection with the Client ID and Client Secret</li>\n<li>Set the "scope" to be <code>openid</code></li>\n<li>Set the OpenID Connect Discovery URL to be <code>https://www.openstreetmap.org/.well-known/openid-configuration</code></li>\n<li>In the "Login Experience" tick the box for "Display connection as a button"</li>\n<li>Set the favicon to be <code>https://blog.openstreetmap.org/wp-content/uploads/2022/07/osm-favicon.png</code> or other suitable graphic</li>\n</ul>\n\n<h2 id="next-steps"><a href="https://shkspr.mobi/blog/2026/02/adding-openstreetmap-login-to-auth0/#next-steps">Next Steps</a></h2>\n\n<p>We\'re not quite done, sadly.</p>\n\n<p>The details which OSM sends back to Auth0 are limited, so Auth0 is missing a few bits:</p>\n\n<pre><code class="language-json">{\n    "created_at": "2026-02-29T12:34:56.772Z",\n    "identities": [\n        {\n            "user_id": "openstreetmap-openid|123456",\n            "provider": "oidc",\n            "connection": "openstreetmap-openid",\n            "isSocial": false\n        }\n    ],\n    "name": "",\n    "nickname": "",\n    "picture": "https://cdn.auth0.com/avatars/default.png",\n    "preferred_username": "Terence Eden",\n    "updated_at": "2026-02-04T12:01:33.772Z",\n    "user_id": "oidc|openstreetmap-openid|123456",\n    "last_ip": "12.34.56.78",\n    "last_login": "2026-02-29T12:34:56.772Z",\n    "logins_count": 1,\n    "blocked_for": [],\n    "guardian_authenticators": [],\n    "passkeys": []\n}\n</code></pre>\n\n<p>Annoyingly, Auth0 doesn\'t set a name or nickname - so you\'ll need to manually get the <code>preferred_username</code>, or create a "User Map":</p>\n\n<pre><code class="language-json">{\n  "mapping_mode": "use_map",\n  "attributes": {\n    "nickname": "${context.tokenset.preferred_username}",\n    "name":     "${context.tokenset.preferred_username}"\n  }\n}\n</code></pre>\n\n<p>There\'s also no avatar image - only the default one.</p>\n\n<h3 id="getting-the-avatar-image"><a href="https://shkspr.mobi/blog/2026/02/adding-openstreetmap-login-to-auth0/#getting-the-avatar-image">Getting the Avatar Image</a></h3>\n\n<p>The <a href="https://wiki.openstreetmap.org/wiki/API_v0.6">OSM API</a> has a method for <a href="https://wiki.openstreetmap.org/wiki/API_v0.6#Methods_for_user_data">getting user data</a>.</p>\n\n<p>For example, here\'s all my public data: <a href="https://api.openstreetmap.org/api/0.6/user/98672.json">https://api.openstreetmap.org/api/0.6/user/98672.json</a> - thankfully no authorisation required!</p>\n\n<pre><code class="language-json">{\n  "user": {\n    "id": 98672,\n    "display_name": "Terence Eden",\n    "img": {\n      "href": "https://www.gravatar.com/avatar/52cb49a66755f31abf4df9a6549f0f9c.jpg?s=100&amp;d=https%3A%2F%2Fapi.openstreetmap.org%2Fassets%2Favatar_large-54d681ddaf47c4181b05dbfae378dc0201b393bbad3ff0e68143c3d5f3880ace.png"\n    }\n  }\n}\n</code></pre>\n\n<p>Alternatively, you can <a href="https://github.com/microlinkhq/unavatar/issues/488">use the Unavatar service</a> to get the image indirectly.</p>\n\n<p>I hope that\'s helpful to someone!</p>'}

---

*抓取时间: 2026-02-25 00:06:47*
