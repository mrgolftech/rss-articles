
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="技术博客文章聚合 - Hacker News 2025年最受欢迎的博客">
      
      
        <meta name="author" content="OpenClaw">
      
      
        <link rel="canonical" href="https://mrgolftech.github.io/rss-articles/oldvcr.blogspot.com/Hands-on%20with%20two%20Apple%20Network%20Server%20prototype%20ROMs_20260205/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Hands-on with two Apple Network Server prototype ROMs\n\n来源: https://oldvcr.blogspot.com\n链接: https://oldvcr.blogspot.com/2026/01/hands-on-with-two-apple-network-server.html\n日期: 2026-01-25T00:03:00.000-08:00\n\n---\n\nGrateful acknowledgement made to the several former Apple employees who materially contributed to this entry. This article wouldn't have been possible without you!\nHere's why I need to do inventory more often.\nThis is an Apple prototype ROM I am ashamed to admit I found in my own box of junk from various Apple Network Server parts someone at Apple Austin sent me in 2003. The 1996 Apple Network Server is one of Apple's more noteworthy white elephants and, to date, the last non-Macintosh computer (iOS devices notwithstanding) to come from Cupertino. Best known for being about the size of a generous dorm fridge and officially only running AIX 4.1, IBM's proprietary Unix for Power ISA,\nits complicated history\nis a microcosm of some of Apple's strangest days during the mid-1990s. At $10,000+ a pop (in 2026 dollars over $20,700), not counting the AIX license, they sold poorly and were among the first products on the chopping block when Steve Jobs returned in 1997.\nstockholm\n, my own Apple Network Server 500, was a castoff I got in 1998 — practically new — when the University bookstore's vendor wouldn't support the hardware and it got surplused. It was the first Unix server I ever owned personally, over the years I ended up installing nearly every available upgrade, and it ran Floodgap.com just about nonstop until I replaced it with a POWER6 in 2012 (for which it still functions as an emergency reserve). Plus, as the University was still running RS/6000 systems back then, I had ready access to tons of AIX software which the ANS ran flawlessly. It remains one of the jewels of my collection.\nSo when\nthe mythical ANS MacOS ROM finally surfaced\n, I was\nvery\ninterested. There had always been interest in getting the ANS to run MacOS back in the day (I remember wasting an afternoon trying with a Mac OS 8 CD) and it was a poorly-kept secret that at various points in its development it could, given its hardware basis as a heavily modified Power Macintosh 9500. Apple itself perceived this interest, even demonstrating it with Mac OS prior to its release, and leading then-CTO Ellen Hancock to later announce that the ANS would get ROM upgrades to allow it to run both regular Mac OS and, in a shock to the industry, Windows NT. This would have made the ANS the first and only Apple machine ever sold to support it.\nWell, guess what. This is\nthat\npre-production ROM Apple originally used to demonstrate Mac OS, and another individual has stepped up with the NT ROMs which are also now in my possession. However, at that time it wasn't clear what the prototype ROM stick was — just a whole bunch of flash chips on a Power Mac ROM DIMM which my Apple contacts tell me was used to develop many other machines at the time — and there was no way I was sticking it into my beloved production 500. But we have a solution for that. Network Servers came in three sizes: the rackmount ANS 300 ("Deep Dish") which was never released except for a small number of prototypes, the baseline ANS 500 ("Shiner LE"), and the highest tier ANS 700 ("Shiner HE") which added more drive bays and redundant, hot-swappable power supplies.\nWhich brings us to\nthis\nmachine.\nMeet\nholmstock\n, my Network Server 700, and the second ANS in my collection (the third is my non-functional\nShiner ESB prototype\n). This was a ship of Theseus that my friend CB and I assembled out of two partially working but rather thrashed 700s we got for "come and get them" in August 2003. It served as\nstockholm\n's body double for a number of years until\nstockholm\nwas retired and\nholmstock\nwent into cold storage as a holding bay for spare parts. This makes it the perfect system to try a dodgy ROM in.\nI'll give you a spoiler now: it turns out the NT ROM isn't enough to install Windows NT by itself, even though it has some interesting attributes. Sadly this was not unexpected. But the pre-production ROM does work to boot Mac OS, albeit with apparent bugs and an injection of extra hardware. Let's get the 700 running again (call it a Refurb Weekend) and show the process.\nThe 700 weighs around 85 pounds unloaded and is exactly like trying to cram a refrigerator into the backseat of your car (in this case my Honda Civic Si). While it does have wheels on the bottom, even the good ones don't have a great turning radius (and these aren't good), and getting it in and out of the car unavoidably means having to pick it up. Lift with your knees, not with your back.\nPreparing the 700 for testing\nThis section is basically a cloaked Refurb Weekend, but even if you're familiar with ANS guts, I'm going to point out a few specific things relevant to ROM support as we go along. We want this machine as ship-shape as we can get it so that accurate observations can be made for posterity!\nI would also like to thank my wife who chose to politely ignore the new noisy beast hulking in the living room for a few days.\nContinuing in the fridge motif, the 500 and 700 have a front keylock controlling a sliding door, along with a unique 4-line LCD which displays boot information and can be used as an output device in AIX and other operating systems. Unlike my very minimally yellowed 500 which has spent most of its life in quiet smoke-free server rooms, this one seemed to have gotten a bit more sun. Fortunately most of the chassis is painted metal which is also where most of the weight comes from. The keylock position on power-up is noted by the firmware; the leftmost is the service setting, the middle is a normal boot, and the rightmost (locked) position puts the machine into a power failsafe mode.\nThe sliding door covers seven front drive bays, normally one with a CD-ROM, one with some sort of tape drive (typically a DAT/DDS drive, but a few have 8mm tape instead, both the same drives as sold for the Workgroup Server 95 and 9150), and the rest various hard drives which can be either independent or connected into an optional RAID. The 700 can take two more drives in a rear bracket. Although I have the RAID card, I never ended up installing it since a single drive was more than sufficient for what I was using it for. As most of the drive trays and both drive brackets had been removed from the two donor 700s used to assemble\nholmstock\n, I ended up just keeping a CD-ROM and two trays, and used the other open space for storage.\nAt the top are the NMI, reset and power buttons, plus a standard Mac floppy drive.\nIt is worth noting here that the internal bays are all serviced by two Symbios Logic 53C825A controllers, providing two Fast Wide SCSI busses running at 20MB/s. Unlike the typical Power Mac MESH (10MB/s) controller, the ANS internal SCSI controllers are unique to the ANS and appear in no other Apple product. Remember this for later. A second external SCSI bus is available on the rear, using the same (slower 5MB/s) CURIO SCSI/Ethernet/serial combo chip as other contemporary Power Macs and implementing an NCR 53C94.\nThe rear (with the monitor power cable photobombing the shot) is much less yellowed. Ports are here for audio in and out (standard\nAWACS\n), ADB, two beige Mac MiniDIN-8 serial ports, VGA (oddly but happily a conventional HDI-15, not Apple's traditional DA-15), AAUI 10Mbit Ethernet (any AAUI Mac dongle will work), and the external SCSI bus DB-25. Six PCI slots are available. A second keylock secures the logic board which is on a slide-out drawer accessed with the two handles. Both rear panels have their own fans which are hot-swappable as well. Apple included a monitor dongle in the box.\nIt is also worth noting here that the onboard video is a Cirrus Logic 54M30, also unique to the ANS, and likewise also used in no other Apple product. We'll be coming back to this point too.\nParenthetically, here are the keylocks (new replacements in my part box). They are wafer-lock keys of the same type used in the Quadra 950, Apple Workgroup Server 95 and Workgroup Server 9150. As sold Network Servers came with three keys, one front, one back and one spare, but they are all interchangeable. These keys have a small three-digit code engraved into the metal identifying the lock they are designed to fit.\nI also got out a lot of parts from storage just in case they were needed, some of which were in the 700 and some of which were separate. Besides my two boxes of tricks, I also pulled out a spare logic board, five boxes of RAM upgrade kits (these are only 16MB each, though, so this isn't as much memory as you'd think), a 200MHz CPU upgrade kit, several more loose CPUs I also have, and a RAID card just for fun.\nI dimly recalled the machine may not have been working right when I committed it to storage, but we'll proceed as if it had been, starting with a visual inspection of the electronics.\nThe keylock on the logic board drawer (shown here with the rear panel off so you can see how it operates) has just two positions. In the horizontal locked position, the board is connected to power and a metal tab prevents the drawer from coming out. In the vertical unlocked position, the board is disconnected and the tab is moved away from the chassis so the drawer can be pulled free. We turn the rear key, grab the handles and pull the board drawer out.\nThis is the logic board (the spare in the bag). It has a broadly similar layout to other six-slot Power Macs and has many of the same chips, including a Grand Central (labeled I/O CNTRL, near the Cirrus Logic video ASIC), CURIO (labeled SCSI/ENET) and two Bandits (labeled as PCI BRIDGEs). However, it only has eight RAM DIMM slots instead of the 9500's twelve, and most of the system connections are consolidated into a single card edge at the top and a large power connector at the bottom. There are separate slots for the ROM DIMM, the CPU daughtercard and the L2 cache. Headers handle both internal SCSI busses, the mainboard fan and the rear keylock. A small red CUDA reset button is at the top left.\nInstalled, the board sits in front of the mainboard fan which is primarily used to cool the CPU daughtercard. This daughtercard rides in plastic rails that serve as alignment guides and structural support. Tabs and a couple mounting screws hold the logic board in place in the drawer. The tabs, card rails and much of the drawer itself are unfortunately made from Amelioplastic, but this drawer is thick and not normally exposed to the exterior, and it mercifully remains in good physical condition. Note that when the drawer is open, the board is completely ungrounded, so only handle it with antistatic precautions.\nI never store machines with their PRAM batteries installed (especially since my Shiner ESB prototype had been ruined by the previous owner doing so, during which time it leaked and corroded the logic board), but in this particular case since we will be messing with the system it is easier to reset the logic board if we never install the battery at all. With the machine unplugged, the battery out and the rear key unlocked (horizontal), the board will be completely depowered and will reset in about three minutes or so.\nThe CPU card is much larger than the ones used in most other PCI Power Macs and was intended to accommodate a dual-processor SMP option which was never sold, though again some prototypes have escaped (I would love to get one). Unfortunately this means that Power Mac CPU cards can't upgrade an ANS and the highest-speed option is the 200MHz 604e card shown here, but any ANS CPU card will work in any ANS, so\nstockholm\nalso has a 200MHz card. Bus speed and CPU speed are related: the 132MHz (base 500) and 176MHz 604 cards run the bus at 44MHz, but the 150MHz 604 (base 700) and 200MHz 604e cards run the bus at 50MHz.\nAt the top is the 700's standard 1MB L2 cache (the 500 came with 512K). These are allegedly regular Power Mac caches, and a Network Server 1MB cache should work in other Power Macs, but the 500 kernel-panicked with a Sonnet L2 cache upgrade and I eventually had to chase down a 1MB card pulled from another 700.\nBehind that is the ROM stick and the centrepiece of this article. They are not always labeled — one of my spares isn't — but when they are, the standard production ROM is part 341-0833. It is a regular 4MB ROM like other Old World Macs. We're going to test this machine with that before we go installing the others.\nTo get a test report will require a minimum amount of RAM. The ANS uses the same 168-pin DIMMs as other Power Macs and can accept up to 512MB (anything greater is not supported by the memory controller), but uniquely needs 60ns\nparity\nRAM for highest performance. If\nany\nDIMM is not parity, then the system ROM disables parity for\nall\nDIMMs\nand\nsets the timing to 70ns, even if the RAM is faster. This is a non-trivial hit, especially at the fastest 50MHz bus speed, so you really want parity if you can get it. Here I'm using parity FPM, which was sold standard in the units (all units came with at least 32MB in two 16MB DIMMs) and in upgrade kits (16MB in two 8MB DIMMs), all manufactured by IBM as OEM under contract and sold at typically exorbitant Apple prices.\nLater on 64MB and 128MB parity DIMMs became available and\nstockholm\nhas a full 512MB from eight 64MB parity sticks. RAM need not be installed in pairs, though this is preferred as the ANS supports interleaving. While EDO RAM should "just work" (treated as FPM), I've never tried parity EDO in an ANS. We'll put in two IBM 16MB parity FPM DIMMs to equal the base 32MB.\nWith the drawer closed and the rear key locked, we plug in the server (no drives attached yet), turn the front key to service, and then press the front power button to get ... a mostly blank front LCD instead of startup messages.\nHaving worked with these beasts for decades, this appearance — a backlit LCD with a mostly blank or dark block display — almost certainly indicates a problem with the processor card, because enough of the logic board is working to power on the front panel but the CPU isn't running. Typically this is because the processor wormed itself out of the board and needs to be reseated, but you can also get something like this if the card went bad, and less commonly if the ROM stick isn't installed correctly.\nHowever (moving the monitor cord out of the way), we have a problem: we can't get the drawer to open wide enough to pull out and reseat the CPU card. We'll have to take the drawer off.\nAs usual, removing the drawer is relatively easy (it's getting it back on that's the trick). Two plastic latches on the underside of the drawer, fortunately still also in good nick, slip into two gaps in the metal slide rails. Supporting the drawer with your other hand so it doesn't fall off, push each latch in and push back the rail to disengage it.\nThe drawer then lifts off and can be put aside, preferably onto an antistatic mat.\nHere's the inside, where the logic board connects. The powerplane connector is at the bottom. The board at the top is the right half of the mezzanine (codenamed "HENDY"), with the slot for the logic board's card edge and a connector for the front panel.\nThe mezz is a "horseshoe" that straddles both sides, better shown here with the top off. The other side has connectors for the NMI and reset buttons, floppy drive and SCSI busses.\nThose bus connectors come from the SCSI backplane on the other side, here with that panel off (which can now be removed because the drawer is out). Both the front (and in the 700, the rear) drive connectors hook up here. I'd forgotten I'd disconnected bus 1 when I stored it, so I later reconnected the cable to J11 before closing this back up. If you don't do this, besides drives not working, you may get spurious errors warning that the drive fan failed or is not present (see later on).\nThe problem with the sliding rails turned out to be two-fold, first some stuck broken pieces of plastic which I removed, and second whatever lubricant Apple had used which over the decades had desiccated into gluey, copper-coloured gunk. I cleaned off most of the ick and then used WD-40 white lithium (not regular WD-40) on the rails and worked it back and forth into the bearings. If it's good enough for your garage door opener, it's good enough for your unusual Apple server.\nAfter about ten minutes of spraying and sliding, both rails now move smoothly and reach their maximum extents. I was very careful to wipe off any excess so there wouldn't be a mess later.\nNow to remount the drawer. This is not well-explained in the official Apple service manual, so I'll be more explicit here. On each slide are two small metal hooks. If you don't see the hooks, pull the slides forward until you do.\nOn each slide, one of the hooks goes into a metal notch on the two metal rails mounted on the back of the drawer. On the top slide, the bottom hook engages; on the bottom slide, the top one does.\nOnce you've done that, then while using one hand to support the drawer, pull each slide forward until it engages with each of the black latches (it will click into position).\nNow we can pull the drawer all the way out, pull out the 200MHz card and try to reseat it using the card guides. You shouldn't need to force it in, though it does need a bit of grunt to ensure both rows of contacts get into the slot.\nClosing the drawer likewise doesn't require force\nper se\n, but the rear keylock will not turn unless you have the board fully engaged with the mezz and powerplane. There are thumbscrews but they don't really make much difference for this. Sometimes you have to slam it in a couple times, making sure the thumbscrews are completely loosened and out so that they don't get in the way. When the logic board is properly engaged and the drawer is fully closed, it should be easy to turn the rear key.\nUnfortunately reseating the processor card didn't fix it, so the next step is to try a different one.\nI'm saving the other 200MHz card as a spare for\nstockholm\n, but we have several 150MHz cards, so I selected one of those.\nAnd it starts up! We have messages on the LCD showing the 150MHz 604 (with 50MHz bus), 32MB of parity RAM and 1MB of L2 cache were all properly detected. The reported ROM version of 1.1.22 is consistent with production ROMs as shipped. If you connect to Port 2 on the rear at 9600bps during POST, you may see additional messages.\nSince the front key is in the service position, it goes into a service boot, first trying the CD (looking for a bootloader) and then looking for the file\ndiags\non a floppy disk. We have provided the machine with neither, and nothing else is available, so the server drops to an Open Firmware prompt.\nOpen Firmware is the boot environment for all Power Macs starting with the first beige PCI systems. Originating at Sun as OpenBoot, Open Firmware provides an interactive Forth interpreter, which is used for interpreting cross-platform FCode (bytecode) in device ROMs but can also be used for development, and makes available a built-in means of managing and storing settings for installed hardware. In Macs of this generation it was generally invisible to the user except if specifically enabled or requested — remember this for later as well — and the Apple Network Server was the earliest Power Mac (well, derived, anyway) system where Open Firmware was explicitly user-facing. Open Firmware survives today largely in the form of\nOpenBIOS\n.\nThe\ndiags\nfile in question could be theorically any XCOFF binary, but it's specifically looking for this, the Network Server Diagnostic Utility. This came on a floppy disk in the ANS accessory pack. We'll use the NSDU to check the rest of our configuration.\nWe could reboot the server, but we can just start it from the Open Firmware prompt directly with\nboot fd:diags\n. You can also see some of the system's current Open Firmware environment variables; we'll have much more to say about those when we finally get to experimenting with the ROMs. Sorry about the screen photographs but the default refresh rate does not agree with my VGA capture box.\nThe NSDU is also a single XCOFF binary. When it starts up it prints a summary of installed hardware and the results from initial POST. It has detected all RAM is parity, detected the CPU speed and internal L1, detected the external L2, detected both power supplies, and correctly shows installed RAM, no PCI cards, and most of the sensors. The only one that's wrong is the Drive Fan reads "Off" but that's because I hadn't remembered to reconnect the disconnected SCSI bus cable to the backplane. We'll now run the complete system test (option 3).\nThe tests scroll up on the screen, here showing the two internal SCSI controllers and the LCD. The video chip also gets exercised for conformance with various test displays.\nIn the end, we have a clean bill of health, both on the screen ...\n... and on the LCD. There's one more thing left to do to certify operation: a test boot of AIX from the CD.\nANS AIX, codenamed Harpoon, is specific to the Apple Network Server — you can't use a regular AIX CD, and installing Base Operating System packages from such a CD is likely to corrupt your install (don't ask me how I know this). Most systems shipped with this CD in the accessory pack, version 4.1.4.1. 4.1.2 was used on preproduction servers but I've never seen it myself. Apple later issued version 4.1.5, which fixed many bugs and is strongly recommended.\nBooting from the CD.\nThe LCD is live during an AIX boot, showing the march of AIX bootloader codes. They are the same codes as most IBM servers of this era.\nFinally, the AIX kernel comes up, asking to define the system console. This proves our hardware (and CD-ROM) both work and that its native AIX can start, which means any weird behaviour after this point is more likely than not due to what we're testing.\nWe're finally ready to begin. Let's enumerate the currently known Network Server ROMs. In these pre-Open Firmware 3 ROMs, the ROM version and the Open Firmware version are the same. For comparison purposes, PCI Power Macs of this era were typically 1.0.5.\nPre-production ROMs. Currently one version is known, 1.1.20.1. These were used to boot Mac OS and AIX (and possibly another operating system I'll mention), but the internal video and SCSI controllers are not supported in Mac OS. This was the version that turned out to be on my flash DIMM.\nProduction ROMs. Currently one version is known, 1.1.22. These only boot AIX, though systems with these ROMs can also boot NetBSD and certain Linux distributions. I won't talk further about that in this article, but if I were to use a non-AIX operating system on a production ANS, it would almost certainly be NetBSD even though it doesn't currently support internal video or the on-board Ethernet.\nPrototype Mac OS ROMs. Currently one version is known, 2.0. These contain ROM drivers for the internal video and SCSI controllers, and are the only known ROMs to fully support all internal devices in Mac OS. This is not currently in my possession — though I'd love to get one! — but at least one person has created replica ROMs from a dump graciously made available by their owner, and then used them to successfully boot their own machine.\nPrototype Windows NT ROMs. These ROMs also appear to be required for multiprocessor support. Currently three versions are known, 2.26b6, 2.26b8 (not dumped, referred to on the LinuxPPC-ANS list) and 2.26NT, with relatively small changes between them.\nThese ROMs differ primarily in what operating systems they will boot (and, underlyingly, features they add or remove) and devices they contain internal support for. Those differences can be glimpsed by looking at the Forth words the ROM defines and the packages (implemented as pseudo-devices) they carry. For example, here are the packages and devices in this 700 with the production 1.1.22 ROM. The exact addresses are irrelevant for our purposes here except for the addresses of the Bandit PCI bridges, the Hammerhead memory controller and the Toolbox ROM, which are fixed.\ndisk2:aix - Hacker News 精选博客</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#hands-on-with-two-apple-network-server-prototype-romsnn-httpsoldvcrblogspotcomn-httpsoldvcrblogspotcom202601hands-on-with-two-apple-network-serverhtmln-2026-01-25t000300000-0800nn-nngrateful-acknowledgement-made-to-the-several-former-apple-employees-who-materially-contributed-to-this-entry-this-article-wouldnt-have-been-possible-without-younheres-why-i-need-to-do-inventory-more-oftennthis-is-an-apple-prototype-rom-i-am-ashamed-to-admit-i-found-in-my-own-box-of-junk-from-various-apple-network-server-parts-someone-at-apple-austin-sent-me-in-2003-the-1996-apple-network-server-is-one-of-apples-more-noteworthy-white-elephants-and-to-date-the-last-non-macintosh-computer-ios-devices-notwithstanding-to-come-from-cupertino-best-known-for-being-about-the-size-of-a-generous-dorm-fridge-and-officially-only-running-aix-41-ibms-proprietary-unix-for-power-isanits-complicated-historynis-a-microcosm-of-some-of-apples-strangest-days-during-the-mid-1990s-at-10000-a-pop-in-2026-dollars-over-20700-not-counting-the-aix-license-they-sold-poorly-and-were-among-the-first-products-on-the-chopping-block-when-steve-jobs-returned-in-1997nstockholmn-my-own-apple-network-server-500-was-a-castoff-i-got-in-1998-practically-new-when-the-university-bookstores-vendor-wouldnt-support-the-hardware-and-it-got-surplused-it-was-the-first-unix-server-i-ever-owned-personally-over-the-years-i-ended-up-installing-nearly-every-available-upgrade-and-it-ran-floodgapcom-just-about-nonstop-until-i-replaced-it-with-a-power6-in-2012-for-which-it-still-functions-as-an-emergency-reserve-plus-as-the-university-was-still-running-rs6000-systems-back-then-i-had-ready-access-to-tons-of-aix-software-which-the-ans-ran-flawlessly-it-remains-one-of-the-jewels-of-my-collectionnso-whennthe-mythical-ans-macos-rom-finally-surfacedn-i-wasnveryninterested-there-had-always-been-interest-in-getting-the-ans-to-run-macos-back-in-the-day-i-remember-wasting-an-afternoon-trying-with-a-mac-os-8-cd-and-it-was-a-poorly-kept-secret-that-at-various-points-in-its-development-it-could-given-its-hardware-basis-as-a-heavily-modified-power-macintosh-9500-apple-itself-perceived-this-interest-even-demonstrating-it-with-mac-os-prior-to-its-release-and-leading-then-cto-ellen-hancock-to-later-announce-that-the-ans-would-get-rom-upgrades-to-allow-it-to-run-both-regular-mac-os-and-in-a-shock-to-the-industry-windows-nt-this-would-have-made-the-ans-the-first-and-only-apple-machine-ever-sold-to-support-itnwell-guess-what-this-isnthatnpre-production-rom-apple-originally-used-to-demonstrate-mac-os-and-another-individual-has-stepped-up-with-the-nt-roms-which-are-also-now-in-my-possession-however-at-that-time-it-wasnt-clear-what-the-prototype-rom-stick-was-just-a-whole-bunch-of-flash-chips-on-a-power-mac-rom-dimm-which-my-apple-contacts-tell-me-was-used-to-develop-many-other-machines-at-the-time-and-there-was-no-way-i-was-sticking-it-into-my-beloved-production-500-but-we-have-a-solution-for-that-network-servers-came-in-three-sizes-the-rackmount-ans-300-deep-dish-which-was-never-released-except-for-a-small-number-of-prototypes-the-baseline-ans-500-shiner-le-and-the-highest-tier-ans-700-shiner-he-which-added-more-drive-bays-and-redundant-hot-swappable-power-suppliesnwhich-brings-us-tonthisnmachinenmeetnholmstockn-my-network-server-700-and-the-second-ans-in-my-collection-the-third-is-my-non-functionalnshiner-esb-prototypen-this-was-a-ship-of-theseus-that-my-friend-cb-and-i-assembled-out-of-two-partially-working-but-rather-thrashed-700s-we-got-for-come-and-get-them-in-august-2003-it-served-asnstockholmns-body-double-for-a-number-of-years-untilnstockholmnwas-retired-andnholmstocknwent-into-cold-storage-as-a-holding-bay-for-spare-parts-this-makes-it-the-perfect-system-to-try-a-dodgy-rom-innill-give-you-a-spoiler-now-it-turns-out-the-nt-rom-isnt-enough-to-install-windows-nt-by-itself-even-though-it-has-some-interesting-attributes-sadly-this-was-not-unexpected-but-the-pre-production-rom-does-work-to-boot-mac-os-albeit-with-apparent-bugs-and-an-injection-of-extra-hardware-lets-get-the-700-running-again-call-it-a-refurb-weekend-and-show-the-processnthe-700-weighs-around-85-pounds-unloaded-and-is-exactly-like-trying-to-cram-a-refrigerator-into-the-backseat-of-your-car-in-this-case-my-honda-civic-si-while-it-does-have-wheels-on-the-bottom-even-the-good-ones-dont-have-a-great-turning-radius-and-these-arent-good-and-getting-it-in-and-out-of-the-car-unavoidably-means-having-to-pick-it-up-lift-with-your-knees-not-with-your-backnpreparing-the-700-for-testingnthis-section-is-basically-a-cloaked-refurb-weekend-but-even-if-youre-familiar-with-ans-guts-im-going-to-point-out-a-few-specific-things-relevant-to-rom-support-as-we-go-along-we-want-this-machine-as-ship-shape-as-we-can-get-it-so-that-accurate-observations-can-be-made-for-posterityni-would-also-like-to-thank-my-wife-who-chose-to-politely-ignore-the-new-noisy-beast-hulking-in-the-living-room-for-a-few-daysncontinuing-in-the-fridge-motif-the-500-and-700-have-a-front-keylock-controlling-a-sliding-door-along-with-a-unique-4-line-lcd-which-displays-boot-information-and-can-be-used-as-an-output-device-in-aix-and-other-operating-systems-unlike-my-very-minimally-yellowed-500-which-has-spent-most-of-its-life-in-quiet-smoke-free-server-rooms-this-one-seemed-to-have-gotten-a-bit-more-sun-fortunately-most-of-the-chassis-is-painted-metal-which-is-also-where-most-of-the-weight-comes-from-the-keylock-position-on-power-up-is-noted-by-the-firmware-the-leftmost-is-the-service-setting-the-middle-is-a-normal-boot-and-the-rightmost-locked-position-puts-the-machine-into-a-power-failsafe-modenthe-sliding-door-covers-seven-front-drive-bays-normally-one-with-a-cd-rom-one-with-some-sort-of-tape-drive-typically-a-datdds-drive-but-a-few-have-8mm-tape-instead-both-the-same-drives-as-sold-for-the-workgroup-server-95-and-9150-and-the-rest-various-hard-drives-which-can-be-either-independent-or-connected-into-an-optional-raid-the-700-can-take-two-more-drives-in-a-rear-bracket-although-i-have-the-raid-card-i-never-ended-up-installing-it-since-a-single-drive-was-more-than-sufficient-for-what-i-was-using-it-for-as-most-of-the-drive-trays-and-both-drive-brackets-had-been-removed-from-the-two-donor-700s-used-to-assemblenholmstockn-i-ended-up-just-keeping-a-cd-rom-and-two-trays-and-used-the-other-open-space-for-storagenat-the-top-are-the-nmi-reset-and-power-buttons-plus-a-standard-mac-floppy-drivenit-is-worth-noting-here-that-the-internal-bays-are-all-serviced-by-two-symbios-logic-53c825a-controllers-providing-two-fast-wide-scsi-busses-running-at-20mbs-unlike-the-typical-power-mac-mesh-10mbs-controller-the-ans-internal-scsi-controllers-are-unique-to-the-ans-and-appear-in-no-other-apple-product-remember-this-for-later-a-second-external-scsi-bus-is-available-on-the-rear-using-the-same-slower-5mbs-curio-scsiethernetserial-combo-chip-as-other-contemporary-power-macs-and-implementing-an-ncr-53c94nthe-rear-with-the-monitor-power-cable-photobombing-the-shot-is-much-less-yellowed-ports-are-here-for-audio-in-and-out-standardnawacsn-adb-two-beige-mac-minidin-8-serial-ports-vga-oddly-but-happily-a-conventional-hdi-15-not-apples-traditional-da-15-aaui-10mbit-ethernet-any-aaui-mac-dongle-will-work-and-the-external-scsi-bus-db-25-six-pci-slots-are-available-a-second-keylock-secures-the-logic-board-which-is-on-a-slide-out-drawer-accessed-with-the-two-handles-both-rear-panels-have-their-own-fans-which-are-hot-swappable-as-well-apple-included-a-monitor-dongle-in-the-boxnit-is-also-worth-noting-here-that-the-onboard-video-is-a-cirrus-logic-54m30-also-unique-to-the-ans-and-likewise-also-used-in-no-other-apple-product-well-be-coming-back-to-this-point-toonparenthetically-here-are-the-keylocks-new-replacements-in-my-part-box-they-are-wafer-lock-keys-of-the-same-type-used-in-the-quadra-950-apple-workgroup-server-95-and-workgroup-server-9150-as-sold-network-servers-came-with-three-keys-one-front-one-back-and-one-spare-but-they-are-all-interchangeable-these-keys-have-a-small-three-digit-code-engraved-into-the-metal-identifying-the-lock-they-are-designed-to-fitni-also-got-out-a-lot-of-parts-from-storage-just-in-case-they-were-needed-some-of-which-were-in-the-700-and-some-of-which-were-separate-besides-my-two-boxes-of-tricks-i-also-pulled-out-a-spare-logic-board-five-boxes-of-ram-upgrade-kits-these-are-only-16mb-each-though-so-this-isnt-as-much-memory-as-youd-think-a-200mhz-cpu-upgrade-kit-several-more-loose-cpus-i-also-have-and-a-raid-card-just-for-funni-dimly-recalled-the-machine-may-not-have-been-working-right-when-i-committed-it-to-storage-but-well-proceed-as-if-it-had-been-starting-with-a-visual-inspection-of-the-electronicsnthe-keylock-on-the-logic-board-drawer-shown-here-with-the-rear-panel-off-so-you-can-see-how-it-operates-has-just-two-positions-in-the-horizontal-locked-position-the-board-is-connected-to-power-and-a-metal-tab-prevents-the-drawer-from-coming-out-in-the-vertical-unlocked-position-the-board-is-disconnected-and-the-tab-is-moved-away-from-the-chassis-so-the-drawer-can-be-pulled-free-we-turn-the-rear-key-grab-the-handles-and-pull-the-board-drawer-outnthis-is-the-logic-board-the-spare-in-the-bag-it-has-a-broadly-similar-layout-to-other-six-slot-power-macs-and-has-many-of-the-same-chips-including-a-grand-central-labeled-io-cntrl-near-the-cirrus-logic-video-asic-curio-labeled-scsienet-and-two-bandits-labeled-as-pci-bridges-however-it-only-has-eight-ram-dimm-slots-instead-of-the-9500s-twelve-and-most-of-the-system-connections-are-consolidated-into-a-single-card-edge-at-the-top-and-a-large-power-connector-at-the-bottom-there-are-separate-slots-for-the-rom-dimm-the-cpu-daughtercard-and-the-l2-cache-headers-handle-both-internal-scsi-busses-the-mainboard-fan-and-the-rear-keylock-a-small-red-cuda-reset-button-is-at-the-top-leftninstalled-the-board-sits-in-front-of-the-mainboard-fan-which-is-primarily-used-to-cool-the-cpu-daughtercard-this-daughtercard-rides-in-plastic-rails-that-serve-as-alignment-guides-and-structural-support-tabs-and-a-couple-mounting-screws-hold-the-logic-board-in-place-in-the-drawer-the-tabs-card-rails-and-much-of-the-drawer-itself-are-unfortunately-made-from-amelioplastic-but-this-drawer-is-thick-and-not-normally-exposed-to-the-exterior-and-it-mercifully-remains-in-good-physical-condition-note-that-when-the-drawer-is-open-the-board-is-completely-ungrounded-so-only-handle-it-with-antistatic-precautionsni-never-store-machines-with-their-pram-batteries-installed-especially-since-my-shiner-esb-prototype-had-been-ruined-by-the-previous-owner-doing-so-during-which-time-it-leaked-and-corroded-the-logic-board-but-in-this-particular-case-since-we-will-be-messing-with-the-system-it-is-easier-to-reset-the-logic-board-if-we-never-install-the-battery-at-all-with-the-machine-unplugged-the-battery-out-and-the-rear-key-unlocked-horizontal-the-board-will-be-completely-depowered-and-will-reset-in-about-three-minutes-or-sonthe-cpu-card-is-much-larger-than-the-ones-used-in-most-other-pci-power-macs-and-was-intended-to-accommodate-a-dual-processor-smp-option-which-was-never-sold-though-again-some-prototypes-have-escaped-i-would-love-to-get-one-unfortunately-this-means-that-power-mac-cpu-cards-cant-upgrade-an-ans-and-the-highest-speed-option-is-the-200mhz-604e-card-shown-here-but-any-ans-cpu-card-will-work-in-any-ans-sonstockholmnalso-has-a-200mhz-card-bus-speed-and-cpu-speed-are-related-the-132mhz-base-500-and-176mhz-604-cards-run-the-bus-at-44mhz-but-the-150mhz-604-base-700-and-200mhz-604e-cards-run-the-bus-at-50mhznat-the-top-is-the-700s-standard-1mb-l2-cache-the-500-came-with-512k-these-are-allegedly-regular-power-mac-caches-and-a-network-server-1mb-cache-should-work-in-other-power-macs-but-the-500-kernel-panicked-with-a-sonnet-l2-cache-upgrade-and-i-eventually-had-to-chase-down-a-1mb-card-pulled-from-another-700nbehind-that-is-the-rom-stick-and-the-centrepiece-of-this-article-they-are-not-always-labeled-one-of-my-spares-isnt-but-when-they-are-the-standard-production-rom-is-part-341-0833-it-is-a-regular-4mb-rom-like-other-old-world-macs-were-going-to-test-this-machine-with-that-before-we-go-installing-the-othersnto-get-a-test-report-will-require-a-minimum-amount-of-ram-the-ans-uses-the-same-168-pin-dimms-as-other-power-macs-and-can-accept-up-to-512mb-anything-greater-is-not-supported-by-the-memory-controller-but-uniquely-needs-60nsnparitynram-for-highest-performance-ifnanyndimm-is-not-parity-then-the-system-rom-disables-parity-fornallndimmsnandnsets-the-timing-to-70ns-even-if-the-ram-is-faster-this-is-a-non-trivial-hit-especially-at-the-fastest-50mhz-bus-speed-so-you-really-want-parity-if-you-can-get-it-here-im-using-parity-fpm-which-was-sold-standard-in-the-units-all-units-came-with-at-least-32mb-in-two-16mb-dimms-and-in-upgrade-kits-16mb-in-two-8mb-dimms-all-manufactured-by-ibm-as-oem-under-contract-and-sold-at-typically-exorbitant-apple-pricesnlater-on-64mb-and-128mb-parity-dimms-became-available-andnstockholmnhas-a-full-512mb-from-eight-64mb-parity-sticks-ram-need-not-be-installed-in-pairs-though-this-is-preferred-as-the-ans-supports-interleaving-while-edo-ram-should-just-work-treated-as-fpm-ive-never-tried-parity-edo-in-an-ans-well-put-in-two-ibm-16mb-parity-fpm-dimms-to-equal-the-base-32mbnwith-the-drawer-closed-and-the-rear-key-locked-we-plug-in-the-server-no-drives-attached-yet-turn-the-front-key-to-service-and-then-press-the-front-power-button-to-get-a-mostly-blank-front-lcd-instead-of-startup-messagesnhaving-worked-with-these-beasts-for-decades-this-appearance-a-backlit-lcd-with-a-mostly-blank-or-dark-block-display-almost-certainly-indicates-a-problem-with-the-processor-card-because-enough-of-the-logic-board-is-working-to-power-on-the-front-panel-but-the-cpu-isnt-running-typically-this-is-because-the-processor-wormed-itself-out-of-the-board-and-needs-to-be-reseated-but-you-can-also-get-something-like-this-if-the-card-went-bad-and-less-commonly-if-the-rom-stick-isnt-installed-correctlynhowever-moving-the-monitor-cord-out-of-the-way-we-have-a-problem-we-cant-get-the-drawer-to-open-wide-enough-to-pull-out-and-reseat-the-cpu-card-well-have-to-take-the-drawer-offnas-usual-removing-the-drawer-is-relatively-easy-its-getting-it-back-on-thats-the-trick-two-plastic-latches-on-the-underside-of-the-drawer-fortunately-still-also-in-good-nick-slip-into-two-gaps-in-the-metal-slide-rails-supporting-the-drawer-with-your-other-hand-so-it-doesnt-fall-off-push-each-latch-in-and-push-back-the-rail-to-disengage-itnthe-drawer-then-lifts-off-and-can-be-put-aside-preferably-onto-an-antistatic-matnheres-the-inside-where-the-logic-board-connects-the-powerplane-connector-is-at-the-bottom-the-board-at-the-top-is-the-right-half-of-the-mezzanine-codenamed-hendy-with-the-slot-for-the-logic-boards-card-edge-and-a-connector-for-the-front-panelnthe-mezz-is-a-horseshoe-that-straddles-both-sides-better-shown-here-with-the-top-off-the-other-side-has-connectors-for-the-nmi-and-reset-buttons-floppy-drive-and-scsi-bussesnthose-bus-connectors-come-from-the-scsi-backplane-on-the-other-side-here-with-that-panel-off-which-can-now-be-removed-because-the-drawer-is-out-both-the-front-and-in-the-700-the-rear-drive-connectors-hook-up-here-id-forgotten-id-disconnected-bus-1-when-i-stored-it-so-i-later-reconnected-the-cable-to-j11-before-closing-this-back-up-if-you-dont-do-this-besides-drives-not-working-you-may-get-spurious-errors-warning-that-the-drive-fan-failed-or-is-not-present-see-later-onnthe-problem-with-the-sliding-rails-turned-out-to-be-two-fold-first-some-stuck-broken-pieces-of-plastic-which-i-removed-and-second-whatever-lubricant-apple-had-used-which-over-the-decades-had-desiccated-into-gluey-copper-coloured-gunk-i-cleaned-off-most-of-the-ick-and-then-used-wd-40-white-lithium-not-regular-wd-40-on-the-rails-and-worked-it-back-and-forth-into-the-bearings-if-its-good-enough-for-your-garage-door-opener-its-good-enough-for-your-unusual-apple-servernafter-about-ten-minutes-of-spraying-and-sliding-both-rails-now-move-smoothly-and-reach-their-maximum-extents-i-was-very-careful-to-wipe-off-any-excess-so-there-wouldnt-be-a-mess-laternnow-to-remount-the-drawer-this-is-not-well-explained-in-the-official-apple-service-manual-so-ill-be-more-explicit-here-on-each-slide-are-two-small-metal-hooks-if-you-dont-see-the-hooks-pull-the-slides-forward-until-you-donon-each-slide-one-of-the-hooks-goes-into-a-metal-notch-on-the-two-metal-rails-mounted-on-the-back-of-the-drawer-on-the-top-slide-the-bottom-hook-engages-on-the-bottom-slide-the-top-one-doesnonce-youve-done-that-then-while-using-one-hand-to-support-the-drawer-pull-each-slide-forward-until-it-engages-with-each-of-the-black-latches-it-will-click-into-positionnnow-we-can-pull-the-drawer-all-the-way-out-pull-out-the-200mhz-card-and-try-to-reseat-it-using-the-card-guides-you-shouldnt-need-to-force-it-in-though-it-does-need-a-bit-of-grunt-to-ensure-both-rows-of-contacts-get-into-the-slotnclosing-the-drawer-likewise-doesnt-require-forcenper-sen-but-the-rear-keylock-will-not-turn-unless-you-have-the-board-fully-engaged-with-the-mezz-and-powerplane-there-are-thumbscrews-but-they-dont-really-make-much-difference-for-this-sometimes-you-have-to-slam-it-in-a-couple-times-making-sure-the-thumbscrews-are-completely-loosened-and-out-so-that-they-dont-get-in-the-way-when-the-logic-board-is-properly-engaged-and-the-drawer-is-fully-closed-it-should-be-easy-to-turn-the-rear-keynunfortunately-reseating-the-processor-card-didnt-fix-it-so-the-next-step-is-to-try-a-different-onenim-saving-the-other-200mhz-card-as-a-spare-fornstockholmn-but-we-have-several-150mhz-cards-so-i-selected-one-of-thosenand-it-starts-up-we-have-messages-on-the-lcd-showing-the-150mhz-604-with-50mhz-bus-32mb-of-parity-ram-and-1mb-of-l2-cache-were-all-properly-detected-the-reported-rom-version-of-1122-is-consistent-with-production-roms-as-shipped-if-you-connect-to-port-2-on-the-rear-at-9600bps-during-post-you-may-see-additional-messagesnsince-the-front-key-is-in-the-service-position-it-goes-into-a-service-boot-first-trying-the-cd-looking-for-a-bootloader-and-then-looking-for-the-filendiagsnon-a-floppy-disk-we-have-provided-the-machine-with-neither-and-nothing-else-is-available-so-the-server-drops-to-an-open-firmware-promptnopen-firmware-is-the-boot-environment-for-all-power-macs-starting-with-the-first-beige-pci-systems-originating-at-sun-as-openboot-open-firmware-provides-an-interactive-forth-interpreter-which-is-used-for-interpreting-cross-platform-fcode-bytecode-in-device-roms-but-can-also-be-used-for-development-and-makes-available-a-built-in-means-of-managing-and-storing-settings-for-installed-hardware-in-macs-of-this-generation-it-was-generally-invisible-to-the-user-except-if-specifically-enabled-or-requested-remember-this-for-later-as-well-and-the-apple-network-server-was-the-earliest-power-mac-well-derived-anyway-system-where-open-firmware-was-explicitly-user-facing-open-firmware-survives-today-largely-in-the-form-ofnopenbiosnnthendiagsnfile-in-question-could-be-theorically-any-xcoff-binary-but-its-specifically-looking-for-this-the-network-server-diagnostic-utility-this-came-on-a-floppy-disk-in-the-ans-accessory-pack-well-use-the-nsdu-to-check-the-rest-of-our-configurationnwe-could-reboot-the-server-but-we-can-just-start-it-from-the-open-firmware-prompt-directly-withnboot-fddiagsn-you-can-also-see-some-of-the-systems-current-open-firmware-environment-variables-well-have-much-more-to-say-about-those-when-we-finally-get-to-experimenting-with-the-roms-sorry-about-the-screen-photographs-but-the-default-refresh-rate-does-not-agree-with-my-vga-capture-boxnthe-nsdu-is-also-a-single-xcoff-binary-when-it-starts-up-it-prints-a-summary-of-installed-hardware-and-the-results-from-initial-post-it-has-detected-all-ram-is-parity-detected-the-cpu-speed-and-internal-l1-detected-the-external-l2-detected-both-power-supplies-and-correctly-shows-installed-ram-no-pci-cards-and-most-of-the-sensors-the-only-one-thats-wrong-is-the-drive-fan-reads-off-but-thats-because-i-hadnt-remembered-to-reconnect-the-disconnected-scsi-bus-cable-to-the-backplane-well-now-run-the-complete-system-test-option-3nthe-tests-scroll-up-on-the-screen-here-showing-the-two-internal-scsi-controllers-and-the-lcd-the-video-chip-also-gets-exercised-for-conformance-with-various-test-displaysnin-the-end-we-have-a-clean-bill-of-health-both-on-the-screen-n-and-on-the-lcd-theres-one-more-thing-left-to-do-to-certify-operation-a-test-boot-of-aix-from-the-cdnans-aix-codenamed-harpoon-is-specific-to-the-apple-network-server-you-cant-use-a-regular-aix-cd-and-installing-base-operating-system-packages-from-such-a-cd-is-likely-to-corrupt-your-install-dont-ask-me-how-i-know-this-most-systems-shipped-with-this-cd-in-the-accessory-pack-version-4141-412-was-used-on-preproduction-servers-but-ive-never-seen-it-myself-apple-later-issued-version-415-which-fixed-many-bugs-and-is-strongly-recommendednbooting-from-the-cdnthe-lcd-is-live-during-an-aix-boot-showing-the-march-of-aix-bootloader-codes-they-are-the-same-codes-as-most-ibm-servers-of-this-eranfinally-the-aix-kernel-comes-up-asking-to-define-the-system-console-this-proves-our-hardware-and-cd-rom-both-work-and-that-its-native-aix-can-start-which-means-any-weird-behaviour-after-this-point-is-more-likely-than-not-due-to-what-were-testingnwere-finally-ready-to-begin-lets-enumerate-the-currently-known-network-server-roms-in-these-pre-open-firmware-3-roms-the-rom-version-and-the-open-firmware-version-are-the-same-for-comparison-purposes-pci-power-macs-of-this-era-were-typically-105npre-production-roms-currently-one-version-is-known-11201-these-were-used-to-boot-mac-os-and-aix-and-possibly-another-operating-system-ill-mention-but-the-internal-video-and-scsi-controllers-are-not-supported-in-mac-os-this-was-the-version-that-turned-out-to-be-on-my-flash-dimmnproduction-roms-currently-one-version-is-known-1122-these-only-boot-aix-though-systems-with-these-roms-can-also-boot-netbsd-and-certain-linux-distributions-i-wont-talk-further-about-that-in-this-article-but-if-i-were-to-use-a-non-aix-operating-system-on-a-production-ans-it-would-almost-certainly-be-netbsd-even-though-it-doesnt-currently-support-internal-video-or-the-on-board-ethernetnprototype-mac-os-roms-currently-one-version-is-known-20-these-contain-rom-drivers-for-the-internal-video-and-scsi-controllers-and-are-the-only-known-roms-to-fully-support-all-internal-devices-in-mac-os-this-is-not-currently-in-my-possession-though-id-love-to-get-one-but-at-least-one-person-has-created-replica-roms-from-a-dump-graciously-made-available-by-their-owner-and-then-used-them-to-successfully-boot-their-own-machinenprototype-windows-nt-roms-these-roms-also-appear-to-be-required-for-multiprocessor-support-currently-three-versions-are-known-226b6-226b8-not-dumped-referred-to-on-the-linuxppc-ans-list-and-226nt-with-relatively-small-changes-between-themnthese-roms-differ-primarily-in-what-operating-systems-they-will-boot-and-underlyingly-features-they-add-or-remove-and-devices-they-contain-internal-support-for-those-differences-can-be-glimpsed-by-looking-at-the-forth-words-the-rom-defines-and-the-packages-implemented-as-pseudo-devices-they-carry-for-example-here-are-the-packages-and-devices-in-this-700-with-the-production-1122-rom-the-exact-addresses-are-irrelevant-for-our-purposes-here-except-for-the-addresses-of-the-bandit-pci-bridges-the-hammerhead-memory-controller-and-the-toolbox-rom-which-are-fixedndisk2aix" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="Hacker News 精选博客" class="md-header__button md-logo" aria-label="Hacker News 精选博客" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Hacker News 精选博客
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Hands-on with two Apple Network Server prototype ROMs\n\n来源: https://oldvcr.blogspot.com\n链接: https://oldvcr.blogspot.com/2026/01/hands-on-with-two-apple-network-server.html\n日期: 2026-01-25T00:03:00.000-08:00\n\n---\n\nGrateful acknowledgement made to the several former Apple employees who materially contributed to this entry. This article wouldn't have been possible without you!\nHere's why I need to do inventory more often.\nThis is an Apple prototype ROM I am ashamed to admit I found in my own box of junk from various Apple Network Server parts someone at Apple Austin sent me in 2003. The 1996 Apple Network Server is one of Apple's more noteworthy white elephants and, to date, the last non-Macintosh computer (iOS devices notwithstanding) to come from Cupertino. Best known for being about the size of a generous dorm fridge and officially only running AIX 4.1, IBM's proprietary Unix for Power ISA,\nits complicated history\nis a microcosm of some of Apple's strangest days during the mid-1990s. At $10,000+ a pop (in 2026 dollars over $20,700), not counting the AIX license, they sold poorly and were among the first products on the chopping block when Steve Jobs returned in 1997.\nstockholm\n, my own Apple Network Server 500, was a castoff I got in 1998 — practically new — when the University bookstore's vendor wouldn't support the hardware and it got surplused. It was the first Unix server I ever owned personally, over the years I ended up installing nearly every available upgrade, and it ran Floodgap.com just about nonstop until I replaced it with a POWER6 in 2012 (for which it still functions as an emergency reserve). Plus, as the University was still running RS/6000 systems back then, I had ready access to tons of AIX software which the ANS ran flawlessly. It remains one of the jewels of my collection.\nSo when\nthe mythical ANS MacOS ROM finally surfaced\n, I was\nvery\ninterested. There had always been interest in getting the ANS to run MacOS back in the day (I remember wasting an afternoon trying with a Mac OS 8 CD) and it was a poorly-kept secret that at various points in its development it could, given its hardware basis as a heavily modified Power Macintosh 9500. Apple itself perceived this interest, even demonstrating it with Mac OS prior to its release, and leading then-CTO Ellen Hancock to later announce that the ANS would get ROM upgrades to allow it to run both regular Mac OS and, in a shock to the industry, Windows NT. This would have made the ANS the first and only Apple machine ever sold to support it.\nWell, guess what. This is\nthat\npre-production ROM Apple originally used to demonstrate Mac OS, and another individual has stepped up with the NT ROMs which are also now in my possession. However, at that time it wasn't clear what the prototype ROM stick was — just a whole bunch of flash chips on a Power Mac ROM DIMM which my Apple contacts tell me was used to develop many other machines at the time — and there was no way I was sticking it into my beloved production 500. But we have a solution for that. Network Servers came in three sizes: the rackmount ANS 300 ("Deep Dish") which was never released except for a small number of prototypes, the baseline ANS 500 ("Shiner LE"), and the highest tier ANS 700 ("Shiner HE") which added more drive bays and redundant, hot-swappable power supplies.\nWhich brings us to\nthis\nmachine.\nMeet\nholmstock\n, my Network Server 700, and the second ANS in my collection (the third is my non-functional\nShiner ESB prototype\n). This was a ship of Theseus that my friend CB and I assembled out of two partially working but rather thrashed 700s we got for "come and get them" in August 2003. It served as\nstockholm\n's body double for a number of years until\nstockholm\nwas retired and\nholmstock\nwent into cold storage as a holding bay for spare parts. This makes it the perfect system to try a dodgy ROM in.\nI'll give you a spoiler now: it turns out the NT ROM isn't enough to install Windows NT by itself, even though it has some interesting attributes. Sadly this was not unexpected. But the pre-production ROM does work to boot Mac OS, albeit with apparent bugs and an injection of extra hardware. Let's get the 700 running again (call it a Refurb Weekend) and show the process.\nThe 700 weighs around 85 pounds unloaded and is exactly like trying to cram a refrigerator into the backseat of your car (in this case my Honda Civic Si). While it does have wheels on the bottom, even the good ones don't have a great turning radius (and these aren't good), and getting it in and out of the car unavoidably means having to pick it up. Lift with your knees, not with your back.\nPreparing the 700 for testing\nThis section is basically a cloaked Refurb Weekend, but even if you're familiar with ANS guts, I'm going to point out a few specific things relevant to ROM support as we go along. We want this machine as ship-shape as we can get it so that accurate observations can be made for posterity!\nI would also like to thank my wife who chose to politely ignore the new noisy beast hulking in the living room for a few days.\nContinuing in the fridge motif, the 500 and 700 have a front keylock controlling a sliding door, along with a unique 4-line LCD which displays boot information and can be used as an output device in AIX and other operating systems. Unlike my very minimally yellowed 500 which has spent most of its life in quiet smoke-free server rooms, this one seemed to have gotten a bit more sun. Fortunately most of the chassis is painted metal which is also where most of the weight comes from. The keylock position on power-up is noted by the firmware; the leftmost is the service setting, the middle is a normal boot, and the rightmost (locked) position puts the machine into a power failsafe mode.\nThe sliding door covers seven front drive bays, normally one with a CD-ROM, one with some sort of tape drive (typically a DAT/DDS drive, but a few have 8mm tape instead, both the same drives as sold for the Workgroup Server 95 and 9150), and the rest various hard drives which can be either independent or connected into an optional RAID. The 700 can take two more drives in a rear bracket. Although I have the RAID card, I never ended up installing it since a single drive was more than sufficient for what I was using it for. As most of the drive trays and both drive brackets had been removed from the two donor 700s used to assemble\nholmstock\n, I ended up just keeping a CD-ROM and two trays, and used the other open space for storage.\nAt the top are the NMI, reset and power buttons, plus a standard Mac floppy drive.\nIt is worth noting here that the internal bays are all serviced by two Symbios Logic 53C825A controllers, providing two Fast Wide SCSI busses running at 20MB/s. Unlike the typical Power Mac MESH (10MB/s) controller, the ANS internal SCSI controllers are unique to the ANS and appear in no other Apple product. Remember this for later. A second external SCSI bus is available on the rear, using the same (slower 5MB/s) CURIO SCSI/Ethernet/serial combo chip as other contemporary Power Macs and implementing an NCR 53C94.\nThe rear (with the monitor power cable photobombing the shot) is much less yellowed. Ports are here for audio in and out (standard\nAWACS\n), ADB, two beige Mac MiniDIN-8 serial ports, VGA (oddly but happily a conventional HDI-15, not Apple's traditional DA-15), AAUI 10Mbit Ethernet (any AAUI Mac dongle will work), and the external SCSI bus DB-25. Six PCI slots are available. A second keylock secures the logic board which is on a slide-out drawer accessed with the two handles. Both rear panels have their own fans which are hot-swappable as well. Apple included a monitor dongle in the box.\nIt is also worth noting here that the onboard video is a Cirrus Logic 54M30, also unique to the ANS, and likewise also used in no other Apple product. We'll be coming back to this point too.\nParenthetically, here are the keylocks (new replacements in my part box). They are wafer-lock keys of the same type used in the Quadra 950, Apple Workgroup Server 95 and Workgroup Server 9150. As sold Network Servers came with three keys, one front, one back and one spare, but they are all interchangeable. These keys have a small three-digit code engraved into the metal identifying the lock they are designed to fit.\nI also got out a lot of parts from storage just in case they were needed, some of which were in the 700 and some of which were separate. Besides my two boxes of tricks, I also pulled out a spare logic board, five boxes of RAM upgrade kits (these are only 16MB each, though, so this isn't as much memory as you'd think), a 200MHz CPU upgrade kit, several more loose CPUs I also have, and a RAID card just for fun.\nI dimly recalled the machine may not have been working right when I committed it to storage, but we'll proceed as if it had been, starting with a visual inspection of the electronics.\nThe keylock on the logic board drawer (shown here with the rear panel off so you can see how it operates) has just two positions. In the horizontal locked position, the board is connected to power and a metal tab prevents the drawer from coming out. In the vertical unlocked position, the board is disconnected and the tab is moved away from the chassis so the drawer can be pulled free. We turn the rear key, grab the handles and pull the board drawer out.\nThis is the logic board (the spare in the bag). It has a broadly similar layout to other six-slot Power Macs and has many of the same chips, including a Grand Central (labeled I/O CNTRL, near the Cirrus Logic video ASIC), CURIO (labeled SCSI/ENET) and two Bandits (labeled as PCI BRIDGEs). However, it only has eight RAM DIMM slots instead of the 9500's twelve, and most of the system connections are consolidated into a single card edge at the top and a large power connector at the bottom. There are separate slots for the ROM DIMM, the CPU daughtercard and the L2 cache. Headers handle both internal SCSI busses, the mainboard fan and the rear keylock. A small red CUDA reset button is at the top left.\nInstalled, the board sits in front of the mainboard fan which is primarily used to cool the CPU daughtercard. This daughtercard rides in plastic rails that serve as alignment guides and structural support. Tabs and a couple mounting screws hold the logic board in place in the drawer. The tabs, card rails and much of the drawer itself are unfortunately made from Amelioplastic, but this drawer is thick and not normally exposed to the exterior, and it mercifully remains in good physical condition. Note that when the drawer is open, the board is completely ungrounded, so only handle it with antistatic precautions.\nI never store machines with their PRAM batteries installed (especially since my Shiner ESB prototype had been ruined by the previous owner doing so, during which time it leaked and corroded the logic board), but in this particular case since we will be messing with the system it is easier to reset the logic board if we never install the battery at all. With the machine unplugged, the battery out and the rear key unlocked (horizontal), the board will be completely depowered and will reset in about three minutes or so.\nThe CPU card is much larger than the ones used in most other PCI Power Macs and was intended to accommodate a dual-processor SMP option which was never sold, though again some prototypes have escaped (I would love to get one). Unfortunately this means that Power Mac CPU cards can't upgrade an ANS and the highest-speed option is the 200MHz 604e card shown here, but any ANS CPU card will work in any ANS, so\nstockholm\nalso has a 200MHz card. Bus speed and CPU speed are related: the 132MHz (base 500) and 176MHz 604 cards run the bus at 44MHz, but the 150MHz 604 (base 700) and 200MHz 604e cards run the bus at 50MHz.\nAt the top is the 700's standard 1MB L2 cache (the 500 came with 512K). These are allegedly regular Power Mac caches, and a Network Server 1MB cache should work in other Power Macs, but the 500 kernel-panicked with a Sonnet L2 cache upgrade and I eventually had to chase down a 1MB card pulled from another 700.\nBehind that is the ROM stick and the centrepiece of this article. They are not always labeled — one of my spares isn't — but when they are, the standard production ROM is part 341-0833. It is a regular 4MB ROM like other Old World Macs. We're going to test this machine with that before we go installing the others.\nTo get a test report will require a minimum amount of RAM. The ANS uses the same 168-pin DIMMs as other Power Macs and can accept up to 512MB (anything greater is not supported by the memory controller), but uniquely needs 60ns\nparity\nRAM for highest performance. If\nany\nDIMM is not parity, then the system ROM disables parity for\nall\nDIMMs\nand\nsets the timing to 70ns, even if the RAM is faster. This is a non-trivial hit, especially at the fastest 50MHz bus speed, so you really want parity if you can get it. Here I'm using parity FPM, which was sold standard in the units (all units came with at least 32MB in two 16MB DIMMs) and in upgrade kits (16MB in two 8MB DIMMs), all manufactured by IBM as OEM under contract and sold at typically exorbitant Apple prices.\nLater on 64MB and 128MB parity DIMMs became available and\nstockholm\nhas a full 512MB from eight 64MB parity sticks. RAM need not be installed in pairs, though this is preferred as the ANS supports interleaving. While EDO RAM should "just work" (treated as FPM), I've never tried parity EDO in an ANS. We'll put in two IBM 16MB parity FPM DIMMs to equal the base 32MB.\nWith the drawer closed and the rear key locked, we plug in the server (no drives attached yet), turn the front key to service, and then press the front power button to get ... a mostly blank front LCD instead of startup messages.\nHaving worked with these beasts for decades, this appearance — a backlit LCD with a mostly blank or dark block display — almost certainly indicates a problem with the processor card, because enough of the logic board is working to power on the front panel but the CPU isn't running. Typically this is because the processor wormed itself out of the board and needs to be reseated, but you can also get something like this if the card went bad, and less commonly if the ROM stick isn't installed correctly.\nHowever (moving the monitor cord out of the way), we have a problem: we can't get the drawer to open wide enough to pull out and reseat the CPU card. We'll have to take the drawer off.\nAs usual, removing the drawer is relatively easy (it's getting it back on that's the trick). Two plastic latches on the underside of the drawer, fortunately still also in good nick, slip into two gaps in the metal slide rails. Supporting the drawer with your other hand so it doesn't fall off, push each latch in and push back the rail to disengage it.\nThe drawer then lifts off and can be put aside, preferably onto an antistatic mat.\nHere's the inside, where the logic board connects. The powerplane connector is at the bottom. The board at the top is the right half of the mezzanine (codenamed "HENDY"), with the slot for the logic board's card edge and a connector for the front panel.\nThe mezz is a "horseshoe" that straddles both sides, better shown here with the top off. The other side has connectors for the NMI and reset buttons, floppy drive and SCSI busses.\nThose bus connectors come from the SCSI backplane on the other side, here with that panel off (which can now be removed because the drawer is out). Both the front (and in the 700, the rear) drive connectors hook up here. I'd forgotten I'd disconnected bus 1 when I stored it, so I later reconnected the cable to J11 before closing this back up. If you don't do this, besides drives not working, you may get spurious errors warning that the drive fan failed or is not present (see later on).\nThe problem with the sliding rails turned out to be two-fold, first some stuck broken pieces of plastic which I removed, and second whatever lubricant Apple had used which over the decades had desiccated into gluey, copper-coloured gunk. I cleaned off most of the ick and then used WD-40 white lithium (not regular WD-40) on the rails and worked it back and forth into the bearings. If it's good enough for your garage door opener, it's good enough for your unusual Apple server.\nAfter about ten minutes of spraying and sliding, both rails now move smoothly and reach their maximum extents. I was very careful to wipe off any excess so there wouldn't be a mess later.\nNow to remount the drawer. This is not well-explained in the official Apple service manual, so I'll be more explicit here. On each slide are two small metal hooks. If you don't see the hooks, pull the slides forward until you do.\nOn each slide, one of the hooks goes into a metal notch on the two metal rails mounted on the back of the drawer. On the top slide, the bottom hook engages; on the bottom slide, the top one does.\nOnce you've done that, then while using one hand to support the drawer, pull each slide forward until it engages with each of the black latches (it will click into position).\nNow we can pull the drawer all the way out, pull out the 200MHz card and try to reseat it using the card guides. You shouldn't need to force it in, though it does need a bit of grunt to ensure both rows of contacts get into the slot.\nClosing the drawer likewise doesn't require force\nper se\n, but the rear keylock will not turn unless you have the board fully engaged with the mezz and powerplane. There are thumbscrews but they don't really make much difference for this. Sometimes you have to slam it in a couple times, making sure the thumbscrews are completely loosened and out so that they don't get in the way. When the logic board is properly engaged and the drawer is fully closed, it should be easy to turn the rear key.\nUnfortunately reseating the processor card didn't fix it, so the next step is to try a different one.\nI'm saving the other 200MHz card as a spare for\nstockholm\n, but we have several 150MHz cards, so I selected one of those.\nAnd it starts up! We have messages on the LCD showing the 150MHz 604 (with 50MHz bus), 32MB of parity RAM and 1MB of L2 cache were all properly detected. The reported ROM version of 1.1.22 is consistent with production ROMs as shipped. If you connect to Port 2 on the rear at 9600bps during POST, you may see additional messages.\nSince the front key is in the service position, it goes into a service boot, first trying the CD (looking for a bootloader) and then looking for the file\ndiags\non a floppy disk. We have provided the machine with neither, and nothing else is available, so the server drops to an Open Firmware prompt.\nOpen Firmware is the boot environment for all Power Macs starting with the first beige PCI systems. Originating at Sun as OpenBoot, Open Firmware provides an interactive Forth interpreter, which is used for interpreting cross-platform FCode (bytecode) in device ROMs but can also be used for development, and makes available a built-in means of managing and storing settings for installed hardware. In Macs of this generation it was generally invisible to the user except if specifically enabled or requested — remember this for later as well — and the Apple Network Server was the earliest Power Mac (well, derived, anyway) system where Open Firmware was explicitly user-facing. Open Firmware survives today largely in the form of\nOpenBIOS\n.\nThe\ndiags\nfile in question could be theorically any XCOFF binary, but it's specifically looking for this, the Network Server Diagnostic Utility. This came on a floppy disk in the ANS accessory pack. We'll use the NSDU to check the rest of our configuration.\nWe could reboot the server, but we can just start it from the Open Firmware prompt directly with\nboot fd:diags\n. You can also see some of the system's current Open Firmware environment variables; we'll have much more to say about those when we finally get to experimenting with the ROMs. Sorry about the screen photographs but the default refresh rate does not agree with my VGA capture box.\nThe NSDU is also a single XCOFF binary. When it starts up it prints a summary of installed hardware and the results from initial POST. It has detected all RAM is parity, detected the CPU speed and internal L1, detected the external L2, detected both power supplies, and correctly shows installed RAM, no PCI cards, and most of the sensors. The only one that's wrong is the Drive Fan reads "Off" but that's because I hadn't remembered to reconnect the disconnected SCSI bus cable to the backplane. We'll now run the complete system test (option 3).\nThe tests scroll up on the screen, here showing the two internal SCSI controllers and the LCD. The video chip also gets exercised for conformance with various test displays.\nIn the end, we have a clean bill of health, both on the screen ...\n... and on the LCD. There's one more thing left to do to certify operation: a test boot of AIX from the CD.\nANS AIX, codenamed Harpoon, is specific to the Apple Network Server — you can't use a regular AIX CD, and installing Base Operating System packages from such a CD is likely to corrupt your install (don't ask me how I know this). Most systems shipped with this CD in the accessory pack, version 4.1.4.1. 4.1.2 was used on preproduction servers but I've never seen it myself. Apple later issued version 4.1.5, which fixed many bugs and is strongly recommended.\nBooting from the CD.\nThe LCD is live during an AIX boot, showing the march of AIX bootloader codes. They are the same codes as most IBM servers of this era.\nFinally, the AIX kernel comes up, asking to define the system console. This proves our hardware (and CD-ROM) both work and that its native AIX can start, which means any weird behaviour after this point is more likely than not due to what we're testing.\nWe're finally ready to begin. Let's enumerate the currently known Network Server ROMs. In these pre-Open Firmware 3 ROMs, the ROM version and the Open Firmware version are the same. For comparison purposes, PCI Power Macs of this era were typically 1.0.5.\nPre-production ROMs. Currently one version is known, 1.1.20.1. These were used to boot Mac OS and AIX (and possibly another operating system I'll mention), but the internal video and SCSI controllers are not supported in Mac OS. This was the version that turned out to be on my flash DIMM.\nProduction ROMs. Currently one version is known, 1.1.22. These only boot AIX, though systems with these ROMs can also boot NetBSD and certain Linux distributions. I won't talk further about that in this article, but if I were to use a non-AIX operating system on a production ANS, it would almost certainly be NetBSD even though it doesn't currently support internal video or the on-board Ethernet.\nPrototype Mac OS ROMs. Currently one version is known, 2.0. These contain ROM drivers for the internal video and SCSI controllers, and are the only known ROMs to fully support all internal devices in Mac OS. This is not currently in my possession — though I'd love to get one! — but at least one person has created replica ROMs from a dump graciously made available by their owner, and then used them to successfully boot their own machine.\nPrototype Windows NT ROMs. These ROMs also appear to be required for multiprocessor support. Currently three versions are known, 2.26b6, 2.26b8 (not dumped, referred to on the LinuxPPC-ANS list) and 2.26NT, with relatively small changes between them.\nThese ROMs differ primarily in what operating systems they will boot (and, underlyingly, features they add or remove) and devices they contain internal support for. Those differences can be glimpsed by looking at the Forth words the ROM defines and the packages (implemented as pseudo-devices) they carry. For example, here are the packages and devices in this 700 with the production 1.1.22 ROM. The exact addresses are irrelevant for our purposes here except for the addresses of the Bandit PCI bridges, the Hammerhead memory controller and the Toolbox ROM, which are fixed.\ndisk2:aix
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="切换到深色模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换到深色模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="切换到浅色模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换到浅色模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/mrgolftech/rss-articles" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    rss-articles
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  首页

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../blogs/" class="md-tabs__link">
        
  
  
    
  
  所有博客

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Hacker News 精选博客" class="md-nav__button md-logo" aria-label="Hacker News 精选博客" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Hacker News 精选博客
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mrgolftech/rss-articles" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    rss-articles
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    首页
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blogs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    所有博客
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/mrgolftech/rss-articles/edit/master/docs/oldvcr.blogspot.com/Hands-on with two Apple Network Server prototype ROMs_20260205.md" title="编辑此页" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"/></svg>
    </a>
  
  


<h1 id="hands-on-with-two-apple-network-server-prototype-romsnn-httpsoldvcrblogspotcomn-httpsoldvcrblogspotcom202601hands-on-with-two-apple-network-serverhtmln-2026-01-25t000300000-0800nn-nngrateful-acknowledgement-made-to-the-several-former-apple-employees-who-materially-contributed-to-this-entry-this-article-wouldnt-have-been-possible-without-younheres-why-i-need-to-do-inventory-more-oftennthis-is-an-apple-prototype-rom-i-am-ashamed-to-admit-i-found-in-my-own-box-of-junk-from-various-apple-network-server-parts-someone-at-apple-austin-sent-me-in-2003-the-1996-apple-network-server-is-one-of-apples-more-noteworthy-white-elephants-and-to-date-the-last-non-macintosh-computer-ios-devices-notwithstanding-to-come-from-cupertino-best-known-for-being-about-the-size-of-a-generous-dorm-fridge-and-officially-only-running-aix-41-ibms-proprietary-unix-for-power-isanits-complicated-historynis-a-microcosm-of-some-of-apples-strangest-days-during-the-mid-1990s-at-10000-a-pop-in-2026-dollars-over-20700-not-counting-the-aix-license-they-sold-poorly-and-were-among-the-first-products-on-the-chopping-block-when-steve-jobs-returned-in-1997nstockholmn-my-own-apple-network-server-500-was-a-castoff-i-got-in-1998-practically-new-when-the-university-bookstores-vendor-wouldnt-support-the-hardware-and-it-got-surplused-it-was-the-first-unix-server-i-ever-owned-personally-over-the-years-i-ended-up-installing-nearly-every-available-upgrade-and-it-ran-floodgapcom-just-about-nonstop-until-i-replaced-it-with-a-power6-in-2012-for-which-it-still-functions-as-an-emergency-reserve-plus-as-the-university-was-still-running-rs6000-systems-back-then-i-had-ready-access-to-tons-of-aix-software-which-the-ans-ran-flawlessly-it-remains-one-of-the-jewels-of-my-collectionnso-whennthe-mythical-ans-macos-rom-finally-surfacedn-i-wasnveryninterested-there-had-always-been-interest-in-getting-the-ans-to-run-macos-back-in-the-day-i-remember-wasting-an-afternoon-trying-with-a-mac-os-8-cd-and-it-was-a-poorly-kept-secret-that-at-various-points-in-its-development-it-could-given-its-hardware-basis-as-a-heavily-modified-power-macintosh-9500-apple-itself-perceived-this-interest-even-demonstrating-it-with-mac-os-prior-to-its-release-and-leading-then-cto-ellen-hancock-to-later-announce-that-the-ans-would-get-rom-upgrades-to-allow-it-to-run-both-regular-mac-os-and-in-a-shock-to-the-industry-windows-nt-this-would-have-made-the-ans-the-first-and-only-apple-machine-ever-sold-to-support-itnwell-guess-what-this-isnthatnpre-production-rom-apple-originally-used-to-demonstrate-mac-os-and-another-individual-has-stepped-up-with-the-nt-roms-which-are-also-now-in-my-possession-however-at-that-time-it-wasnt-clear-what-the-prototype-rom-stick-was-just-a-whole-bunch-of-flash-chips-on-a-power-mac-rom-dimm-which-my-apple-contacts-tell-me-was-used-to-develop-many-other-machines-at-the-time-and-there-was-no-way-i-was-sticking-it-into-my-beloved-production-500-but-we-have-a-solution-for-that-network-servers-came-in-three-sizes-the-rackmount-ans-300-deep-dish-which-was-never-released-except-for-a-small-number-of-prototypes-the-baseline-ans-500-shiner-le-and-the-highest-tier-ans-700-shiner-he-which-added-more-drive-bays-and-redundant-hot-swappable-power-suppliesnwhich-brings-us-tonthisnmachinenmeetnholmstockn-my-network-server-700-and-the-second-ans-in-my-collection-the-third-is-my-non-functionalnshiner-esb-prototypen-this-was-a-ship-of-theseus-that-my-friend-cb-and-i-assembled-out-of-two-partially-working-but-rather-thrashed-700s-we-got-for-come-and-get-them-in-august-2003-it-served-asnstockholmns-body-double-for-a-number-of-years-untilnstockholmnwas-retired-andnholmstocknwent-into-cold-storage-as-a-holding-bay-for-spare-parts-this-makes-it-the-perfect-system-to-try-a-dodgy-rom-innill-give-you-a-spoiler-now-it-turns-out-the-nt-rom-isnt-enough-to-install-windows-nt-by-itself-even-though-it-has-some-interesting-attributes-sadly-this-was-not-unexpected-but-the-pre-production-rom-does-work-to-boot-mac-os-albeit-with-apparent-bugs-and-an-injection-of-extra-hardware-lets-get-the-700-running-again-call-it-a-refurb-weekend-and-show-the-processnthe-700-weighs-around-85-pounds-unloaded-and-is-exactly-like-trying-to-cram-a-refrigerator-into-the-backseat-of-your-car-in-this-case-my-honda-civic-si-while-it-does-have-wheels-on-the-bottom-even-the-good-ones-dont-have-a-great-turning-radius-and-these-arent-good-and-getting-it-in-and-out-of-the-car-unavoidably-means-having-to-pick-it-up-lift-with-your-knees-not-with-your-backnpreparing-the-700-for-testingnthis-section-is-basically-a-cloaked-refurb-weekend-but-even-if-youre-familiar-with-ans-guts-im-going-to-point-out-a-few-specific-things-relevant-to-rom-support-as-we-go-along-we-want-this-machine-as-ship-shape-as-we-can-get-it-so-that-accurate-observations-can-be-made-for-posterityni-would-also-like-to-thank-my-wife-who-chose-to-politely-ignore-the-new-noisy-beast-hulking-in-the-living-room-for-a-few-daysncontinuing-in-the-fridge-motif-the-500-and-700-have-a-front-keylock-controlling-a-sliding-door-along-with-a-unique-4-line-lcd-which-displays-boot-information-and-can-be-used-as-an-output-device-in-aix-and-other-operating-systems-unlike-my-very-minimally-yellowed-500-which-has-spent-most-of-its-life-in-quiet-smoke-free-server-rooms-this-one-seemed-to-have-gotten-a-bit-more-sun-fortunately-most-of-the-chassis-is-painted-metal-which-is-also-where-most-of-the-weight-comes-from-the-keylock-position-on-power-up-is-noted-by-the-firmware-the-leftmost-is-the-service-setting-the-middle-is-a-normal-boot-and-the-rightmost-locked-position-puts-the-machine-into-a-power-failsafe-modenthe-sliding-door-covers-seven-front-drive-bays-normally-one-with-a-cd-rom-one-with-some-sort-of-tape-drive-typically-a-datdds-drive-but-a-few-have-8mm-tape-instead-both-the-same-drives-as-sold-for-the-workgroup-server-95-and-9150-and-the-rest-various-hard-drives-which-can-be-either-independent-or-connected-into-an-optional-raid-the-700-can-take-two-more-drives-in-a-rear-bracket-although-i-have-the-raid-card-i-never-ended-up-installing-it-since-a-single-drive-was-more-than-sufficient-for-what-i-was-using-it-for-as-most-of-the-drive-trays-and-both-drive-brackets-had-been-removed-from-the-two-donor-700s-used-to-assemblenholmstockn-i-ended-up-just-keeping-a-cd-rom-and-two-trays-and-used-the-other-open-space-for-storagenat-the-top-are-the-nmi-reset-and-power-buttons-plus-a-standard-mac-floppy-drivenit-is-worth-noting-here-that-the-internal-bays-are-all-serviced-by-two-symbios-logic-53c825a-controllers-providing-two-fast-wide-scsi-busses-running-at-20mbs-unlike-the-typical-power-mac-mesh-10mbs-controller-the-ans-internal-scsi-controllers-are-unique-to-the-ans-and-appear-in-no-other-apple-product-remember-this-for-later-a-second-external-scsi-bus-is-available-on-the-rear-using-the-same-slower-5mbs-curio-scsiethernetserial-combo-chip-as-other-contemporary-power-macs-and-implementing-an-ncr-53c94nthe-rear-with-the-monitor-power-cable-photobombing-the-shot-is-much-less-yellowed-ports-are-here-for-audio-in-and-out-standardnawacsn-adb-two-beige-mac-minidin-8-serial-ports-vga-oddly-but-happily-a-conventional-hdi-15-not-apples-traditional-da-15-aaui-10mbit-ethernet-any-aaui-mac-dongle-will-work-and-the-external-scsi-bus-db-25-six-pci-slots-are-available-a-second-keylock-secures-the-logic-board-which-is-on-a-slide-out-drawer-accessed-with-the-two-handles-both-rear-panels-have-their-own-fans-which-are-hot-swappable-as-well-apple-included-a-monitor-dongle-in-the-boxnit-is-also-worth-noting-here-that-the-onboard-video-is-a-cirrus-logic-54m30-also-unique-to-the-ans-and-likewise-also-used-in-no-other-apple-product-well-be-coming-back-to-this-point-toonparenthetically-here-are-the-keylocks-new-replacements-in-my-part-box-they-are-wafer-lock-keys-of-the-same-type-used-in-the-quadra-950-apple-workgroup-server-95-and-workgroup-server-9150-as-sold-network-servers-came-with-three-keys-one-front-one-back-and-one-spare-but-they-are-all-interchangeable-these-keys-have-a-small-three-digit-code-engraved-into-the-metal-identifying-the-lock-they-are-designed-to-fitni-also-got-out-a-lot-of-parts-from-storage-just-in-case-they-were-needed-some-of-which-were-in-the-700-and-some-of-which-were-separate-besides-my-two-boxes-of-tricks-i-also-pulled-out-a-spare-logic-board-five-boxes-of-ram-upgrade-kits-these-are-only-16mb-each-though-so-this-isnt-as-much-memory-as-youd-think-a-200mhz-cpu-upgrade-kit-several-more-loose-cpus-i-also-have-and-a-raid-card-just-for-funni-dimly-recalled-the-machine-may-not-have-been-working-right-when-i-committed-it-to-storage-but-well-proceed-as-if-it-had-been-starting-with-a-visual-inspection-of-the-electronicsnthe-keylock-on-the-logic-board-drawer-shown-here-with-the-rear-panel-off-so-you-can-see-how-it-operates-has-just-two-positions-in-the-horizontal-locked-position-the-board-is-connected-to-power-and-a-metal-tab-prevents-the-drawer-from-coming-out-in-the-vertical-unlocked-position-the-board-is-disconnected-and-the-tab-is-moved-away-from-the-chassis-so-the-drawer-can-be-pulled-free-we-turn-the-rear-key-grab-the-handles-and-pull-the-board-drawer-outnthis-is-the-logic-board-the-spare-in-the-bag-it-has-a-broadly-similar-layout-to-other-six-slot-power-macs-and-has-many-of-the-same-chips-including-a-grand-central-labeled-io-cntrl-near-the-cirrus-logic-video-asic-curio-labeled-scsienet-and-two-bandits-labeled-as-pci-bridges-however-it-only-has-eight-ram-dimm-slots-instead-of-the-9500s-twelve-and-most-of-the-system-connections-are-consolidated-into-a-single-card-edge-at-the-top-and-a-large-power-connector-at-the-bottom-there-are-separate-slots-for-the-rom-dimm-the-cpu-daughtercard-and-the-l2-cache-headers-handle-both-internal-scsi-busses-the-mainboard-fan-and-the-rear-keylock-a-small-red-cuda-reset-button-is-at-the-top-leftninstalled-the-board-sits-in-front-of-the-mainboard-fan-which-is-primarily-used-to-cool-the-cpu-daughtercard-this-daughtercard-rides-in-plastic-rails-that-serve-as-alignment-guides-and-structural-support-tabs-and-a-couple-mounting-screws-hold-the-logic-board-in-place-in-the-drawer-the-tabs-card-rails-and-much-of-the-drawer-itself-are-unfortunately-made-from-amelioplastic-but-this-drawer-is-thick-and-not-normally-exposed-to-the-exterior-and-it-mercifully-remains-in-good-physical-condition-note-that-when-the-drawer-is-open-the-board-is-completely-ungrounded-so-only-handle-it-with-antistatic-precautionsni-never-store-machines-with-their-pram-batteries-installed-especially-since-my-shiner-esb-prototype-had-been-ruined-by-the-previous-owner-doing-so-during-which-time-it-leaked-and-corroded-the-logic-board-but-in-this-particular-case-since-we-will-be-messing-with-the-system-it-is-easier-to-reset-the-logic-board-if-we-never-install-the-battery-at-all-with-the-machine-unplugged-the-battery-out-and-the-rear-key-unlocked-horizontal-the-board-will-be-completely-depowered-and-will-reset-in-about-three-minutes-or-sonthe-cpu-card-is-much-larger-than-the-ones-used-in-most-other-pci-power-macs-and-was-intended-to-accommodate-a-dual-processor-smp-option-which-was-never-sold-though-again-some-prototypes-have-escaped-i-would-love-to-get-one-unfortunately-this-means-that-power-mac-cpu-cards-cant-upgrade-an-ans-and-the-highest-speed-option-is-the-200mhz-604e-card-shown-here-but-any-ans-cpu-card-will-work-in-any-ans-sonstockholmnalso-has-a-200mhz-card-bus-speed-and-cpu-speed-are-related-the-132mhz-base-500-and-176mhz-604-cards-run-the-bus-at-44mhz-but-the-150mhz-604-base-700-and-200mhz-604e-cards-run-the-bus-at-50mhznat-the-top-is-the-700s-standard-1mb-l2-cache-the-500-came-with-512k-these-are-allegedly-regular-power-mac-caches-and-a-network-server-1mb-cache-should-work-in-other-power-macs-but-the-500-kernel-panicked-with-a-sonnet-l2-cache-upgrade-and-i-eventually-had-to-chase-down-a-1mb-card-pulled-from-another-700nbehind-that-is-the-rom-stick-and-the-centrepiece-of-this-article-they-are-not-always-labeled-one-of-my-spares-isnt-but-when-they-are-the-standard-production-rom-is-part-341-0833-it-is-a-regular-4mb-rom-like-other-old-world-macs-were-going-to-test-this-machine-with-that-before-we-go-installing-the-othersnto-get-a-test-report-will-require-a-minimum-amount-of-ram-the-ans-uses-the-same-168-pin-dimms-as-other-power-macs-and-can-accept-up-to-512mb-anything-greater-is-not-supported-by-the-memory-controller-but-uniquely-needs-60nsnparitynram-for-highest-performance-ifnanyndimm-is-not-parity-then-the-system-rom-disables-parity-fornallndimmsnandnsets-the-timing-to-70ns-even-if-the-ram-is-faster-this-is-a-non-trivial-hit-especially-at-the-fastest-50mhz-bus-speed-so-you-really-want-parity-if-you-can-get-it-here-im-using-parity-fpm-which-was-sold-standard-in-the-units-all-units-came-with-at-least-32mb-in-two-16mb-dimms-and-in-upgrade-kits-16mb-in-two-8mb-dimms-all-manufactured-by-ibm-as-oem-under-contract-and-sold-at-typically-exorbitant-apple-pricesnlater-on-64mb-and-128mb-parity-dimms-became-available-andnstockholmnhas-a-full-512mb-from-eight-64mb-parity-sticks-ram-need-not-be-installed-in-pairs-though-this-is-preferred-as-the-ans-supports-interleaving-while-edo-ram-should-just-work-treated-as-fpm-ive-never-tried-parity-edo-in-an-ans-well-put-in-two-ibm-16mb-parity-fpm-dimms-to-equal-the-base-32mbnwith-the-drawer-closed-and-the-rear-key-locked-we-plug-in-the-server-no-drives-attached-yet-turn-the-front-key-to-service-and-then-press-the-front-power-button-to-get-a-mostly-blank-front-lcd-instead-of-startup-messagesnhaving-worked-with-these-beasts-for-decades-this-appearance-a-backlit-lcd-with-a-mostly-blank-or-dark-block-display-almost-certainly-indicates-a-problem-with-the-processor-card-because-enough-of-the-logic-board-is-working-to-power-on-the-front-panel-but-the-cpu-isnt-running-typically-this-is-because-the-processor-wormed-itself-out-of-the-board-and-needs-to-be-reseated-but-you-can-also-get-something-like-this-if-the-card-went-bad-and-less-commonly-if-the-rom-stick-isnt-installed-correctlynhowever-moving-the-monitor-cord-out-of-the-way-we-have-a-problem-we-cant-get-the-drawer-to-open-wide-enough-to-pull-out-and-reseat-the-cpu-card-well-have-to-take-the-drawer-offnas-usual-removing-the-drawer-is-relatively-easy-its-getting-it-back-on-thats-the-trick-two-plastic-latches-on-the-underside-of-the-drawer-fortunately-still-also-in-good-nick-slip-into-two-gaps-in-the-metal-slide-rails-supporting-the-drawer-with-your-other-hand-so-it-doesnt-fall-off-push-each-latch-in-and-push-back-the-rail-to-disengage-itnthe-drawer-then-lifts-off-and-can-be-put-aside-preferably-onto-an-antistatic-matnheres-the-inside-where-the-logic-board-connects-the-powerplane-connector-is-at-the-bottom-the-board-at-the-top-is-the-right-half-of-the-mezzanine-codenamed-hendy-with-the-slot-for-the-logic-boards-card-edge-and-a-connector-for-the-front-panelnthe-mezz-is-a-horseshoe-that-straddles-both-sides-better-shown-here-with-the-top-off-the-other-side-has-connectors-for-the-nmi-and-reset-buttons-floppy-drive-and-scsi-bussesnthose-bus-connectors-come-from-the-scsi-backplane-on-the-other-side-here-with-that-panel-off-which-can-now-be-removed-because-the-drawer-is-out-both-the-front-and-in-the-700-the-rear-drive-connectors-hook-up-here-id-forgotten-id-disconnected-bus-1-when-i-stored-it-so-i-later-reconnected-the-cable-to-j11-before-closing-this-back-up-if-you-dont-do-this-besides-drives-not-working-you-may-get-spurious-errors-warning-that-the-drive-fan-failed-or-is-not-present-see-later-onnthe-problem-with-the-sliding-rails-turned-out-to-be-two-fold-first-some-stuck-broken-pieces-of-plastic-which-i-removed-and-second-whatever-lubricant-apple-had-used-which-over-the-decades-had-desiccated-into-gluey-copper-coloured-gunk-i-cleaned-off-most-of-the-ick-and-then-used-wd-40-white-lithium-not-regular-wd-40-on-the-rails-and-worked-it-back-and-forth-into-the-bearings-if-its-good-enough-for-your-garage-door-opener-its-good-enough-for-your-unusual-apple-servernafter-about-ten-minutes-of-spraying-and-sliding-both-rails-now-move-smoothly-and-reach-their-maximum-extents-i-was-very-careful-to-wipe-off-any-excess-so-there-wouldnt-be-a-mess-laternnow-to-remount-the-drawer-this-is-not-well-explained-in-the-official-apple-service-manual-so-ill-be-more-explicit-here-on-each-slide-are-two-small-metal-hooks-if-you-dont-see-the-hooks-pull-the-slides-forward-until-you-donon-each-slide-one-of-the-hooks-goes-into-a-metal-notch-on-the-two-metal-rails-mounted-on-the-back-of-the-drawer-on-the-top-slide-the-bottom-hook-engages-on-the-bottom-slide-the-top-one-doesnonce-youve-done-that-then-while-using-one-hand-to-support-the-drawer-pull-each-slide-forward-until-it-engages-with-each-of-the-black-latches-it-will-click-into-positionnnow-we-can-pull-the-drawer-all-the-way-out-pull-out-the-200mhz-card-and-try-to-reseat-it-using-the-card-guides-you-shouldnt-need-to-force-it-in-though-it-does-need-a-bit-of-grunt-to-ensure-both-rows-of-contacts-get-into-the-slotnclosing-the-drawer-likewise-doesnt-require-forcenper-sen-but-the-rear-keylock-will-not-turn-unless-you-have-the-board-fully-engaged-with-the-mezz-and-powerplane-there-are-thumbscrews-but-they-dont-really-make-much-difference-for-this-sometimes-you-have-to-slam-it-in-a-couple-times-making-sure-the-thumbscrews-are-completely-loosened-and-out-so-that-they-dont-get-in-the-way-when-the-logic-board-is-properly-engaged-and-the-drawer-is-fully-closed-it-should-be-easy-to-turn-the-rear-keynunfortunately-reseating-the-processor-card-didnt-fix-it-so-the-next-step-is-to-try-a-different-onenim-saving-the-other-200mhz-card-as-a-spare-fornstockholmn-but-we-have-several-150mhz-cards-so-i-selected-one-of-thosenand-it-starts-up-we-have-messages-on-the-lcd-showing-the-150mhz-604-with-50mhz-bus-32mb-of-parity-ram-and-1mb-of-l2-cache-were-all-properly-detected-the-reported-rom-version-of-1122-is-consistent-with-production-roms-as-shipped-if-you-connect-to-port-2-on-the-rear-at-9600bps-during-post-you-may-see-additional-messagesnsince-the-front-key-is-in-the-service-position-it-goes-into-a-service-boot-first-trying-the-cd-looking-for-a-bootloader-and-then-looking-for-the-filendiagsnon-a-floppy-disk-we-have-provided-the-machine-with-neither-and-nothing-else-is-available-so-the-server-drops-to-an-open-firmware-promptnopen-firmware-is-the-boot-environment-for-all-power-macs-starting-with-the-first-beige-pci-systems-originating-at-sun-as-openboot-open-firmware-provides-an-interactive-forth-interpreter-which-is-used-for-interpreting-cross-platform-fcode-bytecode-in-device-roms-but-can-also-be-used-for-development-and-makes-available-a-built-in-means-of-managing-and-storing-settings-for-installed-hardware-in-macs-of-this-generation-it-was-generally-invisible-to-the-user-except-if-specifically-enabled-or-requested-remember-this-for-later-as-well-and-the-apple-network-server-was-the-earliest-power-mac-well-derived-anyway-system-where-open-firmware-was-explicitly-user-facing-open-firmware-survives-today-largely-in-the-form-ofnopenbiosnnthendiagsnfile-in-question-could-be-theorically-any-xcoff-binary-but-its-specifically-looking-for-this-the-network-server-diagnostic-utility-this-came-on-a-floppy-disk-in-the-ans-accessory-pack-well-use-the-nsdu-to-check-the-rest-of-our-configurationnwe-could-reboot-the-server-but-we-can-just-start-it-from-the-open-firmware-prompt-directly-withnboot-fddiagsn-you-can-also-see-some-of-the-systems-current-open-firmware-environment-variables-well-have-much-more-to-say-about-those-when-we-finally-get-to-experimenting-with-the-roms-sorry-about-the-screen-photographs-but-the-default-refresh-rate-does-not-agree-with-my-vga-capture-boxnthe-nsdu-is-also-a-single-xcoff-binary-when-it-starts-up-it-prints-a-summary-of-installed-hardware-and-the-results-from-initial-post-it-has-detected-all-ram-is-parity-detected-the-cpu-speed-and-internal-l1-detected-the-external-l2-detected-both-power-supplies-and-correctly-shows-installed-ram-no-pci-cards-and-most-of-the-sensors-the-only-one-thats-wrong-is-the-drive-fan-reads-off-but-thats-because-i-hadnt-remembered-to-reconnect-the-disconnected-scsi-bus-cable-to-the-backplane-well-now-run-the-complete-system-test-option-3nthe-tests-scroll-up-on-the-screen-here-showing-the-two-internal-scsi-controllers-and-the-lcd-the-video-chip-also-gets-exercised-for-conformance-with-various-test-displaysnin-the-end-we-have-a-clean-bill-of-health-both-on-the-screen-n-and-on-the-lcd-theres-one-more-thing-left-to-do-to-certify-operation-a-test-boot-of-aix-from-the-cdnans-aix-codenamed-harpoon-is-specific-to-the-apple-network-server-you-cant-use-a-regular-aix-cd-and-installing-base-operating-system-packages-from-such-a-cd-is-likely-to-corrupt-your-install-dont-ask-me-how-i-know-this-most-systems-shipped-with-this-cd-in-the-accessory-pack-version-4141-412-was-used-on-preproduction-servers-but-ive-never-seen-it-myself-apple-later-issued-version-415-which-fixed-many-bugs-and-is-strongly-recommendednbooting-from-the-cdnthe-lcd-is-live-during-an-aix-boot-showing-the-march-of-aix-bootloader-codes-they-are-the-same-codes-as-most-ibm-servers-of-this-eranfinally-the-aix-kernel-comes-up-asking-to-define-the-system-console-this-proves-our-hardware-and-cd-rom-both-work-and-that-its-native-aix-can-start-which-means-any-weird-behaviour-after-this-point-is-more-likely-than-not-due-to-what-were-testingnwere-finally-ready-to-begin-lets-enumerate-the-currently-known-network-server-roms-in-these-pre-open-firmware-3-roms-the-rom-version-and-the-open-firmware-version-are-the-same-for-comparison-purposes-pci-power-macs-of-this-era-were-typically-105npre-production-roms-currently-one-version-is-known-11201-these-were-used-to-boot-mac-os-and-aix-and-possibly-another-operating-system-ill-mention-but-the-internal-video-and-scsi-controllers-are-not-supported-in-mac-os-this-was-the-version-that-turned-out-to-be-on-my-flash-dimmnproduction-roms-currently-one-version-is-known-1122-these-only-boot-aix-though-systems-with-these-roms-can-also-boot-netbsd-and-certain-linux-distributions-i-wont-talk-further-about-that-in-this-article-but-if-i-were-to-use-a-non-aix-operating-system-on-a-production-ans-it-would-almost-certainly-be-netbsd-even-though-it-doesnt-currently-support-internal-video-or-the-on-board-ethernetnprototype-mac-os-roms-currently-one-version-is-known-20-these-contain-rom-drivers-for-the-internal-video-and-scsi-controllers-and-are-the-only-known-roms-to-fully-support-all-internal-devices-in-mac-os-this-is-not-currently-in-my-possession-though-id-love-to-get-one-but-at-least-one-person-has-created-replica-roms-from-a-dump-graciously-made-available-by-their-owner-and-then-used-them-to-successfully-boot-their-own-machinenprototype-windows-nt-roms-these-roms-also-appear-to-be-required-for-multiprocessor-support-currently-three-versions-are-known-226b6-226b8-not-dumped-referred-to-on-the-linuxppc-ans-list-and-226nt-with-relatively-small-changes-between-themnthese-roms-differ-primarily-in-what-operating-systems-they-will-boot-and-underlyingly-features-they-add-or-remove-and-devices-they-contain-internal-support-for-those-differences-can-be-glimpsed-by-looking-at-the-forth-words-the-rom-defines-and-the-packages-implemented-as-pseudo-devices-they-carry-for-example-here-are-the-packages-and-devices-in-this-700-with-the-production-1122-rom-the-exact-addresses-are-irrelevant-for-our-purposes-here-except-for-the-addresses-of-the-bandit-pci-bridges-the-hammerhead-memory-controller-and-the-toolbox-rom-which-are-fixedndisk2aix">Hands-on with two Apple Network Server prototype ROMs\n\n<strong>来源:</strong> https://oldvcr.blogspot.com\n<strong>链接:</strong> https://oldvcr.blogspot.com/2026/01/hands-on-with-two-apple-network-server.html\n<strong>日期:</strong> 2026-01-25T00:03:00.000-08:00\n\n---\n\nGrateful acknowledgement made to the several former Apple employees who materially contributed to this entry. This article wouldn't have been possible without you!\nHere's why I need to do inventory more often.\nThis is an Apple prototype ROM I am ashamed to admit I found in my own box of junk from various Apple Network Server parts someone at Apple Austin sent me in 2003. The 1996 Apple Network Server is one of Apple's more noteworthy white elephants and, to date, the last non-Macintosh computer (iOS devices notwithstanding) to come from Cupertino. Best known for being about the size of a generous dorm fridge and officially only running AIX 4.1, IBM's proprietary Unix for Power ISA,\nits complicated history\nis a microcosm of some of Apple's strangest days during the mid-1990s. At $10,000+ a pop (in 2026 dollars over $20,700), not counting the AIX license, they sold poorly and were among the first products on the chopping block when Steve Jobs returned in 1997.\nstockholm\n, my own Apple Network Server 500, was a castoff I got in 1998 — practically new — when the University bookstore's vendor wouldn't support the hardware and it got surplused. It was the first Unix server I ever owned personally, over the years I ended up installing nearly every available upgrade, and it ran Floodgap.com just about nonstop until I replaced it with a POWER6 in 2012 (for which it still functions as an emergency reserve). Plus, as the University was still running RS/6000 systems back then, I had ready access to tons of AIX software which the ANS ran flawlessly. It remains one of the jewels of my collection.\nSo when\nthe mythical ANS MacOS ROM finally surfaced\n, I was\nvery\ninterested. There had always been interest in getting the ANS to run MacOS back in the day (I remember wasting an afternoon trying with a Mac OS 8 CD) and it was a poorly-kept secret that at various points in its development it could, given its hardware basis as a heavily modified Power Macintosh 9500. Apple itself perceived this interest, even demonstrating it with Mac OS prior to its release, and leading then-CTO Ellen Hancock to later announce that the ANS would get ROM upgrades to allow it to run both regular Mac OS and, in a shock to the industry, Windows NT. This would have made the ANS the first and only Apple machine ever sold to support it.\nWell, guess what. This is\nthat\npre-production ROM Apple originally used to demonstrate Mac OS, and another individual has stepped up with the NT ROMs which are also now in my possession. However, at that time it wasn't clear what the prototype ROM stick was — just a whole bunch of flash chips on a Power Mac ROM DIMM which my Apple contacts tell me was used to develop many other machines at the time — and there was no way I was sticking it into my beloved production 500. But we have a solution for that. Network Servers came in three sizes: the rackmount ANS 300 ("Deep Dish") which was never released except for a small number of prototypes, the baseline ANS 500 ("Shiner LE"), and the highest tier ANS 700 ("Shiner HE") which added more drive bays and redundant, hot-swappable power supplies.\nWhich brings us to\nthis\nmachine.\nMeet\nholmstock\n, my Network Server 700, and the second ANS in my collection (the third is my non-functional\nShiner ESB prototype\n). This was a ship of Theseus that my friend CB and I assembled out of two partially working but rather thrashed 700s we got for "come and get them" in August 2003. It served as\nstockholm\n's body double for a number of years until\nstockholm\nwas retired and\nholmstock\nwent into cold storage as a holding bay for spare parts. This makes it the perfect system to try a dodgy ROM in.\nI'll give you a spoiler now: it turns out the NT ROM isn't enough to install Windows NT by itself, even though it has some interesting attributes. Sadly this was not unexpected. But the pre-production ROM does work to boot Mac OS, albeit with apparent bugs and an injection of extra hardware. Let's get the 700 running again (call it a Refurb Weekend) and show the process.\nThe 700 weighs around 85 pounds unloaded and is exactly like trying to cram a refrigerator into the backseat of your car (in this case my Honda Civic Si). While it does have wheels on the bottom, even the good ones don't have a great turning radius (and these aren't good), and getting it in and out of the car unavoidably means having to pick it up. Lift with your knees, not with your back.\nPreparing the 700 for testing\nThis section is basically a cloaked Refurb Weekend, but even if you're familiar with ANS guts, I'm going to point out a few specific things relevant to ROM support as we go along. We want this machine as ship-shape as we can get it so that accurate observations can be made for posterity!\nI would also like to thank my wife who chose to politely ignore the new noisy beast hulking in the living room for a few days.\nContinuing in the fridge motif, the 500 and 700 have a front keylock controlling a sliding door, along with a unique 4-line LCD which displays boot information and can be used as an output device in AIX and other operating systems. Unlike my very minimally yellowed 500 which has spent most of its life in quiet smoke-free server rooms, this one seemed to have gotten a bit more sun. Fortunately most of the chassis is painted metal which is also where most of the weight comes from. The keylock position on power-up is noted by the firmware; the leftmost is the service setting, the middle is a normal boot, and the rightmost (locked) position puts the machine into a power failsafe mode.\nThe sliding door covers seven front drive bays, normally one with a CD-ROM, one with some sort of tape drive (typically a DAT/DDS drive, but a few have 8mm tape instead, both the same drives as sold for the Workgroup Server 95 and 9150), and the rest various hard drives which can be either independent or connected into an optional RAID. The 700 can take two more drives in a rear bracket. Although I have the RAID card, I never ended up installing it since a single drive was more than sufficient for what I was using it for. As most of the drive trays and both drive brackets had been removed from the two donor 700s used to assemble\nholmstock\n, I ended up just keeping a CD-ROM and two trays, and used the other open space for storage.\nAt the top are the NMI, reset and power buttons, plus a standard Mac floppy drive.\nIt is worth noting here that the internal bays are all serviced by two Symbios Logic 53C825A controllers, providing two Fast Wide SCSI busses running at 20MB/s. Unlike the typical Power Mac MESH (10MB/s) controller, the ANS internal SCSI controllers are unique to the ANS and appear in no other Apple product. Remember this for later. A second external SCSI bus is available on the rear, using the same (slower 5MB/s) CURIO SCSI/Ethernet/serial combo chip as other contemporary Power Macs and implementing an NCR 53C94.\nThe rear (with the monitor power cable photobombing the shot) is much less yellowed. Ports are here for audio in and out (standard\nAWACS\n), ADB, two beige Mac MiniDIN-8 serial ports, VGA (oddly but happily a conventional HDI-15, not Apple's traditional DA-15), AAUI 10Mbit Ethernet (any AAUI Mac dongle will work), and the external SCSI bus DB-25. Six PCI slots are available. A second keylock secures the logic board which is on a slide-out drawer accessed with the two handles. Both rear panels have their own fans which are hot-swappable as well. Apple included a monitor dongle in the box.\nIt is also worth noting here that the onboard video is a Cirrus Logic 54M30, also unique to the ANS, and likewise also used in no other Apple product. We'll be coming back to this point too.\nParenthetically, here are the keylocks (new replacements in my part box). They are wafer-lock keys of the same type used in the Quadra 950, Apple Workgroup Server 95 and Workgroup Server 9150. As sold Network Servers came with three keys, one front, one back and one spare, but they are all interchangeable. These keys have a small three-digit code engraved into the metal identifying the lock they are designed to fit.\nI also got out a lot of parts from storage just in case they were needed, some of which were in the 700 and some of which were separate. Besides my two boxes of tricks, I also pulled out a spare logic board, five boxes of RAM upgrade kits (these are only 16MB each, though, so this isn't as much memory as you'd think), a 200MHz CPU upgrade kit, several more loose CPUs I also have, and a RAID card just for fun.\nI dimly recalled the machine may not have been working right when I committed it to storage, but we'll proceed as if it had been, starting with a visual inspection of the electronics.\nThe keylock on the logic board drawer (shown here with the rear panel off so you can see how it operates) has just two positions. In the horizontal locked position, the board is connected to power and a metal tab prevents the drawer from coming out. In the vertical unlocked position, the board is disconnected and the tab is moved away from the chassis so the drawer can be pulled free. We turn the rear key, grab the handles and pull the board drawer out.\nThis is the logic board (the spare in the bag). It has a broadly similar layout to other six-slot Power Macs and has many of the same chips, including a Grand Central (labeled I/O CNTRL, near the Cirrus Logic video ASIC), CURIO (labeled SCSI/ENET) and two Bandits (labeled as PCI BRIDGEs). However, it only has eight RAM DIMM slots instead of the 9500's twelve, and most of the system connections are consolidated into a single card edge at the top and a large power connector at the bottom. There are separate slots for the ROM DIMM, the CPU daughtercard and the L2 cache. Headers handle both internal SCSI busses, the mainboard fan and the rear keylock. A small red CUDA reset button is at the top left.\nInstalled, the board sits in front of the mainboard fan which is primarily used to cool the CPU daughtercard. This daughtercard rides in plastic rails that serve as alignment guides and structural support. Tabs and a couple mounting screws hold the logic board in place in the drawer. The tabs, card rails and much of the drawer itself are unfortunately made from Amelioplastic, but this drawer is thick and not normally exposed to the exterior, and it mercifully remains in good physical condition. Note that when the drawer is open, the board is completely ungrounded, so only handle it with antistatic precautions.\nI never store machines with their PRAM batteries installed (especially since my Shiner ESB prototype had been ruined by the previous owner doing so, during which time it leaked and corroded the logic board), but in this particular case since we will be messing with the system it is easier to reset the logic board if we never install the battery at all. With the machine unplugged, the battery out and the rear key unlocked (horizontal), the board will be completely depowered and will reset in about three minutes or so.\nThe CPU card is much larger than the ones used in most other PCI Power Macs and was intended to accommodate a dual-processor SMP option which was never sold, though again some prototypes have escaped (I would love to get one). Unfortunately this means that Power Mac CPU cards can't upgrade an ANS and the highest-speed option is the 200MHz 604e card shown here, but any ANS CPU card will work in any ANS, so\nstockholm\nalso has a 200MHz card. Bus speed and CPU speed are related: the 132MHz (base 500) and 176MHz 604 cards run the bus at 44MHz, but the 150MHz 604 (base 700) and 200MHz 604e cards run the bus at 50MHz.\nAt the top is the 700's standard 1MB L2 cache (the 500 came with 512K). These are allegedly regular Power Mac caches, and a Network Server 1MB cache should work in other Power Macs, but the 500 kernel-panicked with a Sonnet L2 cache upgrade and I eventually had to chase down a 1MB card pulled from another 700.\nBehind that is the ROM stick and the centrepiece of this article. They are not always labeled — one of my spares isn't — but when they are, the standard production ROM is part 341-0833. It is a regular 4MB ROM like other Old World Macs. We're going to test this machine with that before we go installing the others.\nTo get a test report will require a minimum amount of RAM. The ANS uses the same 168-pin DIMMs as other Power Macs and can accept up to 512MB (anything greater is not supported by the memory controller), but uniquely needs 60ns\nparity\nRAM for highest performance. If\nany\nDIMM is not parity, then the system ROM disables parity for\nall\nDIMMs\nand\nsets the timing to 70ns, even if the RAM is faster. This is a non-trivial hit, especially at the fastest 50MHz bus speed, so you really want parity if you can get it. Here I'm using parity FPM, which was sold standard in the units (all units came with at least 32MB in two 16MB DIMMs) and in upgrade kits (16MB in two 8MB DIMMs), all manufactured by IBM as OEM under contract and sold at typically exorbitant Apple prices.\nLater on 64MB and 128MB parity DIMMs became available and\nstockholm\nhas a full 512MB from eight 64MB parity sticks. RAM need not be installed in pairs, though this is preferred as the ANS supports interleaving. While EDO RAM should "just work" (treated as FPM), I've never tried parity EDO in an ANS. We'll put in two IBM 16MB parity FPM DIMMs to equal the base 32MB.\nWith the drawer closed and the rear key locked, we plug in the server (no drives attached yet), turn the front key to service, and then press the front power button to get ... a mostly blank front LCD instead of startup messages.\nHaving worked with these beasts for decades, this appearance — a backlit LCD with a mostly blank or dark block display — almost certainly indicates a problem with the processor card, because enough of the logic board is working to power on the front panel but the CPU isn't running. Typically this is because the processor wormed itself out of the board and needs to be reseated, but you can also get something like this if the card went bad, and less commonly if the ROM stick isn't installed correctly.\nHowever (moving the monitor cord out of the way), we have a problem: we can't get the drawer to open wide enough to pull out and reseat the CPU card. We'll have to take the drawer off.\nAs usual, removing the drawer is relatively easy (it's getting it back on that's the trick). Two plastic latches on the underside of the drawer, fortunately still also in good nick, slip into two gaps in the metal slide rails. Supporting the drawer with your other hand so it doesn't fall off, push each latch in and push back the rail to disengage it.\nThe drawer then lifts off and can be put aside, preferably onto an antistatic mat.\nHere's the inside, where the logic board connects. The powerplane connector is at the bottom. The board at the top is the right half of the mezzanine (codenamed "HENDY"), with the slot for the logic board's card edge and a connector for the front panel.\nThe mezz is a "horseshoe" that straddles both sides, better shown here with the top off. The other side has connectors for the NMI and reset buttons, floppy drive and SCSI busses.\nThose bus connectors come from the SCSI backplane on the other side, here with that panel off (which can now be removed because the drawer is out). Both the front (and in the 700, the rear) drive connectors hook up here. I'd forgotten I'd disconnected bus 1 when I stored it, so I later reconnected the cable to J11 before closing this back up. If you don't do this, besides drives not working, you may get spurious errors warning that the drive fan failed or is not present (see later on).\nThe problem with the sliding rails turned out to be two-fold, first some stuck broken pieces of plastic which I removed, and second whatever lubricant Apple had used which over the decades had desiccated into gluey, copper-coloured gunk. I cleaned off most of the ick and then used WD-40 white lithium (not regular WD-40) on the rails and worked it back and forth into the bearings. If it's good enough for your garage door opener, it's good enough for your unusual Apple server.\nAfter about ten minutes of spraying and sliding, both rails now move smoothly and reach their maximum extents. I was very careful to wipe off any excess so there wouldn't be a mess later.\nNow to remount the drawer. This is not well-explained in the official Apple service manual, so I'll be more explicit here. On each slide are two small metal hooks. If you don't see the hooks, pull the slides forward until you do.\nOn each slide, one of the hooks goes into a metal notch on the two metal rails mounted on the back of the drawer. On the top slide, the bottom hook engages; on the bottom slide, the top one does.\nOnce you've done that, then while using one hand to support the drawer, pull each slide forward until it engages with each of the black latches (it will click into position).\nNow we can pull the drawer all the way out, pull out the 200MHz card and try to reseat it using the card guides. You shouldn't need to force it in, though it does need a bit of grunt to ensure both rows of contacts get into the slot.\nClosing the drawer likewise doesn't require force\nper se\n, but the rear keylock will not turn unless you have the board fully engaged with the mezz and powerplane. There are thumbscrews but they don't really make much difference for this. Sometimes you have to slam it in a couple times, making sure the thumbscrews are completely loosened and out so that they don't get in the way. When the logic board is properly engaged and the drawer is fully closed, it should be easy to turn the rear key.\nUnfortunately reseating the processor card didn't fix it, so the next step is to try a different one.\nI'm saving the other 200MHz card as a spare for\nstockholm\n, but we have several 150MHz cards, so I selected one of those.\nAnd it starts up! We have messages on the LCD showing the 150MHz 604 (with 50MHz bus), 32MB of parity RAM and 1MB of L2 cache were all properly detected. The reported ROM version of 1.1.22 is consistent with production ROMs as shipped. If you connect to Port 2 on the rear at 9600bps during POST, you may see additional messages.\nSince the front key is in the service position, it goes into a service boot, first trying the CD (looking for a bootloader) and then looking for the file\ndiags\non a floppy disk. We have provided the machine with neither, and nothing else is available, so the server drops to an Open Firmware prompt.\nOpen Firmware is the boot environment for all Power Macs starting with the first beige PCI systems. Originating at Sun as OpenBoot, Open Firmware provides an interactive Forth interpreter, which is used for interpreting cross-platform FCode (bytecode) in device ROMs but can also be used for development, and makes available a built-in means of managing and storing settings for installed hardware. In Macs of this generation it was generally invisible to the user except if specifically enabled or requested — remember this for later as well — and the Apple Network Server was the earliest Power Mac (well, derived, anyway) system where Open Firmware was explicitly user-facing. Open Firmware survives today largely in the form of\nOpenBIOS\n.\nThe\ndiags\nfile in question could be theorically any XCOFF binary, but it's specifically looking for this, the Network Server Diagnostic Utility. This came on a floppy disk in the ANS accessory pack. We'll use the NSDU to check the rest of our configuration.\nWe could reboot the server, but we can just start it from the Open Firmware prompt directly with\nboot fd:diags\n. You can also see some of the system's current Open Firmware environment variables; we'll have much more to say about those when we finally get to experimenting with the ROMs. Sorry about the screen photographs but the default refresh rate does not agree with my VGA capture box.\nThe NSDU is also a single XCOFF binary. When it starts up it prints a summary of installed hardware and the results from initial POST. It has detected all RAM is parity, detected the CPU speed and internal L1, detected the external L2, detected both power supplies, and correctly shows installed RAM, no PCI cards, and most of the sensors. The only one that's wrong is the Drive Fan reads "Off" but that's because I hadn't remembered to reconnect the disconnected SCSI bus cable to the backplane. We'll now run the complete system test (option 3).\nThe tests scroll up on the screen, here showing the two internal SCSI controllers and the LCD. The video chip also gets exercised for conformance with various test displays.\nIn the end, we have a clean bill of health, both on the screen ...\n... and on the LCD. There's one more thing left to do to certify operation: a test boot of AIX from the CD.\nANS AIX, codenamed Harpoon, is specific to the Apple Network Server — you can't use a regular AIX CD, and installing Base Operating System packages from such a CD is likely to corrupt your install (don't ask me how I know this). Most systems shipped with this CD in the accessory pack, version 4.1.4.1. 4.1.2 was used on preproduction servers but I've never seen it myself. Apple later issued version 4.1.5, which fixed many bugs and is strongly recommended.\nBooting from the CD.\nThe LCD is live during an AIX boot, showing the march of AIX bootloader codes. They are the same codes as most IBM servers of this era.\nFinally, the AIX kernel comes up, asking to define the system console. This proves our hardware (and CD-ROM) both work and that its native AIX can start, which means any weird behaviour after this point is more likely than not due to what we're testing.\nWe're finally ready to begin. Let's enumerate the currently known Network Server ROMs. In these pre-Open Firmware 3 ROMs, the ROM version and the Open Firmware version are the same. For comparison purposes, PCI Power Macs of this era were typically 1.0.5.\nPre-production ROMs. Currently one version is known, 1.1.20.1. These were used to boot Mac OS and AIX (and possibly another operating system I'll mention), but the internal video and SCSI controllers are not supported in Mac OS. This was the version that turned out to be on my flash DIMM.\nProduction ROMs. Currently one version is known, 1.1.22. These only boot AIX, though systems with these ROMs can also boot NetBSD and certain Linux distributions. I won't talk further about that in this article, but if I were to use a non-AIX operating system on a production ANS, it would almost certainly be NetBSD even though it doesn't currently support internal video or the on-board Ethernet.\nPrototype Mac OS ROMs. Currently one version is known, 2.0. These contain ROM drivers for the internal video and SCSI controllers, and are the only known ROMs to fully support all internal devices in Mac OS. This is not currently in my possession — though I'd love to get one! — but at least one person has created replica ROMs from a dump graciously made available by their owner, and then used them to successfully boot their own machine.\nPrototype Windows NT ROMs. These ROMs also appear to be required for multiprocessor support. Currently three versions are known, 2.26b6, 2.26b8 (not dumped, referred to on the LinuxPPC-ANS list) and 2.26NT, with relatively small changes between them.\nThese ROMs differ primarily in what operating systems they will boot (and, underlyingly, features they add or remove) and devices they contain internal support for. Those differences can be glimpsed by looking at the Forth words the ROM defines and the packages (implemented as pseudo-devices) they carry. For example, here are the packages and devices in this 700 with the production 1.1.22 ROM. The exact addresses are irrelevant for our purposes here except for the addresses of the Bandit PCI bridges, the Hammerhead memory controller and the Toolbox ROM, which are fixed.\ndisk2:aix<a class="headerlink" href="#hands-on-with-two-apple-network-server-prototype-romsnn-httpsoldvcrblogspotcomn-httpsoldvcrblogspotcom202601hands-on-with-two-apple-network-serverhtmln-2026-01-25t000300000-0800nn-nngrateful-acknowledgement-made-to-the-several-former-apple-employees-who-materially-contributed-to-this-entry-this-article-wouldnt-have-been-possible-without-younheres-why-i-need-to-do-inventory-more-oftennthis-is-an-apple-prototype-rom-i-am-ashamed-to-admit-i-found-in-my-own-box-of-junk-from-various-apple-network-server-parts-someone-at-apple-austin-sent-me-in-2003-the-1996-apple-network-server-is-one-of-apples-more-noteworthy-white-elephants-and-to-date-the-last-non-macintosh-computer-ios-devices-notwithstanding-to-come-from-cupertino-best-known-for-being-about-the-size-of-a-generous-dorm-fridge-and-officially-only-running-aix-41-ibms-proprietary-unix-for-power-isanits-complicated-historynis-a-microcosm-of-some-of-apples-strangest-days-during-the-mid-1990s-at-10000-a-pop-in-2026-dollars-over-20700-not-counting-the-aix-license-they-sold-poorly-and-were-among-the-first-products-on-the-chopping-block-when-steve-jobs-returned-in-1997nstockholmn-my-own-apple-network-server-500-was-a-castoff-i-got-in-1998-practically-new-when-the-university-bookstores-vendor-wouldnt-support-the-hardware-and-it-got-surplused-it-was-the-first-unix-server-i-ever-owned-personally-over-the-years-i-ended-up-installing-nearly-every-available-upgrade-and-it-ran-floodgapcom-just-about-nonstop-until-i-replaced-it-with-a-power6-in-2012-for-which-it-still-functions-as-an-emergency-reserve-plus-as-the-university-was-still-running-rs6000-systems-back-then-i-had-ready-access-to-tons-of-aix-software-which-the-ans-ran-flawlessly-it-remains-one-of-the-jewels-of-my-collectionnso-whennthe-mythical-ans-macos-rom-finally-surfacedn-i-wasnveryninterested-there-had-always-been-interest-in-getting-the-ans-to-run-macos-back-in-the-day-i-remember-wasting-an-afternoon-trying-with-a-mac-os-8-cd-and-it-was-a-poorly-kept-secret-that-at-various-points-in-its-development-it-could-given-its-hardware-basis-as-a-heavily-modified-power-macintosh-9500-apple-itself-perceived-this-interest-even-demonstrating-it-with-mac-os-prior-to-its-release-and-leading-then-cto-ellen-hancock-to-later-announce-that-the-ans-would-get-rom-upgrades-to-allow-it-to-run-both-regular-mac-os-and-in-a-shock-to-the-industry-windows-nt-this-would-have-made-the-ans-the-first-and-only-apple-machine-ever-sold-to-support-itnwell-guess-what-this-isnthatnpre-production-rom-apple-originally-used-to-demonstrate-mac-os-and-another-individual-has-stepped-up-with-the-nt-roms-which-are-also-now-in-my-possession-however-at-that-time-it-wasnt-clear-what-the-prototype-rom-stick-was-just-a-whole-bunch-of-flash-chips-on-a-power-mac-rom-dimm-which-my-apple-contacts-tell-me-was-used-to-develop-many-other-machines-at-the-time-and-there-was-no-way-i-was-sticking-it-into-my-beloved-production-500-but-we-have-a-solution-for-that-network-servers-came-in-three-sizes-the-rackmount-ans-300-deep-dish-which-was-never-released-except-for-a-small-number-of-prototypes-the-baseline-ans-500-shiner-le-and-the-highest-tier-ans-700-shiner-he-which-added-more-drive-bays-and-redundant-hot-swappable-power-suppliesnwhich-brings-us-tonthisnmachinenmeetnholmstockn-my-network-server-700-and-the-second-ans-in-my-collection-the-third-is-my-non-functionalnshiner-esb-prototypen-this-was-a-ship-of-theseus-that-my-friend-cb-and-i-assembled-out-of-two-partially-working-but-rather-thrashed-700s-we-got-for-come-and-get-them-in-august-2003-it-served-asnstockholmns-body-double-for-a-number-of-years-untilnstockholmnwas-retired-andnholmstocknwent-into-cold-storage-as-a-holding-bay-for-spare-parts-this-makes-it-the-perfect-system-to-try-a-dodgy-rom-innill-give-you-a-spoiler-now-it-turns-out-the-nt-rom-isnt-enough-to-install-windows-nt-by-itself-even-though-it-has-some-interesting-attributes-sadly-this-was-not-unexpected-but-the-pre-production-rom-does-work-to-boot-mac-os-albeit-with-apparent-bugs-and-an-injection-of-extra-hardware-lets-get-the-700-running-again-call-it-a-refurb-weekend-and-show-the-processnthe-700-weighs-around-85-pounds-unloaded-and-is-exactly-like-trying-to-cram-a-refrigerator-into-the-backseat-of-your-car-in-this-case-my-honda-civic-si-while-it-does-have-wheels-on-the-bottom-even-the-good-ones-dont-have-a-great-turning-radius-and-these-arent-good-and-getting-it-in-and-out-of-the-car-unavoidably-means-having-to-pick-it-up-lift-with-your-knees-not-with-your-backnpreparing-the-700-for-testingnthis-section-is-basically-a-cloaked-refurb-weekend-but-even-if-youre-familiar-with-ans-guts-im-going-to-point-out-a-few-specific-things-relevant-to-rom-support-as-we-go-along-we-want-this-machine-as-ship-shape-as-we-can-get-it-so-that-accurate-observations-can-be-made-for-posterityni-would-also-like-to-thank-my-wife-who-chose-to-politely-ignore-the-new-noisy-beast-hulking-in-the-living-room-for-a-few-daysncontinuing-in-the-fridge-motif-the-500-and-700-have-a-front-keylock-controlling-a-sliding-door-along-with-a-unique-4-line-lcd-which-displays-boot-information-and-can-be-used-as-an-output-device-in-aix-and-other-operating-systems-unlike-my-very-minimally-yellowed-500-which-has-spent-most-of-its-life-in-quiet-smoke-free-server-rooms-this-one-seemed-to-have-gotten-a-bit-more-sun-fortunately-most-of-the-chassis-is-painted-metal-which-is-also-where-most-of-the-weight-comes-from-the-keylock-position-on-power-up-is-noted-by-the-firmware-the-leftmost-is-the-service-setting-the-middle-is-a-normal-boot-and-the-rightmost-locked-position-puts-the-machine-into-a-power-failsafe-modenthe-sliding-door-covers-seven-front-drive-bays-normally-one-with-a-cd-rom-one-with-some-sort-of-tape-drive-typically-a-datdds-drive-but-a-few-have-8mm-tape-instead-both-the-same-drives-as-sold-for-the-workgroup-server-95-and-9150-and-the-rest-various-hard-drives-which-can-be-either-independent-or-connected-into-an-optional-raid-the-700-can-take-two-more-drives-in-a-rear-bracket-although-i-have-the-raid-card-i-never-ended-up-installing-it-since-a-single-drive-was-more-than-sufficient-for-what-i-was-using-it-for-as-most-of-the-drive-trays-and-both-drive-brackets-had-been-removed-from-the-two-donor-700s-used-to-assemblenholmstockn-i-ended-up-just-keeping-a-cd-rom-and-two-trays-and-used-the-other-open-space-for-storagenat-the-top-are-the-nmi-reset-and-power-buttons-plus-a-standard-mac-floppy-drivenit-is-worth-noting-here-that-the-internal-bays-are-all-serviced-by-two-symbios-logic-53c825a-controllers-providing-two-fast-wide-scsi-busses-running-at-20mbs-unlike-the-typical-power-mac-mesh-10mbs-controller-the-ans-internal-scsi-controllers-are-unique-to-the-ans-and-appear-in-no-other-apple-product-remember-this-for-later-a-second-external-scsi-bus-is-available-on-the-rear-using-the-same-slower-5mbs-curio-scsiethernetserial-combo-chip-as-other-contemporary-power-macs-and-implementing-an-ncr-53c94nthe-rear-with-the-monitor-power-cable-photobombing-the-shot-is-much-less-yellowed-ports-are-here-for-audio-in-and-out-standardnawacsn-adb-two-beige-mac-minidin-8-serial-ports-vga-oddly-but-happily-a-conventional-hdi-15-not-apples-traditional-da-15-aaui-10mbit-ethernet-any-aaui-mac-dongle-will-work-and-the-external-scsi-bus-db-25-six-pci-slots-are-available-a-second-keylock-secures-the-logic-board-which-is-on-a-slide-out-drawer-accessed-with-the-two-handles-both-rear-panels-have-their-own-fans-which-are-hot-swappable-as-well-apple-included-a-monitor-dongle-in-the-boxnit-is-also-worth-noting-here-that-the-onboard-video-is-a-cirrus-logic-54m30-also-unique-to-the-ans-and-likewise-also-used-in-no-other-apple-product-well-be-coming-back-to-this-point-toonparenthetically-here-are-the-keylocks-new-replacements-in-my-part-box-they-are-wafer-lock-keys-of-the-same-type-used-in-the-quadra-950-apple-workgroup-server-95-and-workgroup-server-9150-as-sold-network-servers-came-with-three-keys-one-front-one-back-and-one-spare-but-they-are-all-interchangeable-these-keys-have-a-small-three-digit-code-engraved-into-the-metal-identifying-the-lock-they-are-designed-to-fitni-also-got-out-a-lot-of-parts-from-storage-just-in-case-they-were-needed-some-of-which-were-in-the-700-and-some-of-which-were-separate-besides-my-two-boxes-of-tricks-i-also-pulled-out-a-spare-logic-board-five-boxes-of-ram-upgrade-kits-these-are-only-16mb-each-though-so-this-isnt-as-much-memory-as-youd-think-a-200mhz-cpu-upgrade-kit-several-more-loose-cpus-i-also-have-and-a-raid-card-just-for-funni-dimly-recalled-the-machine-may-not-have-been-working-right-when-i-committed-it-to-storage-but-well-proceed-as-if-it-had-been-starting-with-a-visual-inspection-of-the-electronicsnthe-keylock-on-the-logic-board-drawer-shown-here-with-the-rear-panel-off-so-you-can-see-how-it-operates-has-just-two-positions-in-the-horizontal-locked-position-the-board-is-connected-to-power-and-a-metal-tab-prevents-the-drawer-from-coming-out-in-the-vertical-unlocked-position-the-board-is-disconnected-and-the-tab-is-moved-away-from-the-chassis-so-the-drawer-can-be-pulled-free-we-turn-the-rear-key-grab-the-handles-and-pull-the-board-drawer-outnthis-is-the-logic-board-the-spare-in-the-bag-it-has-a-broadly-similar-layout-to-other-six-slot-power-macs-and-has-many-of-the-same-chips-including-a-grand-central-labeled-io-cntrl-near-the-cirrus-logic-video-asic-curio-labeled-scsienet-and-two-bandits-labeled-as-pci-bridges-however-it-only-has-eight-ram-dimm-slots-instead-of-the-9500s-twelve-and-most-of-the-system-connections-are-consolidated-into-a-single-card-edge-at-the-top-and-a-large-power-connector-at-the-bottom-there-are-separate-slots-for-the-rom-dimm-the-cpu-daughtercard-and-the-l2-cache-headers-handle-both-internal-scsi-busses-the-mainboard-fan-and-the-rear-keylock-a-small-red-cuda-reset-button-is-at-the-top-leftninstalled-the-board-sits-in-front-of-the-mainboard-fan-which-is-primarily-used-to-cool-the-cpu-daughtercard-this-daughtercard-rides-in-plastic-rails-that-serve-as-alignment-guides-and-structural-support-tabs-and-a-couple-mounting-screws-hold-the-logic-board-in-place-in-the-drawer-the-tabs-card-rails-and-much-of-the-drawer-itself-are-unfortunately-made-from-amelioplastic-but-this-drawer-is-thick-and-not-normally-exposed-to-the-exterior-and-it-mercifully-remains-in-good-physical-condition-note-that-when-the-drawer-is-open-the-board-is-completely-ungrounded-so-only-handle-it-with-antistatic-precautionsni-never-store-machines-with-their-pram-batteries-installed-especially-since-my-shiner-esb-prototype-had-been-ruined-by-the-previous-owner-doing-so-during-which-time-it-leaked-and-corroded-the-logic-board-but-in-this-particular-case-since-we-will-be-messing-with-the-system-it-is-easier-to-reset-the-logic-board-if-we-never-install-the-battery-at-all-with-the-machine-unplugged-the-battery-out-and-the-rear-key-unlocked-horizontal-the-board-will-be-completely-depowered-and-will-reset-in-about-three-minutes-or-sonthe-cpu-card-is-much-larger-than-the-ones-used-in-most-other-pci-power-macs-and-was-intended-to-accommodate-a-dual-processor-smp-option-which-was-never-sold-though-again-some-prototypes-have-escaped-i-would-love-to-get-one-unfortunately-this-means-that-power-mac-cpu-cards-cant-upgrade-an-ans-and-the-highest-speed-option-is-the-200mhz-604e-card-shown-here-but-any-ans-cpu-card-will-work-in-any-ans-sonstockholmnalso-has-a-200mhz-card-bus-speed-and-cpu-speed-are-related-the-132mhz-base-500-and-176mhz-604-cards-run-the-bus-at-44mhz-but-the-150mhz-604-base-700-and-200mhz-604e-cards-run-the-bus-at-50mhznat-the-top-is-the-700s-standard-1mb-l2-cache-the-500-came-with-512k-these-are-allegedly-regular-power-mac-caches-and-a-network-server-1mb-cache-should-work-in-other-power-macs-but-the-500-kernel-panicked-with-a-sonnet-l2-cache-upgrade-and-i-eventually-had-to-chase-down-a-1mb-card-pulled-from-another-700nbehind-that-is-the-rom-stick-and-the-centrepiece-of-this-article-they-are-not-always-labeled-one-of-my-spares-isnt-but-when-they-are-the-standard-production-rom-is-part-341-0833-it-is-a-regular-4mb-rom-like-other-old-world-macs-were-going-to-test-this-machine-with-that-before-we-go-installing-the-othersnto-get-a-test-report-will-require-a-minimum-amount-of-ram-the-ans-uses-the-same-168-pin-dimms-as-other-power-macs-and-can-accept-up-to-512mb-anything-greater-is-not-supported-by-the-memory-controller-but-uniquely-needs-60nsnparitynram-for-highest-performance-ifnanyndimm-is-not-parity-then-the-system-rom-disables-parity-fornallndimmsnandnsets-the-timing-to-70ns-even-if-the-ram-is-faster-this-is-a-non-trivial-hit-especially-at-the-fastest-50mhz-bus-speed-so-you-really-want-parity-if-you-can-get-it-here-im-using-parity-fpm-which-was-sold-standard-in-the-units-all-units-came-with-at-least-32mb-in-two-16mb-dimms-and-in-upgrade-kits-16mb-in-two-8mb-dimms-all-manufactured-by-ibm-as-oem-under-contract-and-sold-at-typically-exorbitant-apple-pricesnlater-on-64mb-and-128mb-parity-dimms-became-available-andnstockholmnhas-a-full-512mb-from-eight-64mb-parity-sticks-ram-need-not-be-installed-in-pairs-though-this-is-preferred-as-the-ans-supports-interleaving-while-edo-ram-should-just-work-treated-as-fpm-ive-never-tried-parity-edo-in-an-ans-well-put-in-two-ibm-16mb-parity-fpm-dimms-to-equal-the-base-32mbnwith-the-drawer-closed-and-the-rear-key-locked-we-plug-in-the-server-no-drives-attached-yet-turn-the-front-key-to-service-and-then-press-the-front-power-button-to-get-a-mostly-blank-front-lcd-instead-of-startup-messagesnhaving-worked-with-these-beasts-for-decades-this-appearance-a-backlit-lcd-with-a-mostly-blank-or-dark-block-display-almost-certainly-indicates-a-problem-with-the-processor-card-because-enough-of-the-logic-board-is-working-to-power-on-the-front-panel-but-the-cpu-isnt-running-typically-this-is-because-the-processor-wormed-itself-out-of-the-board-and-needs-to-be-reseated-but-you-can-also-get-something-like-this-if-the-card-went-bad-and-less-commonly-if-the-rom-stick-isnt-installed-correctlynhowever-moving-the-monitor-cord-out-of-the-way-we-have-a-problem-we-cant-get-the-drawer-to-open-wide-enough-to-pull-out-and-reseat-the-cpu-card-well-have-to-take-the-drawer-offnas-usual-removing-the-drawer-is-relatively-easy-its-getting-it-back-on-thats-the-trick-two-plastic-latches-on-the-underside-of-the-drawer-fortunately-still-also-in-good-nick-slip-into-two-gaps-in-the-metal-slide-rails-supporting-the-drawer-with-your-other-hand-so-it-doesnt-fall-off-push-each-latch-in-and-push-back-the-rail-to-disengage-itnthe-drawer-then-lifts-off-and-can-be-put-aside-preferably-onto-an-antistatic-matnheres-the-inside-where-the-logic-board-connects-the-powerplane-connector-is-at-the-bottom-the-board-at-the-top-is-the-right-half-of-the-mezzanine-codenamed-hendy-with-the-slot-for-the-logic-boards-card-edge-and-a-connector-for-the-front-panelnthe-mezz-is-a-horseshoe-that-straddles-both-sides-better-shown-here-with-the-top-off-the-other-side-has-connectors-for-the-nmi-and-reset-buttons-floppy-drive-and-scsi-bussesnthose-bus-connectors-come-from-the-scsi-backplane-on-the-other-side-here-with-that-panel-off-which-can-now-be-removed-because-the-drawer-is-out-both-the-front-and-in-the-700-the-rear-drive-connectors-hook-up-here-id-forgotten-id-disconnected-bus-1-when-i-stored-it-so-i-later-reconnected-the-cable-to-j11-before-closing-this-back-up-if-you-dont-do-this-besides-drives-not-working-you-may-get-spurious-errors-warning-that-the-drive-fan-failed-or-is-not-present-see-later-onnthe-problem-with-the-sliding-rails-turned-out-to-be-two-fold-first-some-stuck-broken-pieces-of-plastic-which-i-removed-and-second-whatever-lubricant-apple-had-used-which-over-the-decades-had-desiccated-into-gluey-copper-coloured-gunk-i-cleaned-off-most-of-the-ick-and-then-used-wd-40-white-lithium-not-regular-wd-40-on-the-rails-and-worked-it-back-and-forth-into-the-bearings-if-its-good-enough-for-your-garage-door-opener-its-good-enough-for-your-unusual-apple-servernafter-about-ten-minutes-of-spraying-and-sliding-both-rails-now-move-smoothly-and-reach-their-maximum-extents-i-was-very-careful-to-wipe-off-any-excess-so-there-wouldnt-be-a-mess-laternnow-to-remount-the-drawer-this-is-not-well-explained-in-the-official-apple-service-manual-so-ill-be-more-explicit-here-on-each-slide-are-two-small-metal-hooks-if-you-dont-see-the-hooks-pull-the-slides-forward-until-you-donon-each-slide-one-of-the-hooks-goes-into-a-metal-notch-on-the-two-metal-rails-mounted-on-the-back-of-the-drawer-on-the-top-slide-the-bottom-hook-engages-on-the-bottom-slide-the-top-one-doesnonce-youve-done-that-then-while-using-one-hand-to-support-the-drawer-pull-each-slide-forward-until-it-engages-with-each-of-the-black-latches-it-will-click-into-positionnnow-we-can-pull-the-drawer-all-the-way-out-pull-out-the-200mhz-card-and-try-to-reseat-it-using-the-card-guides-you-shouldnt-need-to-force-it-in-though-it-does-need-a-bit-of-grunt-to-ensure-both-rows-of-contacts-get-into-the-slotnclosing-the-drawer-likewise-doesnt-require-forcenper-sen-but-the-rear-keylock-will-not-turn-unless-you-have-the-board-fully-engaged-with-the-mezz-and-powerplane-there-are-thumbscrews-but-they-dont-really-make-much-difference-for-this-sometimes-you-have-to-slam-it-in-a-couple-times-making-sure-the-thumbscrews-are-completely-loosened-and-out-so-that-they-dont-get-in-the-way-when-the-logic-board-is-properly-engaged-and-the-drawer-is-fully-closed-it-should-be-easy-to-turn-the-rear-keynunfortunately-reseating-the-processor-card-didnt-fix-it-so-the-next-step-is-to-try-a-different-onenim-saving-the-other-200mhz-card-as-a-spare-fornstockholmn-but-we-have-several-150mhz-cards-so-i-selected-one-of-thosenand-it-starts-up-we-have-messages-on-the-lcd-showing-the-150mhz-604-with-50mhz-bus-32mb-of-parity-ram-and-1mb-of-l2-cache-were-all-properly-detected-the-reported-rom-version-of-1122-is-consistent-with-production-roms-as-shipped-if-you-connect-to-port-2-on-the-rear-at-9600bps-during-post-you-may-see-additional-messagesnsince-the-front-key-is-in-the-service-position-it-goes-into-a-service-boot-first-trying-the-cd-looking-for-a-bootloader-and-then-looking-for-the-filendiagsnon-a-floppy-disk-we-have-provided-the-machine-with-neither-and-nothing-else-is-available-so-the-server-drops-to-an-open-firmware-promptnopen-firmware-is-the-boot-environment-for-all-power-macs-starting-with-the-first-beige-pci-systems-originating-at-sun-as-openboot-open-firmware-provides-an-interactive-forth-interpreter-which-is-used-for-interpreting-cross-platform-fcode-bytecode-in-device-roms-but-can-also-be-used-for-development-and-makes-available-a-built-in-means-of-managing-and-storing-settings-for-installed-hardware-in-macs-of-this-generation-it-was-generally-invisible-to-the-user-except-if-specifically-enabled-or-requested-remember-this-for-later-as-well-and-the-apple-network-server-was-the-earliest-power-mac-well-derived-anyway-system-where-open-firmware-was-explicitly-user-facing-open-firmware-survives-today-largely-in-the-form-ofnopenbiosnnthendiagsnfile-in-question-could-be-theorically-any-xcoff-binary-but-its-specifically-looking-for-this-the-network-server-diagnostic-utility-this-came-on-a-floppy-disk-in-the-ans-accessory-pack-well-use-the-nsdu-to-check-the-rest-of-our-configurationnwe-could-reboot-the-server-but-we-can-just-start-it-from-the-open-firmware-prompt-directly-withnboot-fddiagsn-you-can-also-see-some-of-the-systems-current-open-firmware-environment-variables-well-have-much-more-to-say-about-those-when-we-finally-get-to-experimenting-with-the-roms-sorry-about-the-screen-photographs-but-the-default-refresh-rate-does-not-agree-with-my-vga-capture-boxnthe-nsdu-is-also-a-single-xcoff-binary-when-it-starts-up-it-prints-a-summary-of-installed-hardware-and-the-results-from-initial-post-it-has-detected-all-ram-is-parity-detected-the-cpu-speed-and-internal-l1-detected-the-external-l2-detected-both-power-supplies-and-correctly-shows-installed-ram-no-pci-cards-and-most-of-the-sensors-the-only-one-thats-wrong-is-the-drive-fan-reads-off-but-thats-because-i-hadnt-remembered-to-reconnect-the-disconnected-scsi-bus-cable-to-the-backplane-well-now-run-the-complete-system-test-option-3nthe-tests-scroll-up-on-the-screen-here-showing-the-two-internal-scsi-controllers-and-the-lcd-the-video-chip-also-gets-exercised-for-conformance-with-various-test-displaysnin-the-end-we-have-a-clean-bill-of-health-both-on-the-screen-n-and-on-the-lcd-theres-one-more-thing-left-to-do-to-certify-operation-a-test-boot-of-aix-from-the-cdnans-aix-codenamed-harpoon-is-specific-to-the-apple-network-server-you-cant-use-a-regular-aix-cd-and-installing-base-operating-system-packages-from-such-a-cd-is-likely-to-corrupt-your-install-dont-ask-me-how-i-know-this-most-systems-shipped-with-this-cd-in-the-accessory-pack-version-4141-412-was-used-on-preproduction-servers-but-ive-never-seen-it-myself-apple-later-issued-version-415-which-fixed-many-bugs-and-is-strongly-recommendednbooting-from-the-cdnthe-lcd-is-live-during-an-aix-boot-showing-the-march-of-aix-bootloader-codes-they-are-the-same-codes-as-most-ibm-servers-of-this-eranfinally-the-aix-kernel-comes-up-asking-to-define-the-system-console-this-proves-our-hardware-and-cd-rom-both-work-and-that-its-native-aix-can-start-which-means-any-weird-behaviour-after-this-point-is-more-likely-than-not-due-to-what-were-testingnwere-finally-ready-to-begin-lets-enumerate-the-currently-known-network-server-roms-in-these-pre-open-firmware-3-roms-the-rom-version-and-the-open-firmware-version-are-the-same-for-comparison-purposes-pci-power-macs-of-this-era-were-typically-105npre-production-roms-currently-one-version-is-known-11201-these-were-used-to-boot-mac-os-and-aix-and-possibly-another-operating-system-ill-mention-but-the-internal-video-and-scsi-controllers-are-not-supported-in-mac-os-this-was-the-version-that-turned-out-to-be-on-my-flash-dimmnproduction-roms-currently-one-version-is-known-1122-these-only-boot-aix-though-systems-with-these-roms-can-also-boot-netbsd-and-certain-linux-distributions-i-wont-talk-further-about-that-in-this-article-but-if-i-were-to-use-a-non-aix-operating-system-on-a-production-ans-it-would-almost-certainly-be-netbsd-even-though-it-doesnt-currently-support-internal-video-or-the-on-board-ethernetnprototype-mac-os-roms-currently-one-version-is-known-20-these-contain-rom-drivers-for-the-internal-video-and-scsi-controllers-and-are-the-only-known-roms-to-fully-support-all-internal-devices-in-mac-os-this-is-not-currently-in-my-possession-though-id-love-to-get-one-but-at-least-one-person-has-created-replica-roms-from-a-dump-graciously-made-available-by-their-owner-and-then-used-them-to-successfully-boot-their-own-machinenprototype-windows-nt-roms-these-roms-also-appear-to-be-required-for-multiprocessor-support-currently-three-versions-are-known-226b6-226b8-not-dumped-referred-to-on-the-linuxppc-ans-list-and-226nt-with-relatively-small-changes-between-themnthese-roms-differ-primarily-in-what-operating-systems-they-will-boot-and-underlyingly-features-they-add-or-remove-and-devices-they-contain-internal-support-for-those-differences-can-be-glimpsed-by-looking-at-the-forth-words-the-rom-defines-and-the-packages-implemented-as-pseudo-devices-they-carry-for-example-here-are-the-packages-and-devices-in-this-700-with-the-production-1122-rom-the-exact-addresses-are-irrelevant-for-our-purposes-here-except-for-the-addresses-of-the-bandit-pci-bridges-the-hammerhead-memory-controller-and-the-toolbox-rom-which-are-fixedndisk2aix" title="Permanent link">&para;</a></h1>
<p>Device isn't there! can't OPEN: /bandit/53c825@11/sd@2,0:aixOpenFirmware1.1.22
To continue booting from the default boot device type:
BOOT<return>
 ok
0 &gt; dev /  ok
0 &gt; ls 
004308E0: /PowerPC,604@0
00430B90:   /l2-cache@0,0
004313F0: /chosen@0
00431520: /memory@0
00431668: /openprom@0
00431728: /AAPL,ROM@FFC00000
00431968: /options@0
00431E40: /aliases@0
00432080: /packages@0
00432108:   /deblocker@0,0
004329A8:   /disk-label@0,0
00432F18:   /obp-tftp@0,0
00435B28:   /mac-files@0,0
00436410:   /mac-parts@0,0
00436D30:   /aix-boot@0,0
00437488:   /fat-files@0,0
00438DF0:   /iso-9660-files@0,0
004398E0:   /xcoff-loader@0,0
0043A410:   /terminal-emulator@0,0
0043A4A8: /bandit@F2000000
0043B500:   /53c825@11
0043DDE0:     /sd@0,0
0043EA48:     /st@0,0
0043F8A8:   /53c825@12
00442188:     /sd@0,0
00442DF0:     /st@0,0
00444288:   /gc@10
004446C0:     /53c94@10000
00446460:       /sd@0,0
00447248:       /st@0,0
004480C8:     /mace@11000
00449248:     /escc@13000
004493A0:       /ch-a@13020
00449AD8:       /ch-b@13000
0044A210:     /awacs@14000
0044A2F8:     /swim3@15000
0044BB88:     /via-cuda@16000
0044D088:       /adb@0,0
0044D178:         /keyboard@0,0
0044D950:         /mouse@1,0
0044DA00:       /pram@0,0
0044DAB0:       /rtc@0,0
0044DFE0:       /power-mgt@0,0
0044E1B8:     /nvram@1D000
00462BC8:     /lcd@1C000
00450780:   /pci106b,1@B
00450958:   /54m30@F
0044E7D0: /bandit@F4000000
00462350:   /pci106b,1@B
0044FF28: /hammerhead@F8000000
 ok
0 &gt;\nWe'll do the first and last of these in the remainder of this article. Since the Bible says the first shall be last and the last first, let's begin with the\nfinal\nknown ANS ROM, 2.26NT.\n2.26NT Windows NT ROMs\nHancock's late 1996 announcement that the Apple Network Server would optionally run Windows NT caught many industry observers by surprise. Although NT 3.x and 4.x were designed to be architecture-independent and ran on processors as diverse as MIPS and DEC Alpha as well as 32-bit x86, the PowerPC build had been limited to low-volume IBM hardware and never officially ran on Power Macs. Still, it was clear to Apple that NT would be very important in the industry and felt supporting it would broaden the appeal of the server line — or at least soften the impact of its sticker price. Importantly, NT support would not have to wait for Apple's then-expected CHRP Power Macs: reworked ROM support could enable the ANS to boot it "now." (In the end, Jobs eventually scuttled the CHRP initiative to starve the Mac clones; the upcoming New World Macs were ultimately an incompatible blend of CHRP and the earlier PReP standard instead.)\nWhen Jobs talked Gil Amelio into canning the ANS as well, the ROM initiative naturally went out the window with it. However, while the existing 2.0 Mac OS ROMs are only known on an unmarked development flash stick similar to mine, these final 2.26NT ROMs appear almost production-ready with fully printed labels, suggesting they had reached a very late stage of development. (The "ESB" tag indicates a prototype designation — consistent with Shiner, the ANS'\nbeer-themed codename during development\n, ESB stands for "Extra Special Bitter.")\nThese ROMs were kindly sent to me by a former Apple employee at the Elk Grove, CA campus. Sadly this person no longer has the 700 they were running in, but attests to the fact NT did run and apparently even ran well, adding, "I’m pretty certain that the NT ROM was the Apple business systems team trying to find a way to keep their product from being canceled completely. Motorola had just shipped their PowerStack NT machines a few months previously and they were garbage compared to the ANS when it came to field service and expandability." (So true!)\nThe NT ROM DIMM simply replaces the production ROM DIMM in the slot. We'll power it up with the front key set to service just in case.\nOn the LCD, not only is the version displayed, but as mentioned this is also one of the ROMs that checks for a second CPU (if we had one of the prototype dual-CPU cards, that is — contact me, I'm interested if you've got one to get rid of!).\nOur first order of business is to immediately dump these ROMs for posterity (they are posted on\nthe group thread at Tinker Different\n). This can be done without a chip reader by having Open Firmware itself dump the contents in hex over one of the serial ports, and then post-processing the resulting output.\nWe start by switching the console to a serial port using\nsetenv input-device ttya:57600\nand\nsetenv output-device ttya:57600\n(\nttya\nis port 2 on the back) followed by\nreset-all\nto commit the settings. Then, on a connected terminal program at 57600bps capturing the output (I did something like\npicocom -b57600 /dev/cu.usbserial-10 | tee out\n), you can either enter\nh# ffc00000 h# 00400000 dump\nwhich dumps the contents with the addresses, or if you don't need those, you can try something faster but a little more complicated like (suggested by @joevt)\n0 ffc00000 do i 3f and 0= if cr then i l@ 8 u.r 4 +loop cr\nwhich emits 64 bytes per line. The ANS ROM is already visible in the default memory map, so it can be dumped immediately.\nThis process is not very quick, but when it finishes you would take the transcript and turn the hex strings back into binary (Perl's\npack\nfunction is perfect for this), which if properly captured would yield a file exactly 4,194,304 bytes long. Something like this should work on the 64-bytes-per-line output:\n#!/usr/bin/perl</p>
<p>select(STDOUT); $|++; while(&lt;&gt;) {
    chomp; chomp; next unless (length == 128);
    print STDOUT pack("H*", $_);
}\nwhich the Perl golfers will probably have turned into a handful of indecipherable bytes in the comments shortly. After the process is complete,\nsetenv input-device kbd\n,\nsetenv output-device screen\nand\nreset-all\nwill move the console back to the ADB keyboard and VGA port.\nThere are a number of interesting things about this ROM, though most of it (about the first 3MB) is still identical to the 9500's.\nThe default boot device remains\ndisk2:aix\n, but there are apparently NT-specific words in this version of Open Firmware like\nnt-gen-configs\n,\nnt-gen-config-vars\n,\ninit-nt-vars\n,\nmaybe-create-nt-part\n, etc. Their Forth code looks like this:\nok
0 &gt; see nt-gen-configs defer nt-gen-configs
: (nt-gen-configs 
  maybe-read-nt-part get-first-str 
  begin 
    while/if 
      _cfgval _cfgvallen encode-string _cfgname count set-option get-next-str 
    repeat 
  ; ok
0 &gt; see nt-gen-config-vars defer nt-gen-config-vars 
: (nt-gen-config-vars 
  maybe-read-nt-part get-first-str 
  begin 
    while/if 
      _cfgname count _configname pack drop ['] string-var gen-config-var 
      get-next-str 
    repeat 
  ; ok
0 &gt; see maybe-read-nt-part 
: maybe-read-nt-part 
  init-nt-vars osnv-good? if 
    read-part 
    else 
    nvram-buffer nv-buffer-size erase 
    then 
  ; ok
0 &gt; see init-nt-vars 
: init-nt-vars 
  nvram-buffer 0= if 
    /osnv dup to nv-buffer-size alloc-mem to nvram-buffer nvram-buffer nv-buffer-size 
    erase nvram-size alloc-mem to _cfgval nvram-size to _cfgval-size _cfgval 
    _cfgval-size erase 
    then 
  ;\nFrom this you can get the general notion that these allocate a block of NVRAM for NT-specific configuration variables. There are also words for direct mouse support.\nIf we list out packages, we see other interesting things.\nok
0 &gt; dev /  ok
0 &gt; ls 
FF8362C0: /PowerPC,604@0
FF836570:   /l2-cache@0,0
FF836DA8: /chosen@0
FF836ED8: /memory@0
FF837020: /openprom@0
FF8370E0: /AAPL,ROM@FFC00000
FF8373A0: /options@0
FF837878: /aliases@0
FF837AF0: /packages@0
FF837B78:   /deblocker@0,0
FF8383E0:   /disk-label@0,0
FF838988:   /obp-tftp@0,0
FF83BFA0:   /mac-files@0,0
FF83C7A0:   /mac-parts@0,0
FF83D078:   /aix-boot@0,0
FF83D808:   /fat-files@0,0
FF83F608:   /iso-9660-files@0,0
FF840390:   /xcoff-loader@0,0
FF840DB8:   /pe-loader@0,0
FF8416A0:   /terminal-emulator@0,0
FF841738: /bandit@F2000000
[...]\nYes, there is a\npe-loader\npackage — as in Portable Executable, the format first introduced in Windows NT 3.1 to replace the old 16-bit New Executable\n.exe\n, and today the standard executable format for all modern versions of Windows. Here are some pieces of that:\nok
0 &gt; see boot 
: boot 
  "boot " boot|load init-program go ; ok
0 &gt; see boot|load 
: boot|load 
  _reboot-command pack drop set-diag-mode ['] (init-program) to ^-7DA998<br />
  carret word count (load) ; ok
0 &gt; see init-program defer init-program 
: (init-program) 
  0 to ^-7DB118  loadaddr "\ " comp 0= if 
    "evaluating Forth source" type loadaddr loadsize evaluate loadaddr loadmapsize 
    do-unmap true to ^-7DB118<br />
    else 
    loadaddr 2c@-be F108 = if 
      "evaluating FCode" type loadaddr 1 byte-load loadaddr loadmapsize do-unmap 
      true to ^-7DB118<br />
      else 
      loadaddr 2c@-be 1DF = if 
        "loading XCOFF" type 0 0 "xcoff-loader" $open-package "init-program" 
        2 pick $call-method close-package 
        else 
        loadaddr 2c@-be F001 = if 
          "Loading PE/COFF" type cr 0 0 "pe-loader" $open-package "init-program" 
          2 pick $call-method close-package 
          else 
          "unrecognized Client Program format" type 
          then 
        then 
      then 
    then 
  ; ok
0 &gt; dev /packages/pe-loader  ok
0 &gt; words 
init-program    close           open            map-space       header-size     new-load-adr  <br />
stack-size      scthdr.size     &gt;pes.rawptr     &gt;pes.size_raw   &gt;pes.rva        &gt;pes.virt_size  </p>
<blockquote>
<p>pes.name       opthdr.size     &gt;peo.no_dir     &gt;peo.loader_flags               &gt;peo.heap_com_size            <br />
peo.heap_res_size              &gt;peo.stack_com_size             &gt;peo.stack_res_size           <br />
peo.head_size  &gt;peo.image_size &gt;peo.file_algn  &gt;peo.scns_algn  &gt;peo.image_base &gt;peo.sndata   <br />
peo.sntext     &gt;peo.entry      &gt;peo.bsize      &gt;peo.dsize      &gt;peo.tsize      &gt;peo.magic    <br />
filehdr.size    &gt;pe.nscns       &gt;pe.machine   <br />
 ok
0 &gt; see init-program 
: init-program 
  real? little? 0= or real_base 700000 u&lt; or "load-base" eval 700000 u&lt; or 
  if 
    "false" "real-mode?" $setenv "true" "little-endian?" $setenv @startvec 
    &gt;ramsize @ h#100000 - dup (u.) "real-base" $setenv h#100000 - (u.) "load-base" 
    $setenv cr "RESETing to change Configuration!" type cr force-reboot 
    then 
  loadaddr filehdr.size + &gt;peo.image_base @ dup to new-load-adr "image_base  " 
  type u. cr loadaddr filehdr.size + &gt;peo.head_size @ to header-size new-load-adr 
  stack-size - loadsize h#fff + h#-1000 and stack-size + map-space new-load-adr 
  stack-size - stack-size 0 fill loadaddr header-size + new-load-adr loadsize 
  header-size - move new-load-adr loadsize header-size - bounds do 
    i ^dcbf i ^icbi 14 
    +loop 
  loadaddr loadsize do-unmap 0 4000 map-space install-interrupt-vectors ci-regs 
  h#100 h#deadbeef filll new-load-adr stack-size - FF00 + spsv reg! new-load-adr 
  sasv reg! new-load-adr srr0sv reg! ['] cientry argsv reg! 0 crsv reg! msr@ 
  17FFF and srr1sv reg! state-valid on ?state-valid ; ok
0 &gt;\nYour eyes deceive you not: when configured to boot NT, this ROM runs the machine\nlittle-endian\n— which at the time would have been a first for a Power Mac as well, though this is the only way that Windows NT on PowerPC\never ran\n. 32-bit PowerPC has little-endian support through a little-endian bit in the machine state register or by setting a flag on memory pages in the MMU (which is how Virtual PC ran) or at the instruction level with byteswapping, but to this point all official Power Mac payloads had run big.\nThat means this ROM may be able to run PowerPC Portable Executables directly, so I got out my OEM Windows NT 4.0 kit to see.\nI ran those words just in case they made a difference and then tried to do a naïve boot directly from the Windows NT 4 CD. This looks something like\nboot disk0:,\ppc\setupldr\n(don't forget the colon and the comma).\nAnd, well, it can indeed load it and has a sensible image base address — but immediately crashes with a\nCLAIM failed\n, suggesting it couldn't map memory for the executable image, even though 32MB of RAM should have been more than enough to start Windows NT Setup. You can see from\ninit_program\nabove that it provides computed  values for Open Firmware\nload-base\nand\nreal-base\n, so I imagine they were tailored specifically to boot NT (and NT Setup), but nevertheless I couldn't get past this point.\n[In the comments, Andrei Warkentin asked if it could boot the veneer from the CD. It parses ...\n... but it does not run either.]\nTo be sure, we almost certainly don't have all the pieces together for a successful NT boot\nyet\n. One thing I could find no trace of in the ROM was ARC. We talked about the rise and fall of ARC in\nour SGI Indigo\n2\nrefurb weekend\n, but even though IBM, Sun, HP, Intel and Apple were never members of the Advanced Computing Environment consortium, Microsoft was. As a consequence virtually any machine capable of booting Windows NT would have some means of system specification through ARC (this particular historical vestige persisted until Windows Vista). On DEC Alphas, this was implemented in firmware, which is why you need the right firmware to boot it; for the IBM Power Series workstations and laptops, the ARC console was on floppy disk. It is highly likely the ANS also had an ARC console of its own, and since it doesn't appear to be in the ROM, there must have been a floppy or CD that provided it which we don't have.\nAdditionally, Windows NT relies on a hardware abstraction layer (HAL) which operates between the physical hardware and the rest of the operating system. The HAL is even more lower-level than device drivers, implementing functions like allowing device drivers to access ports in a more standardized fashion, abstracting away interrupt management, and unifying firmware interfaces and DMA. There are HAL DLLs on the 4.0 CD for various IBM (Types 6015, 6020, 6030, and 6070), FirePower (Powerized MX and ES) and Motorola (PowerStack 2 and Big Bend) PowerPC systems, but none for any Power Mac. The HAL necessarily gets loaded early in the setup process, often from another floppy, and you won't be able to successfully bring up Windows NT without it. Although there are apocryphal references to "halbandit" out there and this name is likely a reference to the ANS HAL, we don't have it either. (While it should be possible to get\nthe Windows NT for Power Mac port\nrunning on the ANS, per the maintainer its current HAL relies on Mac OS support, so it wouldn't actually be using this ROM.)\nDo you have any of these pieces? Post in the comments, or if you'd prefer to be anonymous, drop me an E-mail at ckaiser at floodgap dawt com.\nEven without Jobs' looming axe, NT on the ANS was probably ill-starred anyway no matter how well it ran. The unique persistence of Windows NT on the DEC Alpha was a side-effect of primary architect Dave Cutler strongly basing NT on DEC VMS, an aspect hardly lost on DEC's legal team, to the point where various filenames and directory structures in the NT codebase even directly matched those in VMS. To avoid a lawsuit Microsoft paid off DEC, helped promote VMS, and committed to continued support for NT on Alpha, which remained until the beta phase of Windows 2000. This situation was absolutely not the case with PowerPC: IBM was so irked with Microsoft over OS/2 and NT's adoption of an expanded Windows API instead that its support for RISC NT was never more than half-hearted. Likewise, the only MIPS hardware that ran NT were DECstations — quickly cancelled by DEC in favour of Alpha — and directly from MIPS, the Magnum R4000 — also cancelled to avoid competition with Silicon Graphics' IRIX hardware when SGI bought them out. At that point, and already not favourably predisposed to Microsoft's initiative, IBM didn't see any value in continuing to support Windows NT on PowerPC and Amelio's Apple definitely didn't have the resources to do so themselves.\n1.1.20.1 preproduction ROMs\nLet's rewind a bit here and talk about booting Mac OS on the ANS, given that's how all this got started in the first place. The stock 1.1.22 ROM blocks booting it at the Open Firmware level:\nok
0 &gt; dev /AAPL,ROM  ok
0 &gt; words 
load            open          <br />
 ok
0 &gt; see open 
: open 
  "MacOS is not supported. " type false 
  ; ok
0 &gt; see load 
: load 
  real_base 400000 &lt;&gt; virt_base -800000 &lt;&gt; or real? or little? or if 
    10 base ! "FFFFFFFF" "real-base" $setenv "FFFFFFFF" "virt-base" $setenv 
    "false" "real-mode?" $setenv "false" "little-endian?" $setenv "boot /AAPL,ROM" 
    !set-restart cr "RESETing to change Configuration!" type cr reset-all 
    then 
  ; ok
0 &gt;\nIf you try anyway with\nboot /AAPL,ROM\n, it won't work.\nYou can force it by patching out those Forth words, but even though it will try to start, it will immediately crash and return you to the Open Firmware prompt.\nStill, repeated reports back in the day swore they could do it. A couple people\ntried using 9500 ROMs\n, noting they would get a picture on an IMS Twin Turbo video card, though there was disagreement on whether it could actually boot anything and the different Bandit mapping almost certainly assured this wouldn't get off the ground. A few other people had intermittently acquired remaindered ANS systems from Apple that did indeed boot MacOS (retrospectively they very likely had 2.0 ROMs in them). More interesting, however, were reports that the Network Servers had\npreviously\nbooted Mac OS during development.\nOne of these early ROMs ended up sitting in a box in my closet for about 20 years. Apple Austin (the address on the box is no longer an Apple building) was the last stand of the Network Server, where a number of systems remained serving content as late as 2005. Per an Apple employee on the LinuxPPC-ANS list in March 2003, "Our team here at Apple decommissioned over 40 Shiners early last year. They used to be the backbone of the Apple Support site [that is, the former\nwww.info.apple.com\n] serving all the software downloads, all the images for the support site and performing much of the heavy lifting behind the scenes that made our website the highest rated support site in the industry." About twenty of them were sold to list members — I was a starving medical student at the time and couldn't afford either the cash or the space — but I did make a deal to pick up some of the spare parts. I got two 10Mbit Ethernet cards and some 68-pin SCSI interconnects, and also some RAM. I didn't look too closely at what was in the box otherwise. I am told the servers that did not sell were crushed. :(\nIt wasn't until I was looking through my box for a spare ROM to see if I could get it converted to 2.0 that I found this ROM stick in the bottom of the box. It was not labeled and if I hadn't seen a picture of the 2.0 ROM, I probably wouldn't have recognized it for what it was.\nThis was how the 2.0 ROM looked in the Apple employee's Deep Dish that booted OS 9. Apple used flashable DIMMs exactly like this for Power Mac development generally; the form factor will fit in any beige Power Mac. (We don't know how to flash these yet but I know people are working on it.)\nStill, the fact it came from the Network Server afterlife meant it probably wasn't any ordinary DIMM, so now let's give it a spin.\nIt comes right up ... and it's a pre-production ROM! This is currently the earliest known ROM available for the Network Server. I have no idea how it got in that box; I didn't request a spare ROM DIMM from them, but it was down at the bottom with the network cards and the other pieces that I did order.\nI immediately dumped this one also to compare. Our Apple employee with the 2.0 ROMs also had a 1.1.20.1 set, and the hashes match his dump, so this is the same.\ndisk2:aix<br />
Device isn't there! can't OPEN: /bandit/53c825@11/sd@2,0:aixOpenFirmware1.1.20
To continue booting the MacOS type:
BYE<return>
To continue booting from the default boot device type:
BOOT<return>
 ok
0 &gt; dev /  ok
0 &gt; ls 
FF830648: /PowerPC,604@0
FF8308F8:   /l2-cache@0,0
FF831158: /chosen@0
FF831288: /memory@0
FF8313D0: /openprom@0
FF831490: /AAPL,ROM@FFC00000
FF8316F0: /options@0
FF831BD0: /aliases@0
FF831E10: /packages@0
FF831E98:   /deblocker@0,0
FF832738:   /disk-label@0,0
FF832CA8:   /obp-tftp@0,0
FF8358B8:   /mac-files@0,0
FF8361A0:   /mac-parts@0,0
FF836AC0:   /aix-boot@0,0
FF837218:   /fat-files@0,0
FF838B80:   /iso-9660-files@0,0
FF839670:   /xcoff-loader@0,0
FF83A1A0:   /terminal-emulator@0,0
FF83A238: /bandit@F2000000
FF83B290:   /53c825@11
FF83DB70:     /sd@0,0
FF83E7D8:     /st@0,0
FF83F638:   /53c825@12
FF841F18:     /sd@0,0
FF842B80:     /st@0,0
FF844018:   /gc@10
FF844450:     /53c94@10000
FF8461F0:       /sd@0,0
FF846FD8:       /st@0,0
FF847E58:     /mace@11000
FF848FD8:     /escc@13000
FF849130:       /ch-a@13020
FF849868:       /ch-b@13000
FF849FA0:     /awacs@14000
FF84A088:     /swim3@15000
FF84B918:     /via-cuda@16000
FF84CE18:       /adb@0,0
FF84CF08:         /keyboard@0,0
FF84D6E0:         /mouse@1,0
FF84D790:       /pram@0,0
FF84D840:       /rtc@0,0
FF84DD70:       /power-mgt@0,0
FF84DF48:     /nvram@1D000
FF8628D8:     /lcd@1C000
FF850490:   /pci106b,1@B
FF850668:   /54m30@F
FF84E560: /bandit@F4000000
FF862060:   /pci106b,1@B
FF84FCA8: /hammerhead@F8000000
 ok\nThis ROM specifically advertises it can boot Mac OS, and there is no block in Open Firmware.\n0 &gt; dev /AAPL,ROM  ok
0 &gt; words 
load            open          <br />
 ok
0 &gt; see open 
: open 
  true 
  ; ok
0 &gt; see load 
: load 
  real_base 400000 &lt;&gt; virt_base -800000 &lt;&gt; or real? or little? or if 
    10 base ! "FFFFFFFF" "real-base" $setenv "FFFFFFFF" "virt-base" $setenv 
    "false" "real-mode?" $setenv "false" "little-endian?" $setenv "boot /AAPL,ROM" 
    !set-restart cr "RESETing to change Configuration!" type cr reset-all 
    then 
  ?cr "MacOS is currently unsupported, use at your own risk." type <bye> 
  ; ok
0 &gt;\nHowever, if you enter\nbye\nas directed with a CD in the internal CD-ROM, the screen will go blank and nothing will happen.\nThe clue comes from those who claimed they got the system partially running with 9500 ROMs: the 9500 has no on-board video and always came from Apple with a video card, so they added a video card. With that, they got a picture\non the video card\n. No Mac OS support for the internal Fast Wide SCSI nor the Cirrus Logic video is implemented in this ROM, and as we mentioned earlier, having never been used in any prior Apple product, the operating system proper doesn't know what they are either. In fact, the Cirrus Logic video is gimped even in AIX — the ANS Hardware Developer Notes say that the video controller provides "only a little-endian window into the packed-pixel frame buffer, hence Big Endian [sic] operating systems are limited to 8 bits per pixel unless low-level transformation routines are written."\nFor a server that's probably good enough. For a really powerful under-the-desk workstation, that stinks. Let's add a video card.\nI chose an IMS Twin Turbo 128MA, nearly the pinnacle of 2D classic Mac performance, and one of the BTO options Apple offered for the 9500.\nI also put as much high-capacity parity RAM in it as I could get my hands on. The biggest parity FPM DIMMs I have in stock were 64MB. You may need to examine your RAM sticks carefully to make sure you aren't actually putting in\nnon\n-parity (the stick in the bottom picture is\nnot\nparity). These two got me 128MB to start.\nInitially I could only scrape together 192MB of parity RAM from what I had left and the 16MB upgrade kits, so I started with that.\nFor a test boot, I decided to try the external DB-25 BlueSCSI dongle I had left over from when we experimented with\nNovell NetWare on the Power Macintosh 6100\n, for two reasons: it already had a bootable image of 7.6 on it I was using for another project, and it also has an image of Cyberpunk, Apple's codename for the very alpha port of NetWare to the Power Mac originally intended for Shiner systems. Recall that this Forth word exists in every known ANS ROM, even the late 2.26 NT ROM, with the notable exception of the 2.0 MacOS ROMs:\n0 &gt; see setenv-netware 
: setenv-netware 
  "false" "real-mode?" $setenv "ttya:19200" "input-device" $setenv "ttya:19200" 
  "output-device" $setenv ?esb if 
    "scsi-int/sd@2:0" 
    else 
    "scsi-int/sd@3:0" 
    then 
  "boot-device" $setenv 
  ; ok\nI wasn't sure if this version of Cyberpunk, intended for Piltdown Man machines (i.e., the 6100 and allies), would start on it but if any ROM could, I felt sure these beta ROMs had a decent chance. I set the Open Firmware\ninput-device\nback to the default\nkbd\nand the\noutput-device\nback to the default\nscreen\nand brought it back up again.\nNotice that it will still try to boot AIX as default — you would need to change the boot device to\n/AAPL,ROM\nto autoboot Mac OS, and this will be lost if the board NVRAM gets reset.\nAt this point, we plug the monitor into the Twin Turbo card and blindly type\nbye\n. Yes, you can set the Open Firmware\noutput-device\ndirectly to the video card — something like\n/bandit@F2000000/IMS,tt128mbA@D\nwould work for slot 1 — but this isn't necessary to boot ...\n... because the Toolbox ROM will automatically use the card anyway and we get our long awaited Happy Mac. This is analogous to the situation on a real 9500 where Open Firmware 1.0.5 isn't on the console; by default it's on the serial ports. Another big heaping bowl of foreshadowing for you to keep in mind.\nI left the Cyberpunk image on SCSI ID 0 to see what it would do, though I was pretty sure it would fail, and it did. This image has System 7.1.2 on it and no PCI Power Mac officially supported anything earlier than 7.5.2.\nBut, rearranging the IDs so that the 7.6 image was on ID 0 and the Cyberpunk image was in ID 1, 7.6 will boot! Let's switch to proper screenshots.\nUnsurprisingly, 7.6's relatively underpowered System Profiler identifies the system as Gestalt ID 67, which matches the 9500, 9515, 9600 and the WGS 9650, but gives us little more detail than that. For a deeper dive we'll fire up TattleTech which was already on this disk image.\nTattleTech reports the same Gestalt ID.\nCursorily scanning the Gestalt ID list, they all look pretty similar to a Mac of that generation booting 7.6. There is little hint here that this computer is anything other than a 9500.\nOn the other hand, the PCI slot layout is a little different. Like the 9500 and 9600, the ANS has two Bandits (there is even space in the memory map for a third, which remains unimplemented) and thus two PCI busses, but the 9500/9600 assign\nthree slots each to each Bandit\n(Grand Central handling non-PCI devices is on the first). In the ANS, the first Bandit also carries the internal SCSI and internal video as well as Grand Central, so it only handles two slots, with slot 3 going to the second Bandit. This rearrangement manifests here in TattleTech showing just two slots on the first bus.\nThe ROM checksum also doesn't match. 9500 ROMs contain an Apple checksum of either $96CD923D or $9630C68B (the 9600 might also have $960E4BE9 or $960FC647), but this ROM checksums as $962F6C13. The same checksum appears in the 1.1.22 production ROM, which still contains a substantial portion of the 9500 v2 ROM even though it definitely won't boot Mac OS. This likely represents held-over code that simply no one bothered to remove.\nWe can also see that the two internal SCSI busses are detected, even if they aren't bootable with this ROM, and they are properly probed as a 53C825. The 53C94 used for the external SCSI which we are running from likewise appears.\nFinally, the built-in AAUI Ethernet is detected as well (MACE, via Grand Central). I point this out specifically because ...\n... it doesn't seem to work. While both AAUI dongles I tried showed working LEDs and activity on the network, 7.6 refused to enable the port. This did work in AIX at one point when I used it to sub for\nstockholm\nwhile investigating a hardware fault, but now it won't netboot either from Open Firmware. I'm concluding the MACE embedded in CURIO works but the PHY it connects to must have crapped out in storage.\nSince we have the Cyberpunk image up, I tried running the PDMLoader just to see. Recall from our\nNetWare on Power Macintosh\narticle that the PDMLoader is, at least on NuBus Power Macs, what starts the NWstart kernel and enters NetWare. Among other things it provides a fake Open Firmware environment to allow those Macs to resemble a Shiner ESB unit for demonstration purposes, which was the intended target hardware. Early Shiners reportedly could boot it directly. Unsurprisingly, the PDMLoader checks that it was started on a supported Mac and (based on the Gestalt ID) finds our franken-ANS wanting.\nIf we look back at our definition for\nsetenv-netware\n, however, we can see NetWare was expected to run from a so-called "partition zero" loader. This is like it sounds: a runnable binary occupies partition zero of a bootable disk, usually XCOFF, and is loaded as blocks into memory by Open Firmware and executed. Unfortunately, the Installer we used for Cyberpunk didn't support creating this, and it wouldn't have been necessary for a NuBus Power Mac anyway which doesn't boot like that. As it's a regular XCOFF binary otherwise, I tried putting\nNWstart\nonto a plain physical ISO 9660 CD and fed that to 1.1.20.1, but ...\ndisk2:aix<br />
Device isn't there! can't OPEN: /bandit/53c825@11/sd@2,0:aixOpenFirmware1.1.20
To continue booting the MacOS type:
BYE<return>
To continue booting from the default boot device type:
BOOT<return>
 ok
0 &gt; boot disk0:,\NWSTART. 
disk0:,\NWSTART.  loading XCOFF
tsize=2A14A1 dsize=90028 bsize=10E17C entry=843EC 
SECTIONS:
.pad     00000000 00000000 00000E14 000001EC
.text    00000000 00000000 002A14A1 00001000
.pad     00000000 00000000 00000B5F 002A24A1
.data    00000000 00000000 00090028 002A3000
.bss     00090028 00090028 0010E17C 00000000
.pad     00000000 00000000 00000FD8 00333028
.loader  00000000 00000000 0003BC04 00334000
loading .text, done..
loading .dataCLAIM failed
 ok\n... while the ROM can read the file from disc and it will load, it halts with the same memory claim error I got trying it on the 500 with production ROMs, even after fiddling with the load and real base values to accommodate a large kernel. It's possible this kernel won't run outside of the PDMLoader environment and the Shiners used a different one, but that's not on the CD I have. Oh well.\nSince the on-board Ethernet was shot, I decided to see if I could get it working with one of the Ethernet cards I ordered from Apple Austin way back when. This is a 10Mbit "Apple Ethernet PCI" card but not the same as the more typical one found in regular Power Macs — this particular card (820-0765-A, 630-1798, MM4709Z/A) is specific to the Apple Network Server. It has 10baseT, 10base2 and AAUI ports and is based on the DEC 21041 "Tulip" NIC, and is also distinct from the ANS 10/100 card (M3906Z/A). I installed the card in slot 6 so it would be on the other Bandit.\nRummaging through the box with the Ethernet cards in it, I also found some more 16MB sticks and bumped the parity RAM to 224MB at the same time.\nUnfortunately Mac OS 7.6 doesn't see the card; it isn't even offered as a choice. This seemed like a good time to try installing Mac OS 9, first because it might have updated drivers, and second because I wanted to see if 9.1 would work in any event. I ended up copying the 7.6 screenshots to the main server with LocalTalk PhoneNET and a really long telephone cable, which my wife graciously chose to ignore temporarily as well.\nIncidentally, a shout-out to my trusty Power Macintosh 7300 that batch-converts these and other PICT screenshots to PNG using Graphic Converter.\nTo start clean, I powered off the box, pulled the plug and turned the rear key for a full reset. While I waited for that to finish, I set up a new microSD card with an empty hard disk image and copied in an ISO of Mac OS 9.1. With power restored and the BlueSCSI reconnected, the CD image booted up — a gratifying sign that Mac OS 9 was going to work just fine — and I formatted the virtual hard disk in Drive Setup.\nEven though it was over the slow 5MB/sec external SCSI, the installation went surprisingly quickly, likely because the emulated "CD" it was installing from was so fast. When it finished, I restarted the ANS ... and got a black screen on both the video card and the onboard VGA, even though I could see activity on the BlueSCSI and heard alert sounds. The ANS also properly responded to me pressing RESET and RETURN to cleanly shut it down, just like a Mac should. I reset the board again and it rebooted normally with\nbye\nfrom the blind console. We're going to come back to this really soon, because now I was starting to doubt the logic board despite all our testing earlier.\n9.1 System Profiler again identifies it with Gestalt ID 67. Everything shows up here that we expect to, including the CPU, clock speed, RAM size and L2 cache.\nWe also see our Twin Turbo and Apple Ethernet PCI cards.\nAnd, to my profound pleasure, it shows up (as "Ethernet slot SLOT.&gt;4" [sic], even though I put it in slot 6, because it's slot 4 to the second Bandit) and can be selected.\nWe are now able to mount our usual assisting Netatalk server over the Ethernet, which replaces one long cable with another long cable, but it's all in the name of science! I did try the MACE Ethernet one more time here, and 9.1 doesn't throw an error, but it still doesn't work.\nAs a transfer test I pulled Gauge Pro off the server. It transferred completely and quickly, so I ran it to see what it thought about the hardware, and it didn't seem to find anything unusual.\nSo, about those reboots. At this point I shut down the machine and found the same thing happened when I tried to start it up again: a black screen, rectified by another complete board reset, but the Mac OS still seemed to boot headless and regardless. After the third such attempt, and out of ideas, I decided to foul the boot completely and see what was going on over the serial port. This can be done by letting it boot in regular mode, then for the next boot ensure the floppy drive is empty and turn the key to service, which will forget the boot setting from beforehand and try to start diagnostics. Lo and behold ...\nfd:diags  NO DISK  can't OPEN: /bandit/gc/swim3:diagsOpenFirmware1.1.20
To continue booting the MacOS type:
BYE<return>
To continue booting from the default boot device type:
BOOT<return>
 ok
0 &gt; printenv 
security-#badlogins 1 
security-password <br />
security-mode       none</p>
</blockquote>
<p>little-endian?      false               false
real-mode?          false               false
auto-boot?          true                true
diag-switch?        false               false
fcode-debug?        false               false
oem-banner?         false               false
oem-logo?           false               false
use-nvramrc?        true                false
f-segment?          false               true
real-base           -1                  -1 
real-size           100000              100000 
virt-base           -1                  -1 
virt-size           100000              100000 
load-base           4000                4000 
pci-probe-list      -1                  -1 
screen-#columns     64                  64 
screen-#rows        28                  28 
selftest-#megs      0                   0 
boot-device         /AAPL,ROM           disk2:aix
boot-file                             <br />
diag-device         fd:diags            cd fd:diags /AAPL,ROM
diag-file                             <br />
input-device        ttya                kbd
output-device       ttya                screen
oem-banner                            <br />
oem-logo                              <br />
  z 2C + 8CC '&amp; 8 + BRpatchyn then ;;l-method else $call-parent then ;
boot-command        boot                boot
 ok
0 &gt;\n... the serial port was active. Instead of\nkbd\nand\nscreen\n(or the TT video card directly), I could see the input and output devices had been set to\nttya\n. I didn't do that — Mac OS did that. Its fingerprints can be found in the apparently nonsense line of text between\noem-logo\nand\nboot-command\n, which is in fact an NVRAMRC expected to run at startup to wallpaper firmware bugs.\nNow it made sense what was going on. Mac OS thought this was a\nreal\n9500, and patched its Open Firmware variables accordingly. The default settings for the Open Firmware 1.0.5 console point to the serial port, but on a real 9500 where Open Firmware wasn't intended as a user-facing interface, the ROM would simply ignore them and continue the boot with the video card and ADB HIDs. Not so on the ANS, where Open Firmware is meant to be interacted with directly: it actually\nobeys\nthese settings! While Mac OS still brought ADB up regardless, neither the video card nor the onboard video would be enabled, and so the screen would stay black. (\nNetBSD/macppc explains a related phenomenon.\n)\nHowever, even after I reset the\ninput-device\nand\noutput-device\nto\nkbd\nand\nscreen\n, I still got no display. But from a cold board reset we wouldn't have an NVRAMRC either, so I also added\nsetenv use-nvramrc? false\n, and\nnow\nwe reboot successfully! The PRAM settings persisted as well.\nThis means our logic board is likely not at fault, but I do consider this\nsome\nsort of bug, especially because I don't want to have to constantly rescue it from a serial port just to restart the operating system. Fortunately there's a tool out there we can repurpose to get around the problem.\nPaul Mackerras, now working\nat IBM down under\nand well-known to us in the OpenPOWER community, years earlier had written a control panel utility called Boot Variables. This CDEV very simply gives you a graphical Mac OS interface to what's stored in Open Firmware. To get this back up I would have had to fix the Mac OS patches, so you can see that the new (tainted) settings are written on startup, not shutdown. This is good news because if we undo the damage beforehand, we'll shutdown and/or reboot normally.\nBoot Variables lets you save the current contents or load them from a file. If we save the current contents, we can see the NVRAMRC is rather lengthy (extracting the text from the binary dump Boot Variables generates):\nboot: '&amp; get-token drop ;
: &gt;&amp; dup @ 6 &lt;&lt; 6 &gt;&gt;a -4 and + ;
: &amp; na+ &gt;&amp; ;
6ED '&amp; execute</p>
<p>0 value mi</p>
<p>: mmr " map-range" mi if my-self $call-method else $call-parent then ;
89B '&amp; ' mmr BRpatch</p>
<p>: mcm -1 to mi $call-method 0 to mi ;
8CB '&amp; 1E na+ ' mcm BLpatch</p>
<p>: maa -1 to mi 1D swap ;
8C9 '&amp; 5 na+ ' maa BLpatch
8C9 '&amp; 134 + ' 1 BLpatch</p>
<p>8CD '&amp; 184 + dup 14 + &gt;&amp; BRpatch</p>
<p>8C6 '&amp; 7C + ' u&lt; BLpatch</p>
<p>0 value yn
: y yn 0= if dup @ to yn then ;
8CB '&amp; ' y BRpatch
' y 28 + 8CB '&amp; 8 + BRpatch
: z yn ?dup if over ! 0 to yn then ;
8CC '&amp; ' z BRpatch
' z 2C + 8CC '&amp; 8 + BRpatch\nThis does a lot of low-level patching, and while it's not exactly clear what part the ANS doesn't like, the script is also rather unnecessary since it boots fine without it.\nBoot Variables can also write and restart the machine in one step with your new settings. In fact, if you open a Boot Variables dump with the Option key down, it will load those settings and reboot immediately with them, so we can just reboot that way — not exactly an ideal solution, but it works. Since the source code is available for Boot Variables, I'm tempted to write a Shutdown Items version that will do these steps automagically without prompting. In the meantime you can download it\nfrom the NetBSD archives\n, since it has obvious utility for NetBSD/macppc.\nBecause these steps are a bit of a pain, I suspected (and still do) that the version of Mac OS Apple exhibited during the ANS beta test was likely patched to work around the problem. That's yet to show up, though, if it even exists.\nThe former Apple employee who got me the 2.26NT ROM also mentioned he'd gotten Rhapsody running on one of their orphaned 700s. This would have had obvious political overtones within Apple at the time, and his boss told him not to tell anybody. Interestingly, the 2.26 ROMs do have strings in them claiming they can boot MacOS:\n% strings rom1122.bin | grep -i macos
[...]
driver,AAPL,MacOS,PowerPC
MacOS is not supported. 
% strings rom226b6.bin | grep -i macos
driver,AAPL,MacOS,PowerPC
[...]
MacOS is not supported. 
+MacOS is unsupported, use at your own risk.
:MacOS requires PCI video card and external SCSI boot disk.
% strings rom226nt.bin | grep -i macos
driver,AAPL,MacOS,PowerPC
[...]
MacOS is not supported. 
+MacOS is unsupported, use at your own risk.
:MacOS requires PCI video card and external SCSI boot disk.\nDespite running the system little when (trying to) boot NT, the 2.26NT ROM is of course perfectly capable of running big, and indeed must in order to boot AIX. Those strings appear to be false flags, though, because like the production 1.1.22 ROMs it too is blocked from booting Mac OS at the Open Firmware level:\ndisk2:aix   can't OPEN: /bandit/53c825@11/sd@2,0:aixOpenFirmware2.26
To continue booting from the default boot device type:
BOOT<return>
 ok
0 &gt; dev /AAPL,ROM  ok
0 &gt; words 
load            open          <br />
 ok
0 &gt; see open 
: open 
  "MacOS is not supported. " type false ; ok
0 &gt; see load 
: load 
  real_base 400000 &lt;&gt; virt_base -800000 &lt;&gt; or real? or little? or if 
    10 base ! "FFFFFFFF" "real-base" $setenv "FFFFFFFF" "virt-base" $setenv 
    "false" "real-mode?" $setenv "false" "little-endian?" $setenv "boot /AAPL,ROM" 
    !set-restart cr "RESETing to change Configuration!" type cr reset-all 
    then 
  ?cr "MacOS is unsupported, use at your own risk." type ?cr "MacOS requires PCI video card and external SCSI boot disk." 
  type <bye> ; ok
0 &gt; boot /AAPL,ROM 
/AAPL,ROM  MacOS is not supported.  can't OPEN: /AAPL,ROM
 ok
0 &gt;\n... and it will also hang if you patch out the words anyway.\nNo matter whatever hacking I tried, it would not go past this point either. It\nis\nnoteworthy, however, that it claims it would boot with a PCI video card and external disk — it does\nnot\n— which is exactly our successful configuration for 1.1.20.1. Given these limitations, it seems most likely that our Apple employee did this on a 2.0 ROM system (i.e., the "real" ANS Mac OS ROM), but let's see if the pre-production ROMs can pull off the same trick.\nCurrently I run Mac OS X Server v1.2 (i.e., Rhapsody 5.5) on a WallStreet PowerBook G3, probably the best laptop for doing so, but all versions have been reported to run on beige PCI Power Macs including the 9500. However, my previous experience with Rhapsody was that it rebooted multiple times during the install, and I was concerned this would be a problem with our rickety restart situation. So ... let's have the Wally install it to the BlueSCSI for the 700, and then see if the 700 will boot it.\nThe Wally is also technically unsupported, but you can get around that in the Installer, and the installation created is universal.\nThe installation process ran a lot more slowly than Mac OS 9's, even with the Mac OS X Server v1.2 CD images on the BlueSCSI.\nWhen it completed, I took the finished hard disk and the installer CD disk image back to the 700. The 700 booted the CD just fine — it's just Mac OS 9, after all — but its Startup Disk control panel didn't see the Rhapsody disk.\nI rebooted from the Mac OS 9.1 hard disk image but with the Rhapsody install also present on SCSI ID 1. While both Drive Setup and SCSIProbe saw it, neither mounted it (not even forcibly with SCSIProbe), and Startup Disk still failed to see it.\nApple made a tool to deal with this and other related startup situations called System Disk. Distinct from the built-in Startup Disk CDEV, this is a utility application that lets you pick your boot volume and as a nice side effect can be used to edit Open Firmware variables too. It comes as a self-mounting disk image.\nSystem Disk\nis not supported on some systems\nand we should not be surprised it is not supported on this one either.\nThat said, it alone is able to see the Rhapsody volume and can tell us what we need to know. It has the boot and output devices completely wrong —\nscsi-int\nwould be the internal SCSI, not the external, and\n/chaos/control\nreferences built-in graphics in models like the Power Mac 7300 and 8600 — and this version of Open Firmware lacks the words\nO\nor\nbootr\n, but we can see where it expects to load the Mach kernel from (partition 8) using its own "partition zero" bootloader.\nThis information is enough to come up with a command line to try booting it manually, but after all that I couldn't get it to start; it gives the same\nCLAIM\nfailure message that's doomed our other attempts. Since I wasn't able to get it any further, it doesn't seem like trying real OS X out would go anywhere either. They may simply not work with this ROM.\nOverall, however, the machine boots OS 9.1 well enough as long as you deal with the reboot-and-shutdown situation. It's a bit overkill to do this entirely over the external SCSI but at least doing it with flash media is far faster than a regular hard disk or CD-ROM, and as far as size goes I suppose it's no worse than\nusing an SGI Crimson to browse your filesystem\n. If this is all you have to boot Mac OS on the ANS, and you really\nwant\nto boot Mac OS on the ANS instead of indulging in the jackbooted bliss of AIX, it's perfectly cromulent.\nThe current situation\nThe pre-production ROMs work. Still, I'm hoping to get a 2.0 ROM in the near future and working with someone on doing just that. Even so, if you're an Apple employee with one of these ANS ROMs you need to get rid of, let's talk! The 2.0 ROM should solve our remaining issues with Mac OS 9, probably enable us to boot Rhapsody, and possibly even get early versions of Mac OS X working on the Apple Network Server too.\nSimilarly, if you know anything about "halbandit" or can provide the HAL or ARC console for the ANS' spin of Windows NT, that would be great! And anyone with knowledge of how Cyberpunk/NetWare was supposed to boot on Shiner ...\nIf you'd prefer not to post in the comments or wish to remain publicly anonymous, you can contact me at ckaiser at floodgap dawt com.\nMore to come\n.</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="2026年2月5日 10:06:05 UTC">2026-02-05</span>
  </span>

    
    
    
    
  </aside>


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        这篇文章有帮助吗？
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="有帮助" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="没帮助" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              
              
                
                
              
              感谢反馈！
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              
              
                
                
              
              感谢反馈！我们会改进。
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2026 - OpenClaw
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/mrgolftech" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.action.edit"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>